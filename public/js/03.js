(function(){this.BC={Timeline:{}}}).call(this),function(){var t,e;BC.animateElementWithClass=function(e,n,i){return t(e,n,"animationend",i)},BC.transitionElementWithClass=function(e,n,i){return t(e,n,"transitionend",i)},BC.shakeElement=function(t){return BC.animateElementWithClass(t,"oops-shake-it")},t=function(t,n,i,r){var o,a,s,u;return u=!1,s=function(){if(!u)return u=!0,t.removeEventListener(i,s),requestAnimationFrame(function(){return t.classList.remove(n),"function"==typeof r?r():void 0})},t.addEventListener(i,s),t.classList.add(n),a=(o=e(t,i))?o+200:500,setTimeout(s,a)},e=function(t,e){var n,i;if(i="animationend"===e?"animation":"transition",n=getComputedStyle(t)[i+"Duration"])return/ms/.test(n)?parseInt(n,10):1e3*parseFloat(n)}}.call(this),function(){var t,e=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};BC.arrayFrom=t=function(t){var e,n,i,r,o;if(Array.isArray(t))return t;if(null!=Array.from)return Array.from(t);if(null!=t.forEach)return r=[],t.forEach(function(t){return r.push(t)}),r;if(null!=t.length){for(r=new Array(t.length),n=e=0,i=t.length;e<i;n=++e)o=t[n],r[n]=o;return r}},BC.arrayWithout=function(t,n){var i,r,o,a,s,u,l;if(Array.isArray(n)){for(s=[],i=0,o=t.length;i<o;i++)l=t[i],e.call(n,l)<0&&s.push(l);return s}for(u=[],r=0,a=t.length;r<a;r++)(l=t[r])!==n&&u.push(l);return u},BC.uniqueValues=function(e){var n,i,r,o;for(r=new Set,n=0,i=e.length;n<i;n++)o=e[n],r.add(o);return t(r)}}.call(this),function(){var t,e;BC.getHexColor=function(n){var i,r;return n?/^#/.test(n)?n:(r=t(n),i=r.map(e),"#"+i.join("")):""},e=function(t){return("0"+t.toString(16)).slice(-2).toUpperCase()},t=function(t){var e,n,i,r,o,a,s,u;return(s=t.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/i))?(a=s.length-3,u=s[a++],o=s[a++],e=s[a++]):(n=document.createElement("canvas"),n.height=n.width=1,i=n.getContext("2d"),i.fillStyle=t,i.fillRect(0,0,1,1),r=i.getImageData(0,0,1,1).data,u=r[0],o=r[1],e=r[2]),[u,o,e].map(Number)}}.call(this),function(){var t;BC.startDebugging=function(){try{window.localStorage.setItem("debug",!0)}catch(t){}return BC.debug=!0},BC.stopDebugging=function(){try{window.localStorage.removeItem("debug")}catch(t){}return BC.debug=!1},BC.debug=null!=(null!=(t=window.localStorage)?t.debug:void 0)}.call(this),function(){var t,e,n,i,r,o;r=window.navigator.userAgent,e=/iPhone|iPad/.test(r),t=/Android/.test(r),i=e||t,n=/Mac/.test(r),o=/Windows/.test(r),BC.platform={isIOS:function(){return e},isAndroid:function(){return t},isMobile:function(){return i},isMac:function(){return n},isWindows:function(){return o},os:function(){switch(!1){case!n:return"mac";case!o:return"windows";default:return""}}()}}.call(this),function(){BC.documentIsActive=function(){var t,e;return e=function(){return"visible"===document.visibilityState},t=function(){return document.hasFocus()},BC.platform.isMobile()?function(){return e()}:function(){return e()&&t()}}()}.call(this),function(){var t,e,n;n=function(){var t,e,n,i,r;for(t=document.documentElement,r=["matches","matchesSelector","webkitMatchesSelector","msMatchesSelector","mozMatchesSelector"],e=0,n=r.length;e<n;e++)if(i=r[e],null!=t[i])return i}(),BC.matches=function(t,e){return t[n](e)},BC.closest=function(t,e){if("closest"in t)return t.closest(e);for(;t;){if(BC.matches(t,e))return t;t=t.parentElement}},BC.elementIsVisible=function(t){var e,n,i,r;return 0!==t.clientHeight&&(i=getComputedStyle(t),e=i.display,r=i.visibility,n=i.opacity,"none"!==e&&"hidden"!==r&&0!==parseInt(n))},BC.elementInViewport=function(e){var n,i,r,o,a;return r=t(e),o=r.topAboveViewport,a=r.topInViewport,i=r.bottomInViewport,n=r.bottomBelowViewport,a||i||o&&n},BC.elementIsViewable=function(t){return BC.elementIsVisible(t)&&BC.elementInViewport(t)},BC.scrollElementIntoViewport=function(e){var n,i,r;return i=t(e),r=i.topAboveViewport,n=i.bottomBelowViewport,r?e.scrollIntoView():n?e.scrollIntoView(!1):void 0},t=function(t){var n,i,r,o,a,s,u,l,c,d,h,p;return p=e(t),u=t.getBoundingClientRect(),l=u.top,n=u.bottom,s=u.height,h=l-p.top,o=p.height+p.top-n,c=h<0,d=0<=h&&h<p.height,r=0<=o&&p.top<n,i=o<0,a=s<=p.height,{topAboveViewport:c,topInViewport:d,bottomInViewport:r,bottomBelowViewport:i,fitsInViewport:a}},e=function(t){var e,n;return n=BC.closest(t,"[scrollable]"),n&&n!==t?(e=n.getBoundingClientRect(),{height:e.height,top:e.top}):{height:window.innerHeight,top:0}}}.call(this),function(){var t,e,n,i,r,o;BC.makeElement=function(t,e){var n,i,r;n=document.createElement(t);for(i in e)r=e[i],n.setAttribute(i,r);return n},BC.registerElement=function(t,n){var i,a,s,u,l,c,d,h;return null==n&&(n={}),t=t.toLowerCase(),e(n),l=o(n),a=null!=(d=l.defaultCSS)?d:"%t { display: block }",delete l.defaultCSS,r(a,t),u=null!=(h=l.extendsTagName)?h:"div",delete l.extendsTagName,s=Object.getPrototypeOf(document.createElement(u)),s.__super__=s,c=Object.create(s,l),i=document.registerElement(t,{prototype:c}),Object.defineProperty(c,"constructor",{value:i}),i},r=function(t,e){var n;return n=i(e),n.textContent=t.replace(/%t/g,e)},i=function(t){var e;return e=document.createElement("style"),e.setAttribute("type","text/css"),e.setAttribute("data-tag-name",t.toLowerCase()),document.head.insertBefore(e,document.head.firstChild),e},o=function(t){var e,n,i;n={};for(e in t)i=t[e],n[e]="function"==typeof i?{value:i}:i;return n},e=function(e){var i,r,o,a,s;if(s=e.stringAttributes,i=e.booleanAttributes,s&&(delete e.stringAttributes,s.forEach(function(t){return e[BC.camelize(t)]=n(t)})),i)for(delete e.booleanAttributes,r=0,o=i.length;r<o;r++)a=i[r],e[BC.camelize(a)]=t(a);return e},n=function(t){return{get:function(){var e;return null!=(e=this.getAttribute(t))?e:""},set:function(e){return null==e&&(e=""),this.setAttribute(t,e)}}},t=function(t){return{get:function(){return this.hasAttribute(t)},set:function(e){return e?this.setAttribute(t,""):this.removeAttribute(t)}}}}.call(this),function(){var t,e,n,i,r;BC.handleEvent=function(t,e){var n,i,r,o,a,s,u,l;return null==e&&(e={}),"function"==typeof e&&(i=e,e={"with":i}),i=e["with"],n=null!=(r=e.on)?r:document,a=e.matching,u="capturing"===e.phase,s=null!=(o=e.times)?o:e.once?1:void 0,l=function(t){return null!=s&&0==--s&&l.destroy(),null==a?i.call(this,t):BC.matches(t.target,a)?i.call(this,t):void 0},l.destroy=function(){return n.removeEventListener(t,l,u)},n.addEventListener(t,l,u),l},BC.triggerEvent=function(t,n,i){var r;return r=e(n,i),t.dispatchEvent(r),r},BC.getEventCoordinates=function(t){var e,n,i;return t.originalEvent&&(t=t.originalEvent),i=null!=(e=null!=(n=t.touches)?n[0]:void 0)?e:t,BC.sliceObject(i,"pageX","pageY","clientX","clientY")},BC.on=function(e,n,i){var r,o,a,s,u;for(null==i&&(i=n,n=null),s=e.split(" "),u=[],o=0,a=s.length;o<a;o++)r=s[o],u.push(t(r,i,n));return u},n={},t=function(t,e,i){var o,a;return null==i&&(i="(anonymous)"),o=[e,i],(a=n[t])?a.push(o):(n[t]=[o],$(document).bind(t,r(t)))},r=function(t){return function(){var e,r;return e=function(e){return function(){var r,o,a,s,u,l,c,d,h;for(c=n[t],h=[],u=0,l=c.length;u<l;u++){d=c[u],a=d[0],r=d[1];try{BC.debug?(s=BC.measure(a.bind(e,arguments)),h.push(console.log("  %sms: %s",i(s),r))):h.push(a.apply(e,arguments))}catch(t){o=t,BC.debug?h.push(console.error("%s raised:\n%s",r,o)):h.push(void 0)}}return h}}(this),BC.debug?(console.group("[%s] %s",t,location.pathname),r=BC.measure(e),console.log("%sms total",i(r)),console.groupEnd()):e()}},i=function(t){return Math.round(1e3*t)/1e3},e=function(t,e){var n,i,r;null==e&&(e={}),n=document.createEvent("Events"),n.initEvent(t,!0,!0);for(i in e)r=e[i],n[i]=r;return n}}.call(this),function(){BC.focusModeEnabled=function(){return document.documentElement.hasAttribute("data-focus-mode-enabled")},BC.enableFocusMode=function(){if(!BC.focusModeEnabled())return document.documentElement.classList.add("focus_mode"),document.documentElement.setAttribute("data-focus-mode-enabled",""),BC.triggerEvent(document,"bc:focusmode-change")},BC.disableFocusMode=function(){return document.documentElement.classList.remove("focus_mode"),document.documentElement.removeAttribute("data-focus-mode-enabled",""),BC.triggerEvent(document,"bc:focusmode-change")}}.call(this),function(){var t,e=[].slice;BC.defer=function(t){return setTimeout(t,1)},BC.synchronize=function(t){var e;return e=new WeakMap,function(n){var i;if((i=e.get(this))||e.set(this,i=[]),i.push(n),1===i.length)return t.call(this,function(t){return function(){var r,o;for(r=0,o=i.length;r<o;r++)"function"==typeof(n=i[r])&&n();return e["delete"](t)}}(this))}},BC.measure=null!=(null!=(t=window.performance)?t.now:void 0)?function(t){var e;return e=performance.now(),t(),performance.now()-e}:function(t){var e;return e=(new Date).getTime(),t(),(new Date).getTime()-e},BC.throttle=function(t){var n;return n=null,function(){var i;return i=1<=arguments.length?e.call(arguments,0):[],null!=n?n:n=requestAnimationFrame(function(e){return function(){return n=null,t.apply(e,i)}}(this))}},BC.debounce=function(t,n){var i;return null==n&&(n=10),i=null,function(){var r,o;return r=1<=arguments.length?e.call(arguments,0):[],o=function(e){return function(){return t.apply(e,r)}}(this),clearTimeout(i),i=setTimeout(o,n)}}}.call(this),function(){window.setupGoogleSignIn=function(){return gapi.load("auth2",function(){return gapi.auth2.init()})},$(document).on("click","[data-behavior~=google_sign_in_button]",function(t){var e;return t.preventDefault(),e=new gapi.auth2.SigninOptionsBuilder,e.setPrompt("select_account"),gapi.auth2.getAuthInstance().signIn(e).then(function(t){var e;if(e=t.getAuthResponse().id_token)return $("[data-behavior~=google_token]").val(e),$("[data-behavior~=google_sign_in]").submit(),gapi.auth2.getAuthInstance().signOut()})})}.call(this),function(){BC.keyCodes={backspace:8,tab:9,enter:13,escape:27,left:37,up:38,right:39,down:40,j:74,forwardSlash:191}}.call(this),function(){var t=[].slice;BC.extendObject=function(t,e){var n,i;for(n in e)i=e[n],t[n]=i;return t},BC.copyObject=function(t){return BC.extendObject({},t)},BC.sliceObject=function(){var e,n,i,r,o,a,s;for(o=arguments[0],i=2<=arguments.length?t.call(arguments,1):[],s={},e=0,r=i.length;e<r;e++)n=i[e],s[n]=null!=(a=o[n])?a:null;return s},BC.objectsAreEqual=function(t,e){var n;if(null==t&&(t={}),null==e&&(e={}),Object.keys(t).length!==Object.keys(e).length)return!1;for(n in t)if(t[n]!==e[n])return!1;return!0}}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};BC.fetchTitleForURL=function(t){var e;return e=new BC.PageTitleRequest(t),e.perform()},BC.PageTitleRequest=function(){function e(e){this.url=e,this.xhrDidLoad=t(this.xhrDidLoad,this),this.xhr=this.createXHR(),this.xhr.addEventListener("load",this.xhrDidLoad),this.promise=new Promise(function(t){return function(e){t.resolve=e}}(this))}var n,i;return n=5e3,e.prototype.perform=function(){var t;return null!=(t=this.xhr)&&t.send(),this.promise},e.prototype.abort=function(){var t;return null!=(t=this.xhr)&&t.abort(),this.xhr=null},e.prototype.createXHR=function(){var t,e,i,r;return t=this.getRequestDetails(),i=t.url,e=t.responseType,r=new XMLHttpRequest,r.open("get",i,!0),r.timeout=n,r.responseType=e,r},e.prototype.xhrDidLoad=function(){var t;return t=this.getTitle(),this.resolve(t)},e.prototype.getTitle=function(){var t,e,n;return t=this.getResponseDetails(),n=t.responseType,e=t.response,this.titleExtractors[n](e)},e.prototype.titleExtractors={json:function(t){return t.title+" - "+t.bucket.name},document:function(t){var e,n,i;return e=BC.readObjectFromMetaTags("current-page",t),(i=e.title)?(e.subtitle&&(i+=" - "+e.subtitle),i):null!=(n=t.querySelector("title"))?n.textContent:void 0}},e.prototype.getResponseDetails=function(){var t,e,n;return t=this.xhr,n=t.responseType,e=t.response,n||"json"!==this.getRequestDetails().responseType||(n="json",e=JSON.parse(e)),{responseType:n,response:e}},e.prototype.getRequestDetails=function(){var t;return(t=this.getURLForRecordingData())?{url:t,responseType:"json"}:{url:this.url,responseType:"document"}},e.prototype.getURLForRecordingData=function(){var t,e;if((e=this.getRecordingIdFromURL())&&(t=this.getBucketIdFromURL()))return BC.accountPath("/buckets/"+t+"/recordings/"+e+".json")},e.prototype.getRecordingIdFromURL=function(){var t,e;if(t=i(this.url))return null!=(e=t.match(/recording_(\d+)/))?e[1]:void 0},e.prototype.getBucketIdFromURL=function(){var t;return null!=(t=this.url.match(/buckets\/(\d+)\//))?t[1]:void 0},i=function(t){var e;return e=document.createElement("a"),e.href=t,e.hash},e}()}.call(this),function(){var t,e,n,i,r,o,a=[].slice,s=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};BC.debug&&window.performance&&(window.addEventListener("load",function(){return BC.defer(function(){return console.group("[Timeline]"),console.table(t(n())),console.groupEnd()})}),o="navigationStart requestStart responseEnd domLoading domInteractive domContentLoadedEventStart domContentLoadedEventEnd loadEventStart loadEventEnd".split(" "),r="requestStart responseEnd".split(" "),n=function(){var t,n,a,s,u,l,c,d,h,p,f,m,g,v,b;for(t=[],b=window.performance.timing,g=b.navigationStart,n=0,u=o.length;n<u;n++)h=o[n],v=b[h]-g,t.push({time:v,marker:h,resource:m});for(p=i("script","link","xmlhttprequest",""),a=0,l=p.length;a<l;a++)for(b=p[a],m=e(b.name),s=0,c=r.length;s<c;s++)h=r[s],v=Math.round(b[h]),t.push({time:v,marker:h,resource:m});return(d=null!=(f=window.chrome)&&"function"==typeof f.loadTimes?f.loadTimes():void 0)&&(h="firstPaintTime",v=Math.round(1e3*d[h]-g),t.push({time:v,marker:h})),t.sort(function(t,e){return t.time-e.time})},i=function(){var t,e,n,i,r,o,u,l;if(l=1<=arguments.length?a.call(arguments,0):[],t=null!=(r=window.performance)&&"function"==typeof r.getEntries?r.getEntries():void 0){for(u=[],n=0,i=t.length;n<i;n++)e=t[n],o=e.initiatorType,s.call(l,o)>=0&&u.push(e);return u}return[]},e=function(t){var e,n;return n=t.split("/"),e=n[n.length-1],e.length>20&&(e=e.slice(0,10)+"\u2026"+e.slice(-10)),e},t=function(t){var e,n,i,r,o,a,s;for(e={},n=0,i=t.length;n<i;n++)o=t[n],s=o.time,a=o.resource,r=o.marker,null==a&&(a="window"),e[s+"ms"]={marker:r,resource:a};return e})}.call(this),function(){var t;t=!1,document.addEventListener("DOMContentLoaded",function(){return t=!0}),BC.ready=function(e){return null==e?t:t?e():document.addEventListener("DOMContentLoaded",e)}}.call(this),function(){BC.LETTER_PATTERN=/[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,BC.NUMBER_PATTERN=/[\u0030-\u0039\u00B2\u00B3\u00B9\u00BC-\u00BE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D66-\u0D75\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]/,BC.PUNCTUATION_PATTERN=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,BC.EMOJI_PATTERN=/(?:(?:[\#\*0-9](?:\uFE0F\u20E3))|(?:[\u261D\u26D1\u26F7\u270A-\u270D](?:\uD83C[\uDFFB-\uDFFF])?)|(?:\u25EF(?:\u200D(?:\u25EF(?:\u200D(?:\u25EF(?:\u200D(?:\u25EF(?:\u200D\u25EF))))))))|(?:\u263F\uFE0F)|(?:\u26F9(?:(?:\uD83C(?:[\uDFFB-\uDFFF](?:\u200D(?:[\u2640\u2642]\uFE0F))?))|(?:\uFE0F(?:\u200D(?:[\u2640\u2642]\uFE0F))))?)|(?:\uD83C(?:(?:[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?)|(?:[\uDFC3\uDFC4\uDFCA](?:(?:\u200D(?:[\u2640\u2642]\uFE0F))|(?:\uD83C(?:[\uDFFB-\uDFFF](?:\u200D(?:[\u2640\u2642]\uFE0F))?)))?)|(?:[\uDFCB\uDFCC](?:(?:\uD83C(?:[\uDFFB-\uDFFF](?:\u200D(?:[\u2640\u2642]\uFE0F))?))|(?:\uFE0F(?:\u200D(?:[\u2640\u2642]\uFE0F))))?)|(?:\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])?)|(?:\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])?)|(?:\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])?)|(?:\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])?)|(?:\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])?)|(?:\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])?)|(?:\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])?)|(?:\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])?)|(?:\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])?)|(?:\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])?)|(?:\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])?)|(?:\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])?)|(?:\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])?)|(?:\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])?)|(?:\uDDF4(?:\uD83C\uDDF2)?)|(?:\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])?)|(?:\uDDF6(?:\uD83C\uDDE6)?)|(?:\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])?)|(?:\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])?)|(?:\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])?)|(?:\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])?)|(?:\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])?)|(?:\uDDFC(?:\uD83C[\uDDEB\uDDF8])?)|(?:\uDDFD(?:\uD83C\uDDF0)?)|(?:\uDDFE(?:\uD83C[\uDDEA\uDDF9])?)|(?:\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])?)|(?:\uDFF3(?:\uFE0F(?:\u200D(?:\uD83C\uDF08)))?)|(?:\uDFF4(?:(?:\u200D(?:\u2620\uFE0F))|(?:\uDB40(?:\uDC67(?:\uDB40(?:\uDC62(?:\uDB40(?:(?:\uDC65(?:\uDB40(?:\uDC6E(?:\uDB40(?:\uDC67(?:\uDB40\uDC7F))))))|(?:\uDC73(?:\uDB40(?:\uDC63(?:\uDB40(?:\uDC74(?:\uDB40\uDC7F))))))|(?:\uDC77(?:\uDB40(?:\uDC6C(?:\uDB40(?:\uDC73(?:\uDB40\uDC7F)))))))))))))?)|[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF84\uDF86-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCD-\uDFF0\uDFF5\uDFF7-\uDFFF]))|(?:\uD83D(?:(?:[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6A-\uDC6D\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?)|(?:[\uDC68\uDC69](?:(?:\u200D(?:(?:[\u2695\u2696\u2708]\uFE0F)|(?:\u2764(?:\uFE0F(?:\u200D(?:\uD83D(?:(?:[\uDC68\uDC69](?:\uD83C[\uDFFB-\uDFFF])?)|(?:\uDC8B(?:\u200D(?:\uD83D(?:[\uDC68\uDC69](?:\uD83C[\uDFFB-\uDFFF])?)))))))))|(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED])|(?:\uD83D(?:(?:[\uDC66\uDC67\uDC76](?:\u200D(?:\uD83D[\uDC66\uDC67\uDC76]))?)|(?:[\uDC68\uDC69](?:\u200D(?:\uD83D(?:[\uDC66\uDC67\uDC76](?:\u200D(?:\uD83D[\uDC66\uDC67\uDC76]))?))))|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))))|(?:\uD83C(?:[\uDFFB-\uDFFF](?:\u200D(?:(?:[\u2695\u2696\u2708]\uFE0F)|(?:\u2764(?:\uFE0F(?:\u200D(?:\uD83D(?:(?:[\uDC68\uDC69](?:\uD83C[\uDFFB-\uDFFF])?)|(?:\uDC8B(?:\u200D(?:\uD83D(?:[\uDC68\uDC69](?:\uD83C[\uDFFB-\uDFFF])?)))))))))|(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED])|(?:\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])))?)))?)|(?:[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6](?:(?:\u200D(?:[\u2640\u2642]\uFE0F))|(?:\uD83C(?:[\uDFFB-\uDFFF](?:\u200D(?:[\u2640\u2642]\uFE0F))?)))?)|(?:\uDC31(?:\u200D(?:(?:\uD83C\uDFCD)|(?:\uD83D[\uDC09\uDC53\uDC64\uDCBB\uDE80])))?)|(?:\uDC41(?:\uFE0F(?:\u200D(?:\uD83D(?:\uDDE8\uFE0F))))?)|(?:\uDD75(?:(?:\uD83C(?:[\uDFFB-\uDFFF](?:\u200D(?:[\u2640\u2642]\uFE0F))?))|(?:\uFE0F(?:\u200D(?:[\u2640\u2642]\uFE0F))))?)|[\uDC00-\uDC30\uDC32-\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDECB\uDECD-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]))|(?:\uD83E(?:(?:[\uDD18-\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5](?:\uD83C[\uDFFB-\uDFFF])?)|(?:[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDD](?:(?:\u200D(?:[\u2640\u2642]\uFE0F))|(?:\uD83C(?:[\uDFFB-\uDFFF](?:\u200D(?:[\u2640\u2642]\uFE0F))?)))?)|(?:[\uDDDE\uDDDF](?:\u200D(?:[\u2640\u2642]\uFE0F))?)|[\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3B\uDD40-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0\uDDE0-\uDDE6]))|(?:\uDB40[\uDC30-\uDC39\uDC61-\uDC7A\uDC7F])|[\u00A9\u00AE\u200D\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F8\u26FA\u26FD\u2702\u2705\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299\uE50A\uFE0F])/g,BC.EMOJI_SKIN_TONE_PATTERN=/(?:\uD83C[\uDFFB-\uDFFF])/g}.call(this),function(){var t,e,n,i,r=function(t,e){return function(){return t.apply(e,arguments)}},o=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},a=[].slice;this.SelectorObserver=function(){function i(){this.mutationObserver=new t(document.documentElement,this),this.definitionsBySelector=new e,this.definitionsByElement=new WeakMap}return i.prototype.observe=function(t,e){return"function"==typeof e&&(e={selectorMatched:e}),this.definitionsBySelector.add(t,e),n(function(n){return function(){var i,r,o,a,s,u;for(s=document.querySelectorAll(t),u=[],o=0,a=s.length;o<a;o++)r=s[o],i=n.getDefinitionsForElement(r),i.has(e)?u.push(void 0):(i.add(e),u.push("function"==typeof e.selectorMatched?e.selectorMatched(r):void 0));return u}}(this))},i.prototype.matchElement=function(t){return this.definitionsBySelector.matches(t)},i.prototype.findMatchingElementsInTree=function(t){return this.definitionsBySelector.findMatchingElementsInTree(t)},i.prototype.elementAttached=function(t){var e;return e=this.getDefinitionsForElement(t),this.definitionsBySelector.matchEachSelector(t,function(n,i,r){var o;if(o=e.has(i),r&&!o)return e.add(i),"function"==typeof i.selectorMatched?i.selectorMatched(t):void 0})},i.prototype.elementAttributeChanged=function(t){var e;return e=this.getDefinitionsForElement(t),this.definitionsBySelector.matchEachSelector(t,function(n,i,r){var o;return o=e.has(i),r&&!o?(e.add(i),"function"==typeof i.selectorMatched?i.selectorMatched(t):void 0):o&&!r?(e["delete"](i),"function"==typeof i.selectorUnmatched?i.selectorUnmatched(t):void 0):void 0})},i.prototype.elementDetached=function(t){var e;return e=this.getDefinitionsForElement(t),e.forEach(function(n){return e["delete"](n),"function"==typeof n.selectorUnmatched?n.selectorUnmatched(t):void 0})},i.prototype.getDefinitionsForElement=function(t){var e;return(e=this.definitionsByElement.get(t))||this.definitionsByElement.set(t,e=new Set),e},i}(),t=function(){function t(t,e){this.element=t,this.definition=e,this.processableNodeFilter=r(this.processableNodeFilter,this),this.processMutations=r(this.processMutations,this),this.elements=new Set,this.observer=new window.MutationObserver(this.processMutations),this.observer.observe(this.element,{attributes:!0,childList:!0,subtree:!0})}return t.prototype.processMutations=function(t){var e,n,i,r,o,a;for(a=[],e=0,n=t.length;e<n;e++)switch(i=t[e],i.type){case"attributes":a.push(this.processAttributeChange(i.target,i.attributeName));break;case"childList":(null!=(r=i.removedNodes)?r.length:void 0)&&this.processRemovedNodes(i.removedNodes),(null!=(o=i.addedNodes)?o.length:void 0)?a.push(this.processAddedNodes(i.addedNodes)):a.push(void 0);break;default:a.push(void 0)}return a},t.prototype.processAttributeChange=function(t,e){var n;return this.elements.has(t)?this.nodeIsProcessable(t)?"function"==typeof(n=this.definition).elementAttributeChanged?n.elementAttributeChanged(t,e):void 0:this.removeElement(t):this.nodeIsProcessable(t)?this.addElement(t):void 0},t.prototype.processRemovedNodes=function(t){var e,n,i,r;for(r=[],e=0,n=t.length;e<n;e++)i=t[e],r.push(this.forEachProcessableElementInTree(i,this.removeElement));return r},t.prototype.processAddedNodes=function(t){var e,n,i,r;for(r=[],e=0,n=t.length;e<n;e++)i=t[e],r.push(this.forEachProcessableElementInTree(i,this.addElement));return r},t.prototype.nodeIsProcessable=function(t){var e;return t.nodeType===Node.ELEMENT_NODE&&("function"==typeof(e=this.definition).matchElement?e.matchElement(t):void 0)},t.prototype.processableNodeFilter=function(t){return this.nodeIsProcessable(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP},t.prototype.forEachProcessableElementInTree=function(t,e){var n,i,r,o,a;for(o=this.findProcessableElementsInTree(t),a=[],i=0,r=o.length;i<r;i++)n=o[i],a.push(e.call(this,n));return a},t.prototype.findProcessableElementsInTree=function(t){var e;return null!=(e=this.findProcessableElementsInTreeUsingDefinition(t))?e:this.findProcessableElementsInTreeUsingNodeIterator(t)},t.prototype.findProcessableElementsInTreeUsingDefinition=function(t){var e;return"function"==typeof(e=this.definition).findMatchingElementsInTree?e.findMatchingElementsInTree(t):void 0},t.prototype.findProcessableElementsInTreeUsingNodeIterator=function(t){var e,n,i;if(n=[],t.nodeType!==Node.ELEMENT_NODE)return n;for(this.nodeIsProcessable(t)&&n.push(t),i=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT,this.processableNodeFilter,!1);e=i.nextNode();)n.push(e);return n},t.prototype.addElement=function(t){var e;if(!this.elements.has(t))return this.elements.add(t),"function"==typeof(e=this.definition).elementAttached?e.elementAttached(t):void 0},t.prototype.removeElement=function(t){var e;if(this.elements.has(t))return this.elements["delete"](t),"function"==typeof(e=this.definition).elementDetached?e.elementDetached(t):void 0},t}(),e=function(){function t(){this.values={},this.compositeSelector=null}return t.prototype.add=function(t,e){var n,i;return i=null!=(n=this.values[t])?n:[],null!=e&&o.call(i,e)<0&&(this.values[t]=i.concat(e)),this.compositeSelector=null,e},t.prototype.remove=function(t,e){var n,i;return null!=e&&(i=function(){var i,r,o,a,s;for(a=null!=(o=this.values[t])?o:[],s=[],i=0,r=a.length;i<r;i++)(n=a[i])!==e&&s.push(n);return s}.call(this)),this.values[t]=i,this.compositeSelector=null,e},t.prototype.get=function(t){var e;return null!=(e=this.values[t])?e:[]},t.prototype.matchEachSelector=function(t,e){var n,r,o,a,s,u;r=this.values,o=[];for(a in r)u=r[a],n=i(t,a),o.push(function(){var t,i,r;for(r=[],t=0,i=u.length;t<i;t++)s=u[t],r.push(e(a,s,n));return r}());return o},t.prototype.matches=function(t){return i(t,this.getCompositeSelector())},t.prototype.findMatchingChildrenOfElement=function(t){var e
;return a.call(null!=(e=null!=t&&"function"==typeof t.querySelectorAll?t.querySelectorAll(this.getCompositeSelector()):void 0)?e:[])},t.prototype.findMatchingElementsInTree=function(t){var e;return e=[],this.matches(t)&&e.push(t),e.concat(this.findMatchingChildrenOfElement(t))},t.prototype.getCompositeSelector=function(){return null!=this.compositeSelector?this.compositeSelector:this.compositeSelector=Object.keys(this.values).join(", ")},t}(),i=function(){var t,e,n,i,r,o;return t=document.documentElement,e=null!=(n=null!=(i=null!=(r=null!=(o=t.matches)?o:t.matchesSelector)?r:t.webkitMatchesSelector)?i:t.mozMatchesSelector)?n:t.msMatchesSelector,function(t,n){if((null!=t?t.nodeType:void 0)===Node.ELEMENT_NODE)return e.call(t,n)}}(),n=function(){var t;return t=[],document.addEventListener("DOMContentLoaded",function(){var e,n;for(n=[];e=t.shift();)n.push(e());return n},!1),function(e){return"loading"===document.readyState?t.push(e):requestAnimationFrame(e)}}()}.call(this),function(){BC.selectorObserver=new SelectorObserver,BC.observe=function(t,e){return BC.selectorObserver.observe(t,e)}}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};BC.observe("form[data-behavior~=remote_form_validation]",function(e){return new t(e)}),t=function(){function t(t){this.onSubmit=e(this.onSubmit,this),this.onInput=e(this.onInput,this),this.$form=$(t),this.inputs={},this.setInputs(),this.installEventHandlers()}return t.prototype.setInputs=function(){var t,e,n,i,r;for(i=this.$form.find("[data-validation-name]"),r=[],t=0,n=i.length;t<n;t++)e=i[t],r.push(this.inputs[e.dataset.validationName]=e);return r},t.prototype.installEventHandlers=function(){return this.$form.on("input",this.onInput),this.$form.on("submit",this.onSubmit)},t.prototype.onInput=function(t){return this.resetElement(t.target)},t.prototype.onSubmit=function(t){var e;return t.preventDefault(),e=this.$form.find(":submit"),e.prop("disabled",!0),this.validate(function(t){return function(n){return n?t.$form[0].submit():e.prop("disabled",!1)}}(this))},t.prototype.invalidateElement=function(t,e){return $(t).addClass("error"),$(t).closest("div").find("[data-role~=error_message]").text(e)},t.prototype.resetElement=function(t){return $(t).removeClass("error"),$(t).closest("div").find("[data-role~=error_message]").empty()},t.prototype.validate=function(t){return this.validateRequiredInputs()?this.performValidationRequest(function(e){return function(n){var i,r,o,a,s;a=e.inputs;for(o in a)i=a[o],(r=null!=(s=n[o])?s[0]:void 0)&&e.invalidateElement(i,r);return t(e.isValid())}}(this)):t(!1)},t.prototype.validateRequiredInputs=function(){var t,e,n,i;for(n=this.$form.find("[required]"),t=0,e=n.length;t<e;t++)if(i=n[t],!i.value.trim())return!1;return!0},t.prototype.performValidationRequest=function(t){return $.post(this.$form.data("validation-url"),this.$form.serialize(),function(e){return t(e.errors)})},t.prototype.isValid=function(){return 0===this.$form.find(".error").length},t}()}.call(this),function(){var t,e,n,i,r;BC.fetch=function(o,a){var s,u,l,c,d,h,p,f,m,g;return null==a&&(a={}),s=null!=(d=a.contentType)?d:n(a.body),g=null!=(h=a.as)?h:"text",l={credentials:null!=(p=a.credentials)?p:"same-origin",method:null!=(f=a.method)?f:"get",headers:c=BC.copyObject(null!=(m=a.headers)?m:{}),body:null!=a.body?a.body:void 0},c["X-Requested-With"]="XMLHttpRequest",c["X-CSRF-Token"]=BC.getAuthenticityToken(),null!=s&&(c["Content-Type"]=s),"json"!==g&&"application/json"!==s||null==c.Accept&&(c.Accept="application/json"),i(l.method)?(c["X-Fetch-Type"]="polyfill-forced",u=window.fetchPolyfill):(c["X-Fetch-Type"]=e()?"native":"polyfill",u=window.fetch),u(o,l).then(t).then(r(g))},i=function(t){var n;return null==t&&(t=""),e()&&/Windows.*Edge/.test(navigator.userAgent)&&("put"===(n=t.toLowerCase())||"patch"===n)},e=function(){return window.fetch!==window.fetchPolyfill},n=function(t){return null==t||t instanceof FormData?null:t instanceof File?t.type:"application/octet-stream"},t=function(t){var e,n,i;if(200<=(i=t.status)&&i<300)return t;if(401===t.status&&(e=t.getResponseHeader("WWW-Authenticate")))return window.location.replace(e);throw n=new Error(t.statusText),n.response=t,n},r=function(t){return function(e){switch(t){case"blob":return e.blob();case"json":return e.json();case"text":return e.text()}}},BC.xhr=function(t,e){var n,i,r;return null==e&&(e={}),r=new XMLHttpRequest,n=null!=(i=e.method)?i:"get",r.open(n,t,!0),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("X-CSRF-Token",BC.getAuthenticityToken()),null!=e.contentType&&r.setRequestHeader("Content-Type",e.contentType),r},BC.getAuthenticityToken=function(){var t;return null!=(t=document.querySelector("meta[name=csrf-token]"))?t.getAttribute("content"):void 0}}.call(this),function(){BC.onScroll=function(t){var e,n,i,r;return i=_.throttle(t,200),e=function(){return requestAnimationFrame(i)},n=function(){return window.addEventListener("scroll",e),document.addEventListener("bc-infinite-page:scroll",e)},r=function(){return window.removeEventListener("scroll",e),document.removeEventListener("bc-infinite-page:scroll",e)},n(),r}}.call(this),function(){var t,e;t={noooo:"https://3.basecamp-static.com/assets/noooo-6e1f39fae9f114a833693c4ca834db2798e0a30747de0e39cf13cc2f455f2161.mp3",bell:"https://3.basecamp-static.com/assets/bell-7c8550761c6cb873349695ae867ecd83d413e4b8f12e251d2ae2847f2b86a008.mp3",what:"https://3.basecamp-static.com/assets/what-70d0314adcdda431e77438a0a8c37ad499995a189041116a45c40c651d880c77.mp3",dadgummit:"https://3.basecamp-static.com/assets/dadgummit-f395704d78a4993c663a804b6ef9c78e4617ce50090027b7e6560dd8fa595058.mp3",rumble:"https://3.basecamp-static.com/assets/rumble-de7b7ba90f6dab34b390f4c45157f1f3c45ba3ae5a9eb82c63f7d35f16d93748.mp3",unix:"https://3.basecamp-static.com/assets/unix-d6a7a853919aacc1df65006f584666f3c0041b27cdde89f23b5e6ec523b22f84.mp3",ohmy:"https://3.basecamp-static.com/assets/ohmy-b48a4227f83e299d47f23de14ae9dcfab10f3868158ecaae7c2c486c1a22a25d.mp3",tmyk:"https://3.basecamp-static.com/assets/tmyk-85cab9b9d9ef6cf98b2b96bef1d41b05b75835ea8e05882a2a5d2beac5eb5e4c.mp3",danielsan:"https://3.basecamp-static.com/assets/danielsan-5e4224f7f222dfd4337b9e2082d50e47370c0b004286a2e83fe45707920c5c89.mp3",tada:"https://3.basecamp-static.com/assets/tada-024dfccb5565600d705b71833ebcc2fdc1a7eae16c2f93f025e962bc6fdd5296.mp3",clowntown:"https://3.basecamp-static.com/assets/clowntown-2d84d7c88069002d4d7b433642210be924c47bb5d29959cd35511f1823d2b58a.mp3",yeah:"https://3.basecamp-static.com/assets/yeah-8a29c1ed07c7d89e7ca39c3d433e320f05e53d0400225c7e89ac3043e1d32080.mp3",live:"https://3.basecamp-static.com/assets/live-0327b6f155ab3a1cf3f63957d3ddfbcc9c77e8ed1816396381f985819e007943.mp3",inconceivable:"https://3.basecamp-static.com/assets/inconceivable-3a804cb5fe4733b8512c010019c5abd64c63061aaf71b5af38662ef2da40ee63.mp3",incoming:"https://3.basecamp-static.com/assets/incoming-dccedadaf8224d590ad042df660539981e9860a026d0ba132410be64edaafbe5.mp3",crickets:"https://3.basecamp-static.com/assets/crickets-2f379f2ef93dc63cda6c1eecaa98b79b9e42865eb0a4251bccc4169c11060c37.mp3",yay:"https://3.basecamp-static.com/assets/yay-e575442d89c9d6d62009ace006e6611c5cba9a15b070150b42403e3a32091dde.mp3",bueller:"https://3.basecamp-static.com/assets/bueller-08f7ba7bba6767ea1d828a75a7c56e3a574a03404828dbba0a24b74849790d23.mp3",donotwant:"https://3.basecamp-static.com/assets/donotwant-3eebc23941a143a861b850a20904db15bececc2e831e23ca3027930e9b3fab7e.mp3",ohyeah:"https://3.basecamp-static.com/assets/ohyeah-e497c03543888b5075d3f0e832acc1d3339549a87634987b21197eac44850f48.mp3",nyan:"https://3.basecamp-static.com/assets/nyan-02d346d5d2cb916d5a079c9373fce801ec66df53a2566a7a4cc9bb77222575ae.mp3",sexyback:"https://3.basecamp-static.com/assets/sexyback-9053f17be9987435b010e51425614d2493bc2e97756872d785e1e84bc0ada70a.mp3",greyjoy:"https://3.basecamp-static.com/assets/greyjoy-293ecfe4d2eaf11071e499c42baeb841ab41238543ceac833b2e694602a964d8.mp3",heygirl:"https://3.basecamp-static.com/assets/heygirl-4f3c96e80a64635fd12a928b193d3421b2f599e679549982e1e640503ff1acc4.mp3",trololo:"https://3.basecamp-static.com/assets/trololo-6aec372c8726b15a221290416d8335ce2d96994a8dba22fe5c9d0dfeec18624e.mp3",maybe:"https://3.basecamp-static.com/assets/maybe-808b84786456750db64fc6dfa5406e964765ad98dbce6f3652825f604ac32afc.mp3",trombone:"https://3.basecamp-static.com/assets/trombone-448b61c1cbbe212d6ee74927f976d51cff7e849eadc88cf115c9cb31eb49fc54.mp3",drama:"https://3.basecamp-static.com/assets/drama-5aebe10e318f84fa67c5edd3fc74332bbaa8ed9a7266076f091d51700923578e.mp3",dangerzone:"https://3.basecamp-static.com/assets/dangerzone-138e8e4ecd9542bdadf35b991ad17d864bea2ac14ed50652445570f9e61598fe.mp3",curb:"https://3.basecamp-static.com/assets/curb-e34d44e82c04467c5bbcf969303d469594336d3d09966a3c90906b43fc88eb8b.mp3",letitgo:"https://3.basecamp-static.com/assets/letitgo-524deb42d6d80d79a30098b572aef65f765a7f48442c77dcaa846ab73f64943f.mp3",story:"https://3.basecamp-static.com/assets/story-705b0ce43b8d801fb1fd6577a2d7e15b2d03ae2834a70690556a28b89a9d4e73.mp3",whoomp:"https://3.basecamp-static.com/assets/whoomp-5443c723ebd42623fbda85ff2a1201e0d39e8a9b2ff07f9a101e12cad641b3e6.mp3",deeper:"https://3.basecamp-static.com/assets/deeper-8755e725ca06ccc15c46487529cd228efa69442bd46dd34484f355204c63b031.mp3",vuvuzela:"https://3.basecamp-static.com/assets/vuvuzela-4250e803d192637d77eaafa0995dac8b6f95f5f4577a8f87b08aa02553820b68.mp3","56k":"https://3.basecamp-static.com/assets/56k-2de12caf37f95c65ce8df06866aa4c232c25afccfbf91652278e0923cb2134b9.mp3",pushit:"https://3.basecamp-static.com/assets/pushit-1e099a266dbf628eaddd3dad759273299debcee16479d8d7f2560a685abbcc32.mp3",secret:"https://3.basecamp-static.com/assets/secret-c2b31e22f7aac1dca492c18e68ddd4653167409f69246f293c274acc3545a704.mp3",loggins:"https://3.basecamp-static.com/assets/loggins-e5d32f93cd61c8fac1d8f120739f9c7901d583d983fc57be3506386bd306a01f.mp3",totes:"https://3.basecamp-static.com/assets/totes-8548005a21f26256c9c0b8cfb30be760f97c1d1fb8e1a9b28d689a14ff52734b.mp3",makeitso:"https://3.basecamp-static.com/assets/makeitso-cf19ccb00ba766e995f7898463aae39de3080007c1bf41eb70db55054d945c24.mp3",flawless:"https://3.basecamp-static.com/assets/flawless-393eb8b87bbf3aaf3a6572473d6fc180d8195300df9edb6ae513830e9226cb41.mp3",yodel:"https://3.basecamp-static.com/assets/yodel-15800809e4000bbcc066e4e00e27c39f339dc82e282b00e4c4e67747eed0fc2b.mp3",cottoneyejoe:"https://3.basecamp-static.com/assets/cottoneyejoe-d114b14c535c6832c2eca3e6692a234e673eaa1ceaf291f1a6f2714e60aa0b29.mp3",sax:"https://3.basecamp-static.com/assets/sax-9ee2c08c05d265f608f883ee214b0049ff0ec962c0db95e53f1467737d517765.mp3",ballmer:"https://3.basecamp-static.com/assets/ballmer-68907c927ec32cc71b599409376a270722d996fbb999bd6e65eec4d3d4089790.mp3",bezos:"https://3.basecamp-static.com/assets/bezos-097ccaababcd186ff25310dfbf5c0082f763336173a2e3b0daaf4faaaa9e1019.mp3",greatjob:"https://3.basecamp-static.com/assets/greatjob-0f24d85a0f9e9afb134fcc37554f3160ad1709914cf834b1a9c4590c8e45514a.mp3",rollout:"https://3.basecamp-static.com/assets/rollout-3277678e301cac225d382513cc04a8c9075f1d85dbd95e47816b0f39af35357c.mp3",horn:"https://3.basecamp-static.com/assets/horn-f52d01a31b71995ff0f256e028fd9302981d0d894651ac444f5d5740f62e9bf6.mp3",rimshot:"https://3.basecamp-static.com/assets/rimshot-3dfc708d49dfa2444a61dc178fa1eed482f147b028c67d0d8f94ba10e5ea2bbf.mp3",mario_coin:"https://3.basecamp-static.com/assets/mario_coin-0b262afe097bc5626071d8e0b82724f82f6f8f9ef523299202f0a6c0dafe67ee.mp3",butts:"https://3.basecamp-static.com/assets/butts-daed8306dc2518de5a3a5603bc2eb81e0dc79796f744f1fdc6593ba48eaffb29.mp3",wups:"https://3.basecamp-static.com/assets/wups-89c0d03e84b245465b5cd9d38795de988736184e102e3a312a07f4f5e870b409.mp3",horror:"https://3.basecamp-static.com/assets/horror-906da599cc429904fbbaf9808ce6b2dca0e17467326e87b56f5525deb99c32cf.mp3",guarantee:"https://3.basecamp-static.com/assets/guarantee-463cbe6053bf36f41fc7fc15feee3400270185a9602b5be5efe21820b2b65a4c.mp3"},e={},BC.playSound=function(t){return null==e[t]&&(e[t]=new Audio(t)),e[t].play()},BC.playSoundAsset=function(e){return BC.playSound(t[e])}}.call(this),function(){BC.camelize=function(t){var e;return e=document.createElement("span"),e.setAttribute("data-"+t,""),Object.keys(e.dataset)[0]},BC.dasherize=function(t){var e,n;return e=document.createElement("span"),e.dataset[t]="",null!=(n=e.attributes[0])?n.name.slice(5):void 0},BC.regexpEscape=function(t){return t.toString().replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},BC.stringIsEntirelyEmoji=function(t){var e;return!(null==t||!t.trim())&&(e=t.replace(BC.EMOJI_PATTERN,""),!e.match(/\S/))}}.call(this),function(){BC.TEMPLATE_BASE_DATE=CalendarDate.parse("1978-01-01")}.call(this),function(){BC.displayingTurbolinksPreview=function(){return null!=document.documentElement.dataset.turbolinksPreview}}.call(this),function(){var t,e;BC.getQueryParams=function(){var t,e,n,i,r,o,a,s,u;if(r={},o=location.toString().split("?")[1])for(a=o.split("&"),t=0,n=a.length;t<n;t++)i=a[t],s=i.split("="),e=s[0],u=s[1],r[e]=decodeURIComponent(u);return r},BC.formatURL=function(e,n){return null==n&&(n={}),t(BC.formatPath(e,n))},BC.formatPath=function(t,e){var n;return null==e&&(e={}),n=$.param(e),n.length&&(n=/\?/.test(t)?"&"+n:"?"+n),""+t+n},BC.accountPath=function(t,n){return null==n&&(n={}),e(t,BC.current.account.slugPath,n)},BC.bucketPath=function(t,n){return null==n&&(n={}),e(t,BC.current.bucket.path,n)},e=function(t,e,n){if(null==t&&(t=""),null==n&&(n={}),null!=e)return t.slice(0,e.length)!==e&&(t=e+t),BC.formatPath(t,n)},t=function(t){var e;return e=document.createElement("a"),e.setAttribute("href",t),e.href}}.call(this),function(){var t,e,n,i,r;BC.UTF16String=function(){function t(t,e){this.ucs2String=t,this.codepoints=e,this.length=this.codepoints.length,this.ucs2Length=this.ucs2String.length}return t.box=function(t){return null==t&&(t=""),t instanceof this?t:this.fromUCS2String(null!=t?t.toString():void 0)},t.fromUCS2String=function(t){return new this(t,i(t))},t.fromCodepoints=function(t){return new this(r(t),t)},t.prototype.offsetToUCS2Offset=function(t){return r(this.codepoints.slice(0,Math.max(0,t))).length},t.prototype.offsetFromUCS2Offset=function(t){return i(this.ucs2String.slice(0,Math.max(0,t))).length},t.prototype.slice=function(){var t;return this.constructor.fromCodepoints((t=this.codepoints).slice.apply(t,arguments))},t.prototype.charAt=function(t){return this.slice(t,t+1)},t.prototype.isEqualTo=function(t){return this.constructor.box(t).ucs2String===this.ucs2String},t.prototype.toJSON=function(){return this.ucs2String},t.prototype.getCacheKey=function(){return this.ucs2String},t.prototype.toString=function(){return this.ucs2String},t}(),t=1===("function"==typeof Array.from?Array.from("\ud83d\udc7c").length:void 0),e=null!=("function"==typeof" ".codePointAt?" ".codePointAt(0):void 0),n=" \ud83d\udc7c"===("function"==typeof String.fromCodePoint?String.fromCodePoint(32,128124):void 0),i=t&&e?function(t){return Array.from(t).map(function(t){return t.codePointAt(0)})}:function(t){var e,n,i,r,o;for(r=[],e=0,i=t.length;e<i;)o=t.charCodeAt(e++),55296<=o&&o<=56319&&e<i&&(n=t.charCodeAt(e++),56320==(64512&n)?o=((1023&o)<<10)+(1023&n)+65536:e--),r.push(o);return r},r=n?function(t){return String.fromCodePoint.apply(String,t)}:function(t){var e,n,i;return e=function(){var e,r,o;for(o=[],e=0,r=t.length;e<r;e++)i=t[e],n="",i>65535&&(i-=65536,n+=String.fromCharCode(i>>>10&1023|55296),i=56320|1023&i),o.push(n+String.fromCharCode(i));return o}(),e.join("")}}.call(this),function(){BC.generateUUID=function(){var t;return t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",t.replace(/[xy]/g,function(t){var e,n;return e=16*Math.random()|0,n="x"===t?e:3&e|8,n.toString(16)})}}.call(this),function(){}.call(this),function(){window.Beanstalk={enablePageviewTracking:!0,enablePresenceTracking:!1,enableRUMTiming:!0,generatePageviewIds:!0,debug:!1,presenceGranularity:60,dev:location.host.match(/.*?\.dev/),uuid:null,_local_uuid:null,local_uuid:function(){var t,e;return null!=Beanstalk._local_uuid?Beanstalk._local_uuid:(Beanstalk._local_uuid=jQuery.cookie("_beanstalk_uuid"),null==Beanstalk._local_uuid&&(Beanstalk._local_uuid=(Beanstalk.S4()+Beanstalk.S4()+"-"+Beanstalk.S4()+"-4"+Beanstalk.S4().substr(0,3)+"-"+Beanstalk.S4()+"-"+Beanstalk.S4()+Beanstalk.S4()+Beanstalk.S4()).toLowerCase()),e=window.location.hostname.split("."),t="."+window.location.hostname,e.length>2&&(t="."+e.slice(1,e.length).join(".")),jQuery.cookie("_beanstalk_uuid",Beanstalk._local_uuid,{expires:90,path:"/",domain:t}),Beanstalk._local_uuid)},site_id:null,requests:[],resource_timing:[],pageview_timing:{},pageview:{},beaconURL:function(){var t;return t=Beanstalk.dev?"dash.dev":"dash.37signals.com",window.location.protocol+"//"+t+"/basecamp.gif?"},S4:function(){return(65536*(1+Math.random())|0).toString(16).substring(1)}}}.call(this),function(){Beanstalk.beacon={params:[],enabled:!0,autosend:!0,sendBeaconEnabled:!0,log:function(t){var e,n,i;n=[];for(e in t)i=t[e],n.push(Beanstalk.beacon.params.push([e,i]));return n},send:function(){var t,e,n,i,r,o,a,s,u;if(Beanstalk.debug&&console.log(JSON.stringify(Beanstalk.beacon.params)),Beanstalk.beacon.enabled){r={},o=Beanstalk.beacon.params;for(i in o)"function"!=typeof(u=o[i])&&("undefined"==typeof r[u[0]]?r[u[0]]=u[1]:"[object Array]"===Object.prototype.toString.call(r[u[0]])?r[u[0]].push(u[1]):r[u[0]]=[r[u[0]],u[1]]);if(Object.keys(r).length)if(Beanstalk.site_id&&(r.site_id=Beanstalk.site_id),Beanstalk.uuid&&(r.uuid=Beanstalk.uuid),r.local_uuid=Beanstalk.local_uuid(),void 0!==navigator.sendBeacon&&Beanstalk.beacon.sendBeaconEnabled){t=new FormData;for(n in r)s=r[n],t.append(n,s);Beanstalk.beacon.sendBeaconEnabled=navigator.sendBeacon(Beanstalk.beaconURL(),t)}else if(JSON.stringify(r).length<4096){a=Beanstalk.beaconURL();for(n in r)s=r[n],a+="&"+n+"="+encodeURIComponent(s);e=new Image,e.src=a,e.onerror=function(){if(Beanstalk.dev)return Beanstalk.beacon.enabled=!1,console.warn("disabling instrumentation beacon")}}else{for(n in r)s=r[n],"[object Array]"===Object.prototype.toString.call(s)&&(r[n]=s.join(","));jQuery.ajax({type:"POST",url:Beanstalk.beaconURL(),data:r,error:function(){if(Beanstalk.dev)return Beanstalk.beacon.enabled=!1,console.warn("disabling instrumentation beacon")}})}return Beanstalk.beacon.params=[]}}}}.call(this),function(){Beanstalk.logCohort=function(t,e){return Beanstalk.beacon.log({"cohort[][experiment]":t,"cohort[][group]":e}),Beanstalk.beacon.send()}}.call(this),function(){var t;t=!0,jQuery(document).on("page:restore turbolinks:snapshot-load",function(){return t=!1}),jQuery(document).on("ready page:load turbolinks:load",function(){return t=!0}),Beanstalk.logEvent=function(e,n){if(t)return Beanstalk.beacon.log({"event[][name]":e,"event[][value]":n}),Beanstalk.beacon.params.length?setTimeout(Beanstalk.beacon.send,1e3):Beanstalk.beacon.send}}.call(this),function(){var t,e;Beanstalk.logPageview=function(t){var e;if(Beanstalk.enablePageviewTracking)return null==t&&(t={}),Beanstalk.generatePageviewIds&&(Beanstalk.lastPageviewId=(Beanstalk.S4()+Beanstalk.S4()+"-"+Beanstalk.S4()+"-4"+Beanstalk.S4().substr(0,3)+"-"+Beanstalk.S4()+"-"+Beanstalk.S4()+Beanstalk.S4()+Beanstalk.S4()).toLowerCase(),t["pageview[pageview_id]"]=Beanstalk.lastPageviewId),e={"pageview[host]":document.location.host,"pageview[path]":document.location.pathname,"pageview[query]":document.location.search,"pageview[referrer]":document.referrer,"browser[width]":window.innerWidth||0,"browser[height]":window.innerHeight||0,"browser[pixelRatio]":window.devicePixelRatio||0,"browser[screenWidth]":screen.width,"browser[screenHeight]":screen.height,tz:-(new Date).getTimezoneOffset()/60},t=jQuery.extend(e,t),Beanstalk.beacon.log(t),Beanstalk.pageview=t,Beanstalk.beacon.autosend?setTimeout(Beanstalk.beacon.send,500):setTimeout(Beanstalk.beacon.send,5e3)},e=function(t){var e;return e=!1,"visible"===document.visibilityState?(Beanstalk.logPageview({"pageview[type]":t}),e=!0):document.addEventListener("visibilitychange",function(){if("visible"===document.visibilityState&&!e)return Beanstalk.logPageview({"pageview[type]":t}),e=!0})},t=!0,jQuery(document).on("ready",function(){return t=!1,e("Full page load")}),jQuery(document).on("page:load",function(){if(!t)return e("Turbolinks page load")}),jQuery(document).on("turbolinks:load",function(n){if(!t&&null!=n.originalEvent.data.timing.visitStart)return e(null!=n.originalEvent.data.timing.requestStart?"Turbolinks page load":"Turbolinks cache restore")})}.call(this),function(){Beanstalk.enablePresenceTracking&&setInterval(function(){return Beanstalk.beacon.log({presence:!0}),Beanstalk.beacon.send()},1e3*Beanstalk.presenceGranularity)}.call(this),function(){Beanstalk.logSignup=function(t,e){return Beanstalk.beacon.log({"signup[product]":t,"signup[account_id]":e}),Beanstalk.beacon.send()}}.call(this),function(){var t,e,n,i,r,o,a,s,u,l,c,d,h;void 0===t&&(t={times:{}}),Beanstalk.Timing={times:t.times,mark:function(t,e){return e||(e=(new Date).getTime()),Beanstalk.Timing.times[t]=e},init:function(t){if(void 0!==t)return Beanstalk.Timing.times=t}},i=function(t){return void 0===window.performance||void 0===window.performance.getEntriesByType?[]:window.performance.getEntriesByType(t)},n=function(){if(Beanstalk.requests=[],void 0===window.performance);else{if(void 0!==window.performance.clearResourceTimings)return performance.clearResourceTimings();if(void 0!==window.performance.webkitClearResourceTimings)return performance.webkitClearResourceTimings()}},r=function(){return void 0!==window.performance},d=function(t){return t.match(/page_updates/)||t.match(/calendar_updates/)||t.match(/projects\.js/)||t.match(/stars$/)||t.match(/beacon\.gif/)||t.match(/progress\.js/)||t.match(/stage\.txt/)},l=function(){var t,e;try{if(void 0!==(e=this.responseURL)&&e.match(document.location.hostname))return Beanstalk.requests.push({status:this.status,type:"ajax",x_request_id:this.getResponseHeader("X-Request-Id"),x_runtime:1e3*this.getResponseHeader("X-Runtime"),content_length:this.getResponseHeader("Content-Length")||this.responseText.length,url:e||this.getResponseHeader("X-Request-Path")})}catch(e){if(t=e,Beanstalk.debug)return console.log(t)}},c=function(){var t,n;try{if(void 0!==(n=this.responseURL)&&n.match(document.location.hostname)&&e&&n.split("?")[0]===document.location.origin+document.location.pathname&&"undefined"==typeof h.firstByte)return h.firstByte=new Date}catch(e){if(t=e,Beanstalk.debug)return console.log(t)}},u=XMLHttpRequest.prototype.open,window.XMLHttpRequest.prototype.open=function(){return this.addEventListener("load",l),this.addEventListener("progress",c),u.apply(this,arguments)},a=function(t){var e,n,i,r,o,a,s,u,l;if(Beanstalk.enableRUMTiming)try{for(u={},s=null,a=Beanstalk.requests,n=0,r=a.length;n<r;n++)if(o=a[n],void 0!==o.url&&void 0!==o.url&&o.url.split("?")[0]===document.location.origin+document.location.pathname){s=o;break}s&&(Beanstalk.beacon.log({xrequestid:s.x_request_id}),u["x-runtime"]=s.x_runtime,u.x_request_id=s.x_request_id);for(i in t)"string"!=typeof(l=t[i])&&"number"!=typeof l||(u[i]=l);return Beanstalk.pageview_timing=u,s&&(Beanstalk.pageview_timing.x_request_id=s.x_request_id),Beanstalk.beacon.log({navigationTiming:JSON.stringify(u)}),setTimeout(Beanstalk.beacon.send,500)}catch(t){if(e=t,Beanstalk.debug)return console.log(e)}},s=function(){var t,e,n,r,o,a,s,u,l,c,h,p,f;if(Beanstalk.enableRUMTiming)try{if(h=i("resource"),h.length>0){s=[];for(e in h)if(!d(h[e].name)){for(p={},c=null,u=Beanstalk.requests,n=0,o=u.length;n<o;n++)if(a=u[n],a.url===h[e].name){c=a;break}c&&(p.x_request_id=c.x_request_id,p.status=c.status,p.x_runtime=Math.round(c.x_runtime),p.content_length=c.content_length),l=h[e];for(r in l)"string"!=typeof(f=l[r])&&"number"!=typeof f||(p[r]=f);s.push(p)}return Beanstalk.resource_timing=s,Beanstalk.beacon.log({resourceTiming:JSON.stringify(s)}),setTimeout(Beanstalk.beacon.send,100)}}catch(e){if(t=e,Beanstalk.debug)return console.log(t)}},jQuery(function(){return Beanstalk.Timing.mark("domloaded"),Beanstalk.requests.push({url:document.location.origin+document.location.pathname,x_runtime:1e3*jQuery.cookie("X-Runtime"),x_request_id:jQuery.cookie("X-Request-Id")})}),o=!0,jQuery(window).load(function(){var t,e,n,i,u,l;if(o=!1,r())setTimeout(function(){return a(performance.timing)},100);else{for(Beanstalk.Timing.mark("done"),u={time_to_first_byte:Beanstalk.requests[0].x_runtime,frontend_time:new Date-Beanstalk.Timing.times.firstbyte},n=Beanstalk.Timing.times,l=t=0,e=n.length;t<e;l=++t)i=n[l],u[i]=l;a(u)}return setTimeout(s,200)}),e=!1,h={},jQuery(document).on("page:load turbolinks:load",function(t){var n,r,u,l,c,d,p,f;try{if(!o){for(p={},null!=t.originalEvent.data.timing?p=null!=t.originalEvent.data.timing.requestStart?{time_to_first_byte:t.originalEvent.data.timing.requestEnd-t.originalEvent.data.timing.visitStart,frontend_time:t.originalEvent.data.timing.visitEnd-t.originalEvent.data.timing.requestEnd}:{time_to_first_byte:0,frontend_time:t.originalEvent.data.timing.visitEnd-t.originalEvent.data.timing.visitStart}:("undefined"==typeof h.firstByte&&(h.firstByte=new Date),p={time_to_first_byte:h.firstByte-h.changeStart,frontend_time:new Date-h.firstByte}),d=null,c=i("resource"),n=0,u=c.length;n<u;n++)if(l=c[n],l.name.split("?")[0]===document.location.origin+document.location.pathname){d=l;break}if(d){for(r in d)"number"==typeof(f=d[r])&&"duration"!==r&&f>=d.startTime&&(p[r]=f-d.startTime);p.duration=d.duration,p.x_request_id=d.x_request_id,p["x-runtime"]=d.x_runtime}return Beanstalk.pageview_timing=p,setTimeout(function(){return a(p)},100),setTimeout(s,300),e=!1,h={}}}catch(e){if(t=e,Beanstalk.debug)return console.log(t)}}),jQuery(document).on("page:receive",function(){return h.firstByte=new Date}),jQuery(document).on("page:fetch page:beforechange workspace:visit page:before-change page:before-unload",function(t){if("page:before-change"===t.type||"page:beforechange"===t.type||!e)return n(),h.changeStart=new Date,e=!0})}.call(this),function(){Beanstalk.logLazyLoadReport=function(t){var e;if(t.entries.length)return e={pageview_id:Beanstalk.lastPageviewId,"browser[width]":window.innerWidth||0,"browser[height]":window.innerHeight||0,"browser[pixelRatio]":window.devicePixelRatio||0,"browser[screenWidth]":screen.width,"browser[screenHeight]":screen.height},t=jQuery.extend(e,{lazy_load_report:t}),Beanstalk.beacon.log(t)}}.call(this),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(t){return r.raw?t:decodeURIComponent(t.replace(i," "))}function n(t){0===t.indexOf('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")),t=e(t);try{return r.json?JSON.parse(t):t}catch(t){}}var i=/\+/g,r=t.cookie=function(i,o,a){if(o!==undefined){if(a=t.extend({},r.defaults,a),"number"==typeof a.expires){var s=a.expires,u=a.expires=new Date;u.setDate(u.getDate()+s)}return o=r.json?JSON.stringify(o):String(o),document.cookie=[r.raw?i:encodeURIComponent(i),"=",r.raw?o:encodeURIComponent(o),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}for(var l=document.cookie.split("; "),c=i?undefined:{},d=0,h=l.length;d<h;d++){var p=l[d].split("="),f=e(p.shift()),m=p.join("=");if(i&&i===f){c=n(m);break}i||(c[f]=n(m))}return c};r.defaults={},t.removeCookie=function(e,n){return t.cookie(e)!==undefined&&(t.cookie(e,"",t.extend({},n,{expires:-1})),!0)}}),function(){var t,e;BC.readObjectFromMetaTags=t=function(t,e){var n,i,r,o,a,s,u;for(null==e&&(e=document),s={},a=e.querySelectorAll("meta[name^='"+t+"-']"),i=0,r=a.length;i<r;i++)n=a[i],o=BC.camelize(n.getAttribute("name").slice(t.length+1)),u=n.getAttribute("content"),s[o]=u;return s},e=function(){var e,n;if(null==BC.current&&(BC.current={}),e=null!=(n=BC.current.recording)?n.id:void 0,BC.current.account=t("current-account"),BC.current.bucket=t("current-bucket"),BC.current.dockTool=t("current-dock-tool"),BC.current.person=t("current-person"),BC.current.recording=t("current-recording"),BC.current.page=t("current-page"),BC.current.recording.id!==e)return BC.defer(function(){return BC.triggerEvent(document,"bc:recording-id-change",{recordingId:BC.current.recording.id})})},document.addEventListener("turbolinks:render",e),e()}.call(this),function(){var t;Beanstalk.site_id=1233,Beanstalk.beacon.autosend=!1,BC.current.person&&(Beanstalk.uuid="bc3/"+BC.current.person.id+",qb"+BC.current.account.slugPath),t=!1,BC.on("turbolinks:load","install instrumentation triggers",function(){if(!t&&"playgrounded"===BC.current.bucket.status)return Beanstalk.logEvent("accountFunnel","inPlaygroundProject"),t=!0})}.call(this),function(){BC.env="production"}.call(this),function(){var t,e,n,i,r,o,a,s=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};o="btn--pulse",r="btn--scale-fade-out",i="btn--applausless",e="btn--applauded-by-me",n="applause--applauded",t="applause__applauding--add",a="applause__applauding--remove",BC.registerElement("bc-applause-bar",{attachedCallback:function(){return BC.ready(function(t){return function(){var n;if(t.$element=$(t),t.$toggleButton=t.$element.find("[data-behavior~=toggle_applauding]"),t.$applaudersList=t.$element.find("[data-role=applauders]"),t.$applaudersCount=t.$element.find("[data-role=applauders_count]"),t.$currentApplauder=t.$element.find("[data-avatar-for-person-id="+BC.current.person.id+"]"),t.toggleUrl=t.$toggleButton.attr("data-url"),t.$toggleButton.on("click",function(){return t.toggleApplause()}),t.toggleInProgress=!1,n=parseInt(BC.current.person.id,10),s.call(t.$applaudersList.data("applauder-ids"),n)>=0)return t.$applaudersList.prepend(t.$currentApplauder),t.$toggleButton.addClass(e)}}(this))},toggleApplause:function(){var t;return t=this.$toggleButton.hasClass(e),this.toggleInProgress||(this.toggleInProgress=!0,$.ajax({url:this.toggleUrl,type:t?"DELETE":"PUT"}).done(function(t){return function(){return t.toggleInProgress=!1}}(this)),this.$toggleButton.blur()),!1},addApplauder:function(n){var i;return this.$toggleButton.addClass(e).transitionClass(o),i=$.parseHTML(n),this.$applaudersList.prepend(i),$(i).transitionClass(t),this.updateCount(),BC.playSoundAsset("mario_coin")},removeApplauder:function(t){return this.$toggleButton.removeClass(e),1===this.$applaudersList.find("img").length&&this.$toggleButton.transitionClass(r),$(t).transitionClass(a,function(e){return function(){return $(t).remove(),e.updateCount()}}(this))},updateCount:function(){var t;return(t=this.$applaudersList.find("img").length)?(this.$toggleButton.removeClass(i),this.$element.addClass(n),this.$applaudersCount.text(t)):(this.$toggleButton.addClass(i),this.$element.removeClass(n),this.$applaudersCount.text(""))}}),$(document).on("click","[data-behavior~=reveal_applause]",function(){var t;return t=$(this).parents("article").first().find("[data-role~=applause_container]").slideDown("fast"),t.find("[data-behavior~=toggle_applauding]").click(),!1})}.call(this),function(){BC.registerElement("beanstalk-event",{attachedCallback:function(){if(!("function"==typeof BC.displayingTurbolinksPreview?BC.displayingTurbolinksPreview():void 0))return Beanstalk.logEvent(this.getAttribute("name"),this.getAttribute("value"))}})}.call(this),function(){BC.registerElement("beanstalk-signup",{attachedCallback:function(){if(!("function"==typeof BC.displayingTurbolinksPreview?BC.displayingTurbolinksPreview():void 0))return Beanstalk.logSignup("bc3",this.getAttribute("account_id"))}})}.call(this),function(){BC.registerElement("bc-chat-room",{attachedCallback:function(){return BC.ready(function(t){return function(){return null==t.room&&(t.room=BC.Chat.createRoom(t)),t.room.attached()}}(this))},detachedCallback:function(){return BC.defer(function(t){return function(){var e;if(!document.documentElement.contains(t))return null!=(e=t.room)&&e.detached(),t.room=null}}(this))}})}.call(this),function(){BC.contentFilterConfig={selectors:{input:"[data-behavior~=content_filter_input]",group:"[data-role~=content_filter_group]",element:"[data-role~=content_filterable]",text:"[data-role~=content_filter_text]",hideWhenActive:"[data-behavior~=hide_when_content_filter_active]",hideUnlessMatch:"[data-behavior~=hide_unless_content_filter_match]",showWhenNoMatches:"[data-behavior~=show_when_no_content_filter_matches]"},classNames:{matched:"content-filter__match",selected:"content-filter__selected"}}}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1}
;e=BC.contentFilterConfig.selectors,t=e.element+", "+e.group,BC.ContentFilterElementIndex=function(){function r(t){this.element=t,this.elementDidMutate=n(this.elementDidMutate,this),this.searchStrings=new WeakMap,this.createIndex(),this.installMutationObserver()}var o,a;return r.prototype.getElementsMatchingQuery=function(t){var e,n,i;return n=new Map,e=[],i=(""+t).toLowerCase(),this.index.forEach(function(t,r){var o,a;if(a=t.searchString,o=t.groupElement,a.indexOf(i)>=0)return n.set(r,{groupElement:o}),e.push(r)}),{index:n,elements:e}},r.prototype.getElementAtIndex=function(t){return this.elements[t]},r.prototype.createIndex=function(){var t,n,i,r,o,a,s,u,l,c;for(this.index=new Map,this.elements=[],s=this.element.querySelectorAll(e.group),i=0,o=s.length;i<o;i++)for(n=s[i],u=n.querySelectorAll(e.element),r=0,a=u.length;r<a;r++)t=u[r],this.elements.push(t),c=this.fetchSearchStringForElement(t),this.index.set(t,{searchString:c,groupElement:n});return l=this.index,this.size=l.size,l},r.prototype.updateIndex=function(){var t;return this.createIndex(),null!=(t=this.delegate)&&"function"==typeof t.elementIndexDidUpdate?t.elementIndexDidUpdate():void 0},r.prototype.fetchSearchStringForElement=function(t){var e,n;return null!=(e=this.searchStrings.get(t))?e:(n=this.createSearchStringForElement(t),this.searchStrings.set(t,n),n)},r.prototype.createSearchStringForElement=function(t){var n,r,o,a,s,u,l;for(s=[],o=t.querySelectorAll(e.text),n=0,r=o.length;n<r;n++)a=o[n],u=a.textContent,l=a.title,u&&i.call(s,u)<0&&s.push(u),l&&i.call(s,l)<0&&s.push(l);return s.join(" ").toLowerCase()},r.prototype.installMutationObserver=function(){return this.observer=new MutationObserver(this.elementDidMutate),this.observer.observe(this.element,{childList:!0,subtree:!0})},r.prototype.elementDidMutate=function(t){if(o(t))return this.updateIndex()},o=function(t){var e,n,i,r,o,s,u,l,c,d;for(n=0,o=t.length;n<o;n++){for(c=t[n],e=c.addedNodes,d=c.removedNodes,i=0,s=e.length;i<s;i++)if(l=e[i],a(l))return!0;for(r=0,u=d.length;r<u;r++)if(l=d[r],a(l))return!0}return!1},a=function(e){if((null!=e?e.nodeType:void 0)===Node.ELEMENT_NODE)return BC.matches(e,t)||e.querySelector(t)},r}()}.call(this),function(){var t;t=BC.contentFilterConfig.classNames,BC.ContentFilterQueryResults=function(){function e(t,e){var n;n=e.getElementsMatchingQuery(t),this.index=n.index,this.elements=n.elements,this.size=this.index.size}return e.prototype.render=function(){return this.index.forEach(function(){return function(e,n){var i;return i=e.groupElement,n.classList.add(t.matched),i.classList.add(t.matched)}}())},e.prototype.getElementAtIndex=function(t){return this.elements[t]},e.prototype.reset=function(){return this.index.forEach(function(){return function(e,n){var i;return i=e.groupElement,n.classList.remove(t.matched,t.selected),i.classList.remove(t.matched)}}())},e}()}.call(this),function(){var t,e,n,i=function(t,e){return function(){return t.apply(e,arguments)}};e=BC.contentFilterConfig,n=e.selectors,t=e.classNames,BC.ContentFilterController=function(){function e(t){this.element=t,this.didKeyDown=i(this.didKeyDown,this),this.didInput=i(this.didInput,this),this.reset=i(this.reset,this),this.inputElement=this.element.querySelector(n.input),BC.handleEvent("input",{on:this.element,matching:n.input,"with":BC.debounce(this.didInput)}),BC.handleEvent("keydown",{on:this.element,matching:n.input,"with":this.didKeyDown}),BC.handleEvent("turbolinks:before-cache",{once:!0,"with":this.reset})}return e.prototype.render=function(){var t;return this.results&&(this.results.reset(),this.results=null),this.element.query&&(this.results=new BC.ContentFilterQueryResults(this.element.query,this.getElementIndex()),this.results.render()),this.element.matchCount=null!=(t=this.results)?t.size:void 0,this.renderSelection()},e.prototype.renderSelection=function(){var e,n;if(null!=(e=this.selectedElement)&&e.classList.remove(t.selected),null!=(n=this.selectedElement)&&n.removeAttribute("aria-selected",!0),this.inputElement.removeAttribute("aria-activedescendant"),this.selectedElement=this.getElementAtIndex(this.element.selectedIndex))return this.selectedElement.classList.add(t.selected),this.selectedElement.setAttribute("aria-selected",!0),this.inputElement.setAttribute("aria-activedescendant",this.selectedElement.id),BC.scrollElementIntoViewport(this.selectedElement)},e.prototype.reset=function(){var t,e,i,r;for(r=this.element.querySelectorAll(n.input),t=0,i=r.length;t<i;t++)e=r[t],e.value="";return this.element.query=""},e.prototype.didInput=function(t){return this.element.query=t.target.value},e.prototype.didKeyDown=function(t){var e;switch(this.installElementIndex(),t.keyCode){case BC.keyCodes.enter:if(t.preventDefault(),t.stopPropagation(),e=this.getLinkElementAtIndex(this.element.selectedIndex))return!t.ctrlKey&&!t.metaKey||t.shiftKey||t.altKey?e.click():window.open(e.getAttribute("href"),"_blank");break;case BC.keyCodes.up:return t.preventDefault(),this.adjustSelectedIndex(-1);case BC.keyCodes.down:return t.preventDefault(),this.adjustSelectedIndex(1);case BC.keyCodes.tab:return t.preventDefault(),t.shiftKey?this.adjustSelectedIndex(-1):this.adjustSelectedIndex(1)}},e.prototype.adjustSelectedIndex=function(t){var e,n;if(0<=(n=this.element.selectedIndex+t)&&n<=this.getIndexSize()-1&&(e=this.getElementAtIndex(n))&&BC.elementIsVisible(e))return this.element.selectedIndex=n},e.prototype.getIndexSize=function(){return this.results?this.results.size:this.getElementIndex().size},e.prototype.getElementAtIndex=function(t){return this.results?this.results.getElementAtIndex(t):this.getElementIndex().getElementAtIndex(t)},e.prototype.getLinkElementAtIndex=function(t){var e;if(e=this.getElementAtIndex(t))return e.hasAttribute("href")?e:e.querySelector("a[href]")},e.prototype.installElementIndex=function(){if(!this.elementIndex)return this.elementIndex=new BC.ContentFilterElementIndex(this.element),this.elementIndex.delegate=this},e.prototype.getElementIndex=function(){return this.installElementIndex(),this.elementIndex},e.prototype.elementIndexDidUpdate=function(){return this.render()},e}()}.call(this),function(){var t,e,n;e=BC.contentFilterConfig,n=e.selectors,t=e.classNames,BC.registerElement("bc-content-filter",{defaultCSS:"%t {\n  display: block;\n}\n\n%t[match-count] "+n.element+":not(."+t.matched+"),\n%t[match-count] "+n.group+":not(."+t.matched+"),\n%t[match-count] "+n.hideWhenActive+",\n%t "+n.hideUnlessMatch+":not(."+t.matched+"),\n%t:not([match-count='0']) "+n.showWhenNoMatches+" {\n  display: none;\n}",attachedCallback:function(){if(!BC.displayingTurbolinksPreview())return BC.ready(function(t){return function(){if(null==t.controller&&(t.controller=new BC.ContentFilterController(t)),t.autoselect)return t.selectedIndex=0}}(this))},detachedCallback:function(){return this.controller=null},attributeChangedCallback:function(t){var e,n;switch(t){case"query":return this.selectedIndex=null,null!=(e=this.controller)?e.render():void 0;case"selected-index":return null!=(n=this.controller)?n.renderSelection():void 0}},query:{get:function(){return this.hasAttribute("query")?this.getAttribute("query").trim():""},set:function(t){var e;return(e=null!=t?t.trim():void 0)?this.setAttribute("query",e):this.removeAttribute("query")}},selectedIndex:{get:function(){return this.hasAttribute("selected-index")?parseInt(this.getAttribute("selected-index")):this.query||this.autoselect?0:-1},set:function(t){return null!=t?this.setAttribute("selected-index",t):this.removeAttribute("selected-index")}},autoselect:{get:function(){return this.hasAttribute("autoselect")}},matchCount:{get:function(){return this.hasAttribute("match-count")?parseInt(this.getAttribute("match-count")):0},set:function(t){return null!=t?this.setAttribute("match-count",t):this.removeAttribute("match-count")}}})}.call(this),function(){var t,e,n,i,r,o,a,s,u=[].slice;s="bc-grouped-dates",BC.registerElement(s,{attachedCallback:function(){return BC.ready(function(t){return function(){return t.observer=new MutationObserver(t.didMutate.bind(t)),t.startObserver(),t.insertDateGroupDividers()}}(this))},detachedCallback:function(){return this.stopObserver()},didMutate:function(t){if(o(t))return this.insertDateGroupDividers()},startObserver:function(){if(!this.observing)return this.observing=!0,this.observer.observe(this,{childList:!0})},stopObserver:function(){if(this.observing)return delete this.observing,this.observer.disconnect()},withoutObserver:function(t){try{return this.stopObserver(),t.call(this)}finally{this.startObserver()}},withUpdateEvents:function(t){try{return BC.triggerEvent(this,s+":before"),t.call(this)}finally{BC.triggerEvent(this,s+":update")}},insertDateGroupDividers:function(){return this.withoutObserver(function(){return this.withUpdateEvents(function(){var n,i,o,a,s,u,l,c;u=r(this.children),a=u.dividerElements,i=u.datedElements,c=[];for(n in i)s=i[n][0],o=(null!=(l=a[n])?l:[t(n,this.getAttribute("divider-date-prefix"))])[0],e(o,s)?c.push(void 0):c.push(this.insertBefore(o,s));return c})})}},r=function(t){var e,i,r,o,a,s,u,l;for(a={},r={},u=0,l=t.length;u<l;u++)s=t[u],(o=s.dataset.datetime)&&(e=CalendarDate.parse(o),i=n(s)?null!=a[e]?a[e]:a[e]=[]:null!=r[e]?r[e]:r[e]=[],i.push(s));return{dividerElements:a,datedElements:r}},t=function(t,e){var n,r;return n=CalendarDate.parse(t),r=document.createElement("div"),r.innerHTML=i(n,e),r.firstElementChild},e=function(t,e){return t.compareDocumentPosition(e)===Node.DOCUMENT_POSITION_FOLLOWING},n=function(t){return t.hasAttribute("data-grouped-dates-divider")},i=function(t,e){return null==e&&(e=""),'<header class="date_divider" data-grouped-dates-divider data-datetime="'+t+'"'+[t.isToday()?" data-date-today":void 0]+'>\n  <h3 class="break centered">\n    <span>'+e+t.relativeWeekdayOrDate()+"</span>\n  </h3>\n</header>"},o=function(t){var e,n,i,r,o,s,l,c,d,h,p,f;for(n=0,o=t.length;n<o;n++){for(d=t[n],e=d.addedNodes,f=d.removedNodes,h=u.call(e),i=0,s=h.length;i<s;i++)if(c=h[i],a(c))return!0;for(p=u.call(f),r=0,l=p.length;r<l;r++)if(c=p[r],a(c))return!0}return!1},a=function(t){var e;return null!=(null!=t&&null!=(e=t.dataset)?e.datetime:void 0)})}.call(this),function(){var t,e,n,i,r=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};n="bc-infinite-page",e="loading",t="[data-infinite-page-container]",i=100,BC.registerElement(n,function(){var o,a;return a=function(t){return t="scroll"+t,document.body[t]||document.documentElement[t]},o=function(e){var n;return null!=(n=e.querySelector(t))?n:e},{defaultCSS:"%t[scrollable] {\n  overflow-y: scroll;\n  -webkit-overflow-scrolling: touch;\n}",createdCallback:function(){return this.direction||(this.direction="down"),this.trigger||(this.trigger="bottom"),this.triggers=this.trigger.split(" "),null==this.page&&(this.page=1),this.pathname=location.pathname,this.params=BC.getQueryParams(),this.params.page=this.page,this.recordedParams=[]},attachedCallback:function(){return BC.ready(function(t){return function(){return t.install()}}(this))},detachedCallback:function(){return this.uninstall()},install:function(){if(this.installScrollHandler(),this.installNavigationHandler(),BC.triggerEvent(this,n+":install"),"bottom"===this.trigger)return setTimeout(function(t){return function(){return t.didScroll()}}(this),400)},uninstall:function(){var t;return null!=(t=this.xhr)&&t.abort(),"function"==typeof this.uninstallScrollHandler&&this.uninstallScrollHandler(),"function"==typeof this.uninstallNavigationHandler&&this.uninstallNavigationHandler(),this.clearLoadingState()},installScrollHandler:function(){var t,e;return e=_.throttle(this.didScroll.bind(this),500),t=this.scrollable?this:window,t.addEventListener("scroll",e),this.uninstallScrollHandler=function(){return t.removeEventListener("scroll",e)}},installNavigationHandler:function(){var t;return t=this.uninstall.bind(this),document.addEventListener("turbolinks:visit",t),this.uninstallNavigationHandler=function(){return document.removeEventListener("turbolinks:visit",t)}},page:{get:function(){return parseInt(this.getAttribute("page"))},set:function(t){return this.setAttribute("page",t)}},trigger:{get:function(){return this.getAttribute("trigger")},set:function(t){return this.setAttribute("trigger",t)}},direction:{get:function(){return this.getAttribute("direction")},set:function(t){return this.setAttribute("direction",t)}},scrollable:{get:function(){return this.hasAttribute("scrollable")}},didScroll:function(){if(r.call(this.triggers,"top")>=0&&this.isScrolledNearTop()?(this.currentTrigger="top",this.loadNextPage()):r.call(this.triggers,"bottom")>=0&&this.isScrolledNearBottom()&&(this.currentTrigger="bottom",this.loadNextPage()),this.scrollable)return BC.triggerEvent(this,n+":scroll")},isScrolledNearTop:function(){return this.getScrollDistanceToTop()<i},isScrolledNearBottom:function(){return this.getScrollDistanceToBottom()<i},getScrollTop:function(){return this.scrollable?this.scrollTop:a("Top")},getScrollHeight:function(){return this.scrollable?this.scrollHeight:a("Height")},getInnerHeight:function(){return this.scrollable?this.clientHeight:window.innerHeight},getScrollDistanceToTop:function(){return this.getScrollTop()},getScrollDistanceToBottom:function(){return this.getScrollHeight()-this.getScrollTop()-this.getInnerHeight()},scrollBy:function(t){return this.scrollable?this.scrollTop+=t:window.scrollBy(0,t)},preserveScrollPosition:function(t){var e;return"top"===this.currentTrigger?(e=this.getScrollHeight(),t.call(this),this.scrollBy(this.getScrollHeight()-e)):t.call(this)},showLoadingState:function(){if(!this.loading)return this.loading=!0,this.classList.add(e)},clearLoadingState:function(){if(this.loading)return this.loading=!1,this.classList.remove(e)},canLoadPage:function(){return!this.loading&&location.pathname===this.pathname&&!(this.hasAttribute("reached-"+this.currentTrigger)||this.hasAttribute("reached-infinity"))},loadNextPage:function(){if(this.canLoadPage())return this.setParamsForNextPage(),this.loadPage()},loadPage:function(){var t;if(t=BC.triggerEvent(this,n+":beforeload"),!t.defaultPrevented&&this.recordParams(this.params))return this.showLoadingState(),this.xhr=this.performRequest(),this.xhr.done(function(t){return function(e){return t.didLoadPage(e)}}(this)),this.xhr.always(function(t){return function(){return t.clearLoadingState()}}(this))},performRequest:function(t){return null==t&&(t=this.params),$.get(this.pathname,t)},didLoadPage:function(t){var e,i;return(i=$(t).find(n).get(0))&&(e=o(i).innerHTML.trim())?this.insertPage(e):this.reachedLastPage()},insertPage:function(t){return requestAnimationFrame(function(e){return function(){return e.preserveScrollPosition(function(){var e,n;return e=$(o(this)),n="top"===this.currentTrigger?"prepend":"append",e[n](t),null!=this.params.page&&(this.page=this.params.page),BC.triggerEvent(this,"bc-infinite-page:load")})}}(this))},reachedLastPage:function(){return this.triggers.length>1?(this.setAttribute("reached-"+this.currentTrigger,""),this.hasAttribute("reached-top")&&this.hasAttribute("reached-bottom")?this.setAttribute("reached-infinity",""):void 0):this.setAttribute("reached-infinity","")},setParamsForNextPage:function(){if(null!=this.params.page)return"up"===this.direction&&"top"===this.currentTrigger||"down"===this.direction&&"bottom"===this.currentTrigger?this.params.page++:this.params.page--},recordParams:function(t){if(t=JSON.stringify(t),r.call(this.recordedParams,t)<0)return this.recordedParams.push(t),!0},forgetParams:function(t){var e;return t=JSON.stringify(t),r.call(this.recordedParams,t)>=0&&(this.recordedParams=function(){var n,i,r,o;for(r=this.recordedParams,o=[],n=0,i=r.length;n<i;n++)(e=r[n])!==t&&o.push(e);return o}.call(this)),!0}}}())}.call(this),function(){var t,e,n,i=[].slice,r=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};BC.registerElement("bc-modal",{defaultCSS:'%t {\n  display: none;\n  align-items: flex-start;\n  justify-content: center;\n  position: fixed;\n  z-index: 10;\n  height: 100%;\n  width: 100%;\n  left: 0;\n  top: 0;\n}\n\n%t[opened="true"] {\n  display: flex;\n}\n\n%t[opened="true"][type="full"] {\n  display: block;\n}\n\n%t[type="box"] > :first-child {\n  max-height: 80vh;\n  max-width: 80vw;\n}',booleanAttributes:["close-on-scroll","close-button-only"],defaultType:{get:function(){return"box"}},createdCallback:function(){return this.eventHandlers=[]},attachedCallback:function(){if(this.hasAttribute("type")||this.setAttribute("type",this.defaultType),"false"!==this.getAttribute("opened"))return this.open()},detachedCallback:function(){return this.close()},open:function(i){var r;if("true"!==this.getAttribute("opened"))return this.setAttribute("opened","true"),null!=(r=this.querySelector("[autofocus]"))&&r.select(),this.eventHandlers.push(BC.handleEvent("click",{on:this,"with":t.bind(this)})),this.eventHandlers.push(BC.handleEvent("keydown",{phase:"capturing","with":e.bind(this)})),this.closeOnScroll&&(this.eventHandlers.push(BC.handleEvent("scroll",{"with":n.bind(this)})),this.eventHandlers.push(BC.handleEvent("wheel",{"with":n.bind(this)}))),this.modalbox=this.querySelector('bc-modal[type="box"] > :first-child'),$(this.modalbox).height()>window.innerHeight&&(this.modalbox.style.height=window.innerHeight+"px"),BC.triggerEvent(this,"open",i)},close:function(t){var e;if("false"!==this.getAttribute("opened")){for(this.setAttribute("opened","false");e=this.eventHandlers.pop();)e.destroy();return BC.triggerEvent(this,"close",t)}},closesOnOutsideClick:function(){return!BC.matches(this,"[data-behavior~=close_button_only]")},cycleTabStopsIfNeeded:function(t){var e,n,o,a,s;if(n=i.call(this.querySelectorAll("[tabindex]:not([tabindex='-1'])")),e=n[0],o=n[n.length-1],n.length)if(t.shiftKey){if(a=document.activeElement,r.call(n,a)<0||document.activeElement===e)return t.preventDefault(),o.focus()}else if(s=document.activeElement,r.call(n,s)<0||document.activeElement===o)return t.preventDefault(),e.focus()}},t=function(t){if(t.target===this&&t.stopPropagation(),!t.defaultPrevented&&t.target===this&&this.closesOnOutsideClick())return this.close()},e=function(t){if(!t.defaultPrevented)switch(t.keyCode){case BC.keyCodes.escape:return t.stopPropagation(),this.close();case BC.keyCodes.tab:return this.cycleTabStopsIfNeeded(t)}},n=function(t){var e;if(e=t.deltaY,null==e&&(null==this.initialScrollPosition&&(this.initialScrollPosition=window.pageYOffset),e=this.initialScrollPosition-window.pageYOffset),Math.abs(e)>=40)return this.close()})}.call(this),function(){var t,e;t=new Set,BC.registerElement("bc-overflow",function(){return{contentElement:{get:function(){return this.querySelector("bc-overflow-content")}},indicatorElement:{get:function(){return this.querySelector("bc-overflow-indicator")}},isOverflowed:{get:function(){var t;return(null!=(t=this.contentElement)?t.overflowWidth:void 0)>0}},refresh:function(){return this.isOverflowed?this.classList.add("overflowed"):this.classList.remove("overflowed")},attachedCallback:function(){return t.add(this),this.refresh()},detachedCallback:function(){return t["delete"](this)}}}()),BC.registerElement("bc-overflow-content",function(){return{overflowElement:{get:function(){return BC.closest(this,"bc-overflow")}},indicatorElement:{get:function(){var t;return null!=(t=this.overflowElement)?t.indicatorElement:void 0}},overflowWidth:{get:function(){return Math.max(0,this.scrollWidth-this.offsetWidth)}},overflowChildren:{get:function(){var t,e;for(e=[],t=this.firstOverflowedElementChild;null!=t;)e.push(t),t=t.nextElementSibling;return e}},firstOverflowedElementChild:{get:function(){var t,e,n,i;for(i=this.children,e=0,n=i.length;e<n;e++)if(t=i[e],this.elementIsOverflowed(t))return t}},elementIsOverflowed:function(t){var e,n,i;return n=t.getBoundingClientRect(),null!=this.indicatorElement?(i=this.indicatorElement.getBoundingClientRect(),n.right>i.left):(e=this.getBoundingClientRect(),n.right>e.right)},attachedCallback:function(){var t;return"function"==typeof(t=this.overflowElement).refresh?t.refresh():void 0}}}()),(e=BC.throttle(function(){return t.forEach(function(t){return t.refresh()})}))(),addEventListener("resize",e)}.call(this),function(){BC.registerElement("bc-pie-chart",function(){var t,e;return t=64,e="rotate(-90deg)",{defaultCSS:"%t {\n  display: inline-block;\n  width: 1.08em;\n  height: 1.08em;\n}\n\n%t svg {\n  border-radius: 50%;\n  -webkit-transform: "+e+";\n  -moz-transform: "+e+";\n  -ms-transform: "+e+";\n  -o-transform: "+e+";\n  transform: "+e+";\n}",percent:{get:function(){var t;return parseInt(null!=(t=this.getAttribute("percent"))?t:0,10)}},createdCallback:function(){return this.render()},attributeChangedCallback:function(){return this.render()},render:function(){switch(this.diameter=t,this.radius=this.diameter/2,this.center=this.radius,this.getAttribute("type")){case"donut":this.strokeWidth=.3*this.radius,this.radius=this.radius-this.strokeWidth/2;break;default:this.strokeWidth=this.diameter}return this.innerHTML=this.generateHTML()},generatePieCSS:function(){return"stroke-width: "+this.strokeWidth+";"},generateSliceCSS:function(){var t,e;return t=2*Math.PI*this.radius,e=this.percent*(t/100),this.generatePieCSS()+"stroke-dasharray: "+e+" "+t+";"},generateHTML:function(){return'<svg viewBox="0 0 '+this.diameter+" "+this.diameter+'">\n  <circle class="pie" r="'+this.radius+'" cx="'+this.center+'" cy="'+this.center+'" style="'+this.generatePieCSS()+'" />\n  <circle class="slice" r="'+this.radius+'" cx="'+this.center+'" cy="'+this.center+'" style="'+this.generateSliceCSS()+'" />\n</svg>'}}}())}.call(this),function(){var t,e,n=[].slice,i=function(t,e){return function(){return t.apply(e,arguments)}};BC.registerElement("bc-require",{createdCallback:function(){return this.setAttribute("pending","")},attachedCallback:function(){return BC.ready(function(e){return function(){var n;return(null!=(n=t.find(e.script))?n.loaded:void 0)?e.activate():(e.deactivate(),t.load(e.script).then(function(){return e.activate()}))}}(this))},script:{get:function(){return this.getAttribute("script")}},deactivate:function(){var t,i,r,o,a,s,u,l;this.placeholderStyle=e(this,"width","height"),a=this.placeholderStyle;for(r in a)l=a[r],this.style[r]=l;for(this.pendingFragment=document.createDocumentFragment(),s=n.call(this.childNodes),u=[],i=0,o=s.length;i<o;i++)t=s[i],u.push(this.pendingFragment.appendChild(t));return u},activate:function(){var t;if(this.removeAttribute("pending"),null!=this.pendingFragment){this.appendChild(this.pendingFragment),delete this.pendingFragment;for(t in this.placeholderStyle)this.style[t]=null;delete this.placeholderStyle}return BC.triggerEvent(this,"bc-require-activate")}}),e=function(){var t,e,i,r,o,a,s;for(e=arguments[0],s=2<=arguments.length?n.call(arguments,1):[],t=getComputedStyle(e),a={},i=0,o=s.length;i<o;i++)r=s[i],a[r]=t[r];return a},t=function(){function t(t){this.script=t,this.didLoad=i(this.didLoad,this),this.promise=new Promise(function(t){return function(e,n){t.resolve=e,t.reject=n}}(this)),this.load()}return t.loaders={},t.find=function(t){return this.loaders[t]},t.create=function(t){return this.loaders[t]=new this(t)},t.load=function(t){var e;return null!=(e=this.find(t))?e:this.create(t)},t.prototype.then=function(t){return this.promise.then(t)},t.prototype.load=function(){var t,e;return t=this.findLinkElement(),e=document.createElement("script"),e.src=t.href,e.onload=this.didLoad,t.parentNode.insertBefore(e,t)},t.prototype.didLoad=function(){return this.loaded=!0,this.resolve()},t.prototype.findLinkElement=function(){return document.head.querySelector("link[rel=subresource][data-script='"+this.script+"']")},t}()}.call(this),function(){var t,e,n,i,r,o,a,s,u,l,c,d,h,p,f;c="position: -webkit-sticky; position: -moz-sticky; position: -ms-sticky; position: sticky",i=[],f=!1,t=function(){var t,e;return!!(t=null!=(e=navigator.userAgent.match(/Chrome\/(\d+)/))?e[1]:void 0)&&parseInt(t)<66}(),e=function(){var e;if(!t)return e=document.createElement("div"),e.style.cssText=c,""!==e.style.position}(),BC.registerElement("bc-sticky",{defaultCSS:"%t { display: block; top: 0px; "+(e?c:"")+" }\n%t.stuck { position: fixed; margin-top: 0 !important }",attachedCallback:function(){return BC.ready(function(t){return function(){return s(t)}}(this))},detachedCallback:function(){return d(this)},placeholder:{get:function(){var t,e;if(t=this.previousElementSibling,"bc-sticky-placeholder"===(null!=t&&null!=(e=t.tagName)?e.toLowerCase():void 0))return t}},createPlaceholder:function(){var t;if(this.parentNode&&null==this.placeholder)return t=n(this),this.parentNode.insertBefore(t,this)},removePlaceholder:function(){var t;if(null!=this.placeholder)return null!=(t=this.parentNode)?t.removeChild(this.placeholder):void 0}}),BC.registerElement("bc-sticky-placeholder",{defaultCSS:"%t { display: block; position: relative }"}),e?(s=function(){},d=function(){}):(s=function(t){return i.push(t),a()},d=function(t){var e;return i=function(){var n,r,o;for(o=[],n=0,r=i.length;n<r;n++)(e=i[n])!==t&&o.push(e);return o}()},addEventListener("scroll",function(){if(i.length)return a()}),addEventListener("resize",function(){if(i.length)return a(!0)})),a=function(t){if(!f)return f=!0,requestAnimationFrame(function(){var e,n,r,o;for(f=!1,o=[],n=0,r=i.length;n<r;n++)e=i[n],o.push(p(e,t));return o})},p=function(t,e){var n,i,a,s,c;if(t.parentNode)if(n=t.placeholder,s=r(t),e&&n&&(h(t),n=!1),n){if(a=t.placeholder.getBoundingClientRect(),a.top>s)return h(t);if((c=o(t.parentNode))<s)return h(t);if(c<s+a.height)return u(t,c-a.height)}else if(t.classList.contains("stuck")&&h(t),i=t.getBoundingClientRect(),t.parentNode.getBoundingClientRect(),i.height>0&&i.top<s){if((c=o(t.parentNode))>s+i.height)return l(t);if(c>s)return l(t),u(t,c-i.height)}},l=function(t){var e;return e=t.offsetWidth,t.dataset.stickyTop=r(t),t.createPlaceholder(),t.classList.add("stuck"),t.style.width=e+"px",t.style.top=""},h=function(t){return t.style.top="",t.style.width="",t.classList.remove("stuck"),t.removePlaceholder(),delete t.dataset.stickyTop},u=function(t,e){return t.style.top=e+"px"},n=function(t){var e,n;return e=getComputedStyle(t),n=document.createElement("bc-sticky-placeholder"),n.style.width=t.offsetWidth+"px",n.style.height=t.offsetHeight+"px",n.style.marginTop=e.marginTop,n},r=function(t){var e;return parseInt(null!=(e=t.dataset.stickyTop)?e:getComputedStyle(t).top,10)},o=function(t){var e,n,i;return e=t.getBoundingClientRect(),n=getComputedStyle(t),i=parseInt(n.paddingTop,10)+parseInt(n.paddingBottom,10)+parseInt(n.borderTopWidth,10)+parseInt(n.borderBottomWidth,10),Math.floor(e.height+e.top-i)}}.call(this),function(){BC.registerElement("bc-timeline",{attachedCallback:function(){if(!BC.displayingTurbolinksPreview())return BC.ready(function(t){return function(){return t.hasAttribute("channel")?t.timeline=new BC.Timeline.Streaming(t,t.getAttribute("channel")):t.timeline=new BC.Timeline.Standard(t)}}(this))},detachedCallback:function(){var t;return null!=(t=this.timeline)?t.detach():void 0}})}.call(this),function(){var t,e,n,i,r,o,a,s,u,l,c,d,h,p,f,m,g,v,b,y=function(t,e){return function(){return t.apply(e,arguments)}},C=[].slice;d="[data-behavior~=event]",n="[data-role=bucket]",l="[data-timeline-item]",h="[data-role=summary]",m="left",g="right",t={},BC.Timeline.Formatter=function(){function r(e){this.element=e,this.formatEvents=y(this.formatEvents,this),this.updateEvents=y(this.updateEvents,this),BC.ready(function(e){return function(){var n;return e.animatedEventIds=null!=t[n=location.toString()]?t[n]:t[n]=[],e.observer=new MutationObserver(e.updateEvents),e.start(),e.updateEvents()}}(this))}return r.prototype.start=function(){if(!this.observing)return this.observing=!0,this.observer.observe(this.element,{childList:!0,subtree:!0})},r.prototype.stop=function(){if(this.observing)return this.observing=!1,this.observer.disconnect()},r.prototype.updateEvents=function(){return this.reset(),this.formatEvents(),this.animateEvents()},r.prototype.formatEvents=function(){var t,e,n,i,r,o,a;if(e=this.element.querySelectorAll(d),e.length){for(r=e[0],o=2<=e.length?C.call(e,1):[],this.formatFirstEvent(r,o[0]),a=[],n=0,i=o.length;n<i;n++)t=o[n],this.formatEvent(t,r),a.push(r=t);return a}},r.prototype.animateEvents=function(){var t,e,n,i,r;for(i=this.element.querySelectorAll(this.animationSelector()),r=[],e=0,n=i.length;e<n;e++)t=i[e],r.push(this.animateEvent(t));return r},r.prototype.animationSelector=function(){return d+this.animatedEventIds.map(function(t){return":not([data-event-id='"+t+"'])"}).join("")},r.prototype.reset=function(){var t,e,i,r,o;for(r=this.element.querySelectorAll(n+", "+h),o=[],e=0,i=r.length;e<i;e++)t=r[e],o.push(t.style.display="");return o},r.prototype.formatFirstEvent=function(t,e){var n,r;return e&&(n=e.dataset.side)&&(r=n,i(t,e)||(r=p(n))),t.dataset.side=null!=r?r:m,v(t,e),b(t,e)},r.prototype.formatEvent=function(t,i){var r,o;if(e(t,i),v(t,i)&&null!=(r=t.querySelector(n))&&(r.style.display="none"),b(t,i))return null!=(o=t.querySelector(h))?o.style.display="none":void 0},r.prototype.animateEvent=function(t){var e,i,r,o,a,s,u,l,c;if(u=t.dataset,a=u.eventId,s=u.newEvent,l=u.side,c=u.threadedByBucket,this.animatedEventIds.push(a),e=s?"add":"slide",r="activity-item--"+e+"-to-"+l,o=f(t),BC.animateElementWithClass(o,r),!c)return i=t.querySelector(n),BC.animateElementWithClass(i,r)},r}(),f=function(t){var e;return t.dataset.threadedBySummary&&(e=t.querySelector(h))?e.nextElementSibling:t.querySelector(l)},e=function(t,e){var n,r;return r=null!=(n=null!=e?e.dataset.side:void 0)?n:m,null!=e&&i(t,e)||(r=p(r)),t.dataset.side=r},p=function(t){return t===m?g:m},v=function(t,e){if(null!=e&&i(t,e))return t.dataset.threadedByBucket=!0},b=function(t,e){if(null!=e&&r(t,e))return t.dataset.threadedBySummary=!0},i=function(t,e){return u(t,e)&&c(t,e)},u=function(t,e){return t.dataset.bucketId===e.dataset.bucketId},c=function(t,e){return CalendarDate.parse(t.dataset.datetime).equals(CalendarDate.parse(e.dataset.datetime))},r=function(t,e){return i(t,e)&&s(t,e)&&a(t,e)&&o(t,e)},s=function(t,e){return t.dataset.parentRecordingId===e.dataset.parentRecordingId},a=function(t,e){return t.dataset.kind===e.dataset.kind},o=function(t,e){return t.dataset.creatorId===e.dataset.creatorId},s=function(t,e){return t.dataset.parentRecordingId===e.dataset.parentRecordingId},a=function(t,e){return t.dataset.kind===e.dataset.kind},o=function(t,e){return t.dataset.creatorId===e.dataset.creatorId}}.call(this),function(){BC.Timeline.Standard=function(){function t(t){this.element=t,this.formatter=new BC.Timeline.Formatter(this.element,this)}return t.prototype.detach=function(){return this.formatter.stop()},t}()}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t="[data-timeline-container]",BC.Timeline.Streaming=function(){function n(t,n){this.element=t,this.channel=n,this.detach=e(this.detach,this),this.received=e(this.received,this),this.connected=e(this.connected,this),this.subscription=BC.cable.subscriptions.create({channel:this.channel},this),this.formatter=new BC.Timeline.Formatter(this.element)}return n.prototype.connected=function(){return this.subscription.perform("follow")},n.prototype.received=function(t){switch(t.action){case"add":return this.add(t.event);case"revoke":return this.revoke(t.event_ids)}},n.prototype.add=function(e){var n;return n=$(e).attr("data-new-event",!0),$(this.element).find(t).prepend(n)},n.prototype.revoke=function(t){var e,n,i,r;for(r=[],e=0,i=t.length;e<i;e++)n=t[e],r.push($("[data-event-id='"+n+"']").remove());return r},n.prototype.detach=function(){return this.subscription.unsubscribe(),this.formatter.stop()},n}()}.call(this),function(){var t=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};BC.AutocompletableCollection=function(){function e(t,e){var i,r,o;for(null==t&&(t=[]),null==e&&(e={}),this.index=new Map,this.autocompletables=new Array,r=0,o=t.length;r<o;r++)i=t[r],this.index.set(i.value.toString(),i);this.index.forEach(function(t){return function(e){return t.autocompletables.push(e)}}(this)),!1!==e.sort&&this.autocompletables.sort(n),this.length=this.autocompletables.length}var n,i,r,o,a,s,u;return e.prototype.get=function(t){return this.index.get(t.toString())},e.prototype.has=function(t){return this.index.has(t.toString())},e.prototype.add=function(t,e){return null==t&&(t=[]),new this.constructor(this.autocompletables.concat(t),e)},e.prototype.getValues=function(){return this.autocompletables.map(function(t){return t.value})},e.prototype.withValues=function(t,e){var n,i,r;return null==t&&(t=[]),i=function(){var e,i,o;for(o=[],e=0,i=t.length;e<i;e++)r=t[e],
(n=this.get(r))&&o.push(n);return o}.call(this),new this.constructor(i,e)},e.prototype.withoutValues=function(e,n){var i;return null==e&&(e=[]),i=[],this.index.forEach(function(n,r){if(t.call(e,r)<0)return i.push(n)}),new this.constructor(i,n)},e.prototype.matchingQuery=function(t){var e;return t?(e=i(this.autocompletables,t),new this.constructor(e,{sort:!1})):this},e.prototype.toArray=function(){return this.autocompletables.slice(0)},e.prototype.toJSON=function(){return this.toArray()},e.prototype.isEqualTo=function(t){return null!=t&&(this.length===t.length&&JSON.stringify(this)===JSON.stringify(t))},n=function(t,e){return t.name.localeCompare(e.name)},i=function(t,e){return BC.uniqueValues([].concat(r(t,e),a(t,e)))},r=function(t,e){return o(t,u(e,"^"))},a=function(t,e){return o(t,u(e,"\\s"))},o=function(t,e){var n,i,r,o;for(o=[],i=0,r=t.length;i<r;i++)n=t[i],e.test(n.name)&&o.push(n);return o},u=function(t,e){return null==e&&(e=""),new RegExp(e+s(t),"i")},s=function(t){return t.toString().split("").map(BC.regexpEscape).join("(.*\\s)?").replace(/\(\.\*\\s\)\? /g,"[^ ]* ")},e}()}.call(this),function(){BC.SuggestionContext=function(){function t(t,n,i){var r,o,a,s,u,l,c;this.content=n,this.position=i,s=t.matchQueryAndTerminatorForWord,o=t.characterMatchesWordBoundary,(r=e(this.content,this.position,o))&&(this.startPosition=r[0],this.endPosition=r[1],this.word=(l=this.content).slice.apply(l,r),(a=s(this.word))&&(u=a.query,c=a.terminator,u.length&&(this.query=u),c.length&&(this.terminator=c),this.active=!0))}var e;return e=function(t,e,n){var i,r,o,a;for(a=o=e;--o>=0&&(i=t.charAt(o),!n(i));)a=o;for(r=o=e;o<t.length&&(i=t.charAt(o),!n(i));)r=++o;if(a!==r)return[a,r]},t.prototype.isActive=function(){return this.active},t.prototype.isTerminated=function(){var t;return(null!=(t=this.terminator)?t.length:void 0)&&this.position===this.endPosition},t.prototype.isEqualTo=function(){return!1},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};BC.SuggestionController=function(){function e(e){this.delegate=e,this.didScrollWindow=t(this.didScrollWindow,this),this.didResizeWindow=t(this.didResizeWindow,this),this.didPressKey=t(this.didPressKey,this),this.matchQueryAndTerminatorForWord=t(this.matchQueryAndTerminatorForWord,this),this.characterMatchesWordBoundary=t(this.characterMatchesWordBoundary,this),this.commitSuggestion=t(this.commitSuggestion,this),this.installKeyboardListener(),this.installResizeListeners(),this.context=null,this.active=!1,this.committing=!1,this.canceled=!1}return e.prototype.destroy=function(){return this.uninstallResultsController(),this.uninstallResizeListeners(),this.uninstallKeyboardListener()},e.prototype.updateWithContentAndPosition=function(t,e){var n;if(!this.committing)return n=this.context,this.context=new BC.SuggestionContext(this,t,e),this.context.isEqualTo(n)?void 0:this.context.isTerminated()?this.commitSuggestion():this.context.isActive()?this.activateSuggestion():this.deactivateSuggestion()},e.prototype.activateSuggestion=function(){if(!this.canceled)return this.active=!0,this.installResultsController(),this.updateResults(function(t){return function(){return t.resultsController.hasResults()?t.displayResults():t.hideResults()}}(this))},e.prototype.deactivateSuggestion=function(){return this.uninstallResultsController(),this.active=!1,this.canceled=!1},e.prototype.deactivateSuggestionWithAnimation=function(){return this.hideResultsWithAnimation(function(t){return function(){return t.deactivateSuggestion()}}(this))},e.prototype.cancelSuggestion=function(){if(this.active)return this.deactivateSuggestion(),this.canceled=!0},e.prototype.resumeSuggestion=function(){if(this.canceled)return this.canceled=!1,this.activateSuggestion()},e.prototype.commitSuggestion=function(t){var e,n,i,r,o,a;return a=(null!=t?t:{}).withTerminator,!(this.committing||this.canceled||!this.active)&&(!!(o=this.resultsController.getSelectedValue())&&(n=[this.context.startPosition,this.context.endPosition],r=null!=(i=null!=a?a:this.context.terminator)?i:" ",this.committing=!0,this.resultsController.flashSelection(function(t){return function(){var e;return t.committing=!1,"function"==typeof(e=t.delegate).didCommitValueAtRangeWithTerminator&&e.didCommitValueAtRangeWithTerminator(o,n,r),t.deactivateSuggestionWithAnimation()}}(this)),"function"==typeof(e=this.delegate).willCommitValueAtRangeWithTerminator&&e.willCommitValueAtRangeWithTerminator(o,n,r),!0))},e.prototype.displayResults=function(){var t,e,n;if(this.active)return e=this.delegate.getOffsetsAtPosition(this.context.startPosition),n="function"==typeof(t=this.delegate).getResultsPlacement?t.getResultsPlacement():void 0,this.resultsController.displayAtOffsets(e,{placement:n})},e.prototype.updateResults=function(t){var e,n;return e=null!=(n=this.context)?n.query:void 0,this.delegate.fetchResultsForQuery(e,function(n){return function(i){var r;if(null!=n.resultsController&&e===(null!=(r=n.context)?r.query:void 0))return n.resultsController.updateResults(i),"function"==typeof t?t():void 0}}(this))},e.prototype.hideResults=function(){return this.resultsController.hide()},e.prototype.hideResultsWithAnimation=function(t){var e;return null!=(e=this.resultsController)?e.hideWithAnimation(t):void 0},e.prototype.isActive=function(){return this.active},e.prototype.isCanceled=function(){return this.canceled},e.prototype.characterMatchesWordBoundary=function(t){return null!=this.delegate.characterMatchesWordBoundary?this.delegate.characterMatchesWordBoundary(t):/[\s\uFFFC]/.test(t)},e.prototype.matchQueryAndTerminatorForWord=function(t){return this.delegate.matchQueryAndTerminatorForWord(t)},e.prototype.didClickOption=function(){return setTimeout(this.commitSuggestion,100)},e.prototype.didShowResults=function(t){var e;return this.hidden=!1,"function"==typeof(e=this.delegate).didShowResults?e.didShowResults(t):void 0},e.prototype.didHideResults=function(t){var e;return this.hidden=!0,"function"==typeof(e=this.delegate).didHideResults?e.didHideResults(t):void 0},e.prototype.didPressKey=function(t){var e;if(!this.committing)return e=function(){switch(t.keyCode){case 9:return this.didPressTabKey();case 10:case 13:return this.didPressReturnKey();case 27:return this.didPressEscapeKey();case 32:return this.didPressSpaceKey();case 38:return this.didPressUpKey();case 40:return this.didPressDownKey();default:return this.didPressKeyWithValue(t.key)}}.call(this),!1===e?(t.preventDefault(),t.stopPropagation()):void 0},e.prototype.didPressTabKey=function(){if(this.active){if(this.hidden)return this.displayResults(),!1;if(!this.committing&&this.commitSuggestion())return!1}else if(this.canceled)return this.resumeSuggestion(),!1},e.prototype.didPressReturnKey=function(){if(this.active&&this.commitSuggestion())return!1},e.prototype.didPressEscapeKey=function(){if(this.active)return this.cancelSuggestion(),!1},e.prototype.didPressSpaceKey=function(){if(this.active&&this.spaceMatchesWordBoundary()&&this.commitSuggestion())return!1},e.prototype.didPressUpKey=function(){if(this.active)return this.resultsController.selectUp(),!1},e.prototype.didPressDownKey=function(){if(this.active)return this.resultsController.selectDown(),!1},e.prototype.didPressKeyWithValue=function(t){var e;if(this.active&&null!=t&&!this.hidden&&(e=this.matchQueryAndTerminatorForWord(t),""===(null!=e?e.query:void 0)))return this.cancelSuggestion(),!1},e.prototype.didResizeWindow=function(){if(this.active)return this.hideResults()},e.prototype.didScrollWindow=function(t){if(this.active&&t.target===document)return this.hideResults()},e.prototype.installKeyboardListener=function(){return window.addEventListener("keydown",this.didPressKey,!0)},e.prototype.uninstallKeyboardListener=function(){return window.removeEventListener("keydown",this.didPressKey,!0)},e.prototype.installResizeListeners=function(){return window.addEventListener("resize",this.didResizeWindow,!0),window.addEventListener("scroll",this.didScrollWindow,!0)},e.prototype.uninstallResizeListeners=function(){return window.removeEventListener("resize",this.didResizeWindow,!0),window.removeEventListener("scroll",this.didScrollWindow,!0)},e.prototype.installResultsController=function(){return null==this.resultsController&&(this.resultsController=new BC.SuggestionResultsController),this.resultsController.delegate=this},e.prototype.uninstallResultsController=function(){var t;return null!=(t=this.resultsController)&&t.destroy(),this.resultsController=null},e.prototype.spaceMatchesWordBoundary=function(){return this.characterMatchesWordBoundary(" ")},e}()}.call(this),function(){var t=[].slice;BC.SuggestionOptionElement=BC.registerElement("bc-suggestion-option",{selectElement:{get:function(){return $(this).closest("bc-suggestion-select").get(0)}},index:{get:function(){if(this.selectElement)return t.call(this.selectElement.optionElements).indexOf(this)}},selected:{get:function(){return this.hasAttribute("selected")},set:function(t){return t?this.setAttribute("selected",""):this.removeAttribute("selected")}},value:{get:function(){return this.getAttribute("value")},set:function(t){return this.setAttribute("value",t)}},flash:{value:BC.synchronize(function(t){var e;return(e=function(n){return function(i){return requestAnimationFrame(function(){return 0===i?n.classList.add("flashing-off"):4===i&&n.classList.remove("flashing-off"),7===i?t():e(i+1)})}}(this))(0)})}})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};BC.SuggestionResultsController=function(){function e(){this.didMouseDown=t(this.didMouseDown,this),this.revealOption=t(this.revealOption,this),this.selectElement=document.createElement("bc-suggestion-select"),this.selectElement.addEventListener("mousedown",this.didMouseDown,!0),this.selectElement.addEventListener("click",n),this.selectElement.setAttribute("data-behavior","scrollable_menu"),document.body.appendChild(this.selectElement)}var n,i,r,o;return e.prototype.destroy=function(){var t;return this.hide(),this.selectElement.removeEventListener("mousedown",this.didMouseDown,!0),this.selectElement.removeEventListener("click",n),null!=(t=this.selectElement.parentNode)?t.removeChild(this.selectElement):void 0},e.prototype.displayAtOffsets=function(t,e){var n,a,s,u,l,c,d,h,p,f,m,g,v,b,y,C,D;return m=(null!=e?e:{}).placement,this.show(),this.selectElement.style.height="",b=getComputedStyle(this.selectElement),p=r(this.selectElement),g=i(t),l=this.selectElement.getBoundingClientRect(),D=o(),n=g.top-D.top-p.top,a=D.bottom-g.bottom-p.bottom,y=3*this.getOptionHeight(),n>y&&y>a?null==m&&(m="above"):null==m&&(m="below"),s="above"===m?n:a,"none"===b.maxHeight?f=s:(v=parseInt(b.maxHeight,10),f=Math.min(s,v)),u=l.height>f?d=f:l.height,C="above"===m?g.top-u-p.top:g.bottom-p.top,c=g.left+l.width+p.right,h=c>D.right?g.left-(c-D.right)-p.right:g.left-p.right,this.selectElement.style.top=C+"px",this.selectElement.style.left=h+"px",this.selectElement.style.height=d?d+"px":"auto"},e.prototype.show=function(){if(!this.visible)return this.visible=!0,this.selectElement.style.visibility="",this.delegate.didShowResults(this.selectElement)},e.prototype.hide=function(){if(this.visible)return this.visible=!1,this.selectElement.style.visibility="hidden",this.delegate.didHideResults(this.selectElement)},e.prototype.hideWithAnimation=BC.synchronize(function(t){return this.visible?BC.transitionElementWithClass(this.selectElement,"hiding",function(e){return function(){return e.hide(),t()}}(this)):t()}),e.prototype.selectUp=function(){return this.selectElement.selectedIndex--,this.revealOption()},e.prototype.selectDown=function(){return this.selectElement.selectedIndex++,this.revealOption()},e.prototype.revealOption=function(){var t,e,n,i,r,o,a;if(a=this.selectElement.selectedOption){if(r=this.selectElement.scrollTop,o=this.selectElement.clientHeight,i=r+o,n=a.offsetTop,e=a.offsetHeight,t=n+e,n<r)return this.selectElement.scrollTop=n;if(t>i)return this.selectElement.scrollTop=r+(t-i)}},e.prototype.flashSelection=BC.synchronize(function(t){var e;return(e=this.selectElement.selectedOption)?(this.selectElement.classList.add("flashing"),e.flash(function(e){return function(){return e.selectElement.classList.remove("flashing"),t()}}(this))):t()}),e.prototype.updateResults=function(t){return this.selectElement.innerHTML=t.toString().trim(),null!=this.selectElement.selectedIndex?requestAnimationFrame(this.revealOption):this.selectElement.selectedIndex=0},e.prototype.hasResults=function(){return this.selectElement.innerHTML.length>0},e.prototype.getSelectedValue=function(){return this.selectElement.value},e.prototype.getOptionHeight=function(){var t,e;return null!=(t=null!=(e=this.selectElement.optionElements[0])?e.offsetHeight:void 0)?t:0},e.prototype.didMouseDown=function(t){var e;if(e=$(t.target).closest("bc-suggestion-option").get(0))return e.selectElement.selectedOption=e,this.delegate.didClickOption(e),n(t)},n=function(t){return t.preventDefault(),t.stopPropagation()},r=function(t){var e,n,i,r,o,a;for(r={},a=window.getComputedStyle(t),i=["Top","Right","Bottom","Left"],e=0,n=i.length;e<n;e++)o=i[e],r[o.toLowerCase()]=parseInt(a["margin"+o],10);return r},i=function(t){var e,n,i,r;return r=t.top,i=t.right,e=t.bottom,n=t.left,{top:r+window.pageYOffset,right:i+window.pageXOffset,bottom:e+window.pageYOffset,left:n+window.pageXOffset}},o=function(){return{top:window.pageYOffset,right:window.pageXOffset+window.innerWidth,bottom:window.pageYOffset+window.innerHeight,left:window.pageXOffset}},function(t){var e,n,i,r;return r=t.top,i=t.right,e=t.bottom,n=t.left,{x:parseInt((i-n)/2,10),y:parseInt((e-r)/2,10)}},e}()}.call(this),function(){BC.SuggestionSelectElement=BC.registerElement("bc-suggestion-select",{defaultCSS:"%t {\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 1000;\n  cursor: default;\n  overflow-y: auto;\n  -ms-overflow-style: -ms-autohiding-scrollbar;\n}\n\n%t:empty {\n  visibility: hidden;\n}",createdCallback:{value:function(){}},optionElements:{get:function(){return this.querySelectorAll("bc-suggestion-option")}},selectedIndex:{get:function(){var t;return null!=(t=this.querySelector("bc-suggestion-option[selected]"))?t.index:void 0},set:function(t){var e,n,i,r,o,a;if(a=this.optionElements,o=a.length){for(e=0,i=a.length;e<i;e++)r=a[e],r.removeAttribute("selected");if(null!=t)return n=Math.max(0,Math.min(o-1,parseInt(t,10))),a[n].setAttribute("selected","")}}},selectedOption:{get:function(){return this.optionElements[this.selectedIndex]},set:function(t){if(t.selectElement===this)return this.selectedIndex=t.index}},value:{get:function(){var t;return null!=(t=this.selectedOption)?t.value:void 0}}})}.call(this),function(){}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=BC.keyCodes,BC.AutocompleteController=function(){function n(t){var n,i,r;this.element=t,this.createAutocompletablesForSelectedValues=e(this.createAutocompletablesForSelectedValues,this),this.addAutocompletables=e(this.addAutocompletables,this),this.didClickToggleButton=e(this.didClickToggleButton,this),this.didClickUnselectButton=e(this.didClickUnselectButton,this),this.didChangeInputElement=e(this.didChangeInputElement,this),this.didBlurInputElement=e(this.didBlurInputElement,this),this.didFocusInputElement=e(this.didFocusInputElement,this),this.didPressKey=e(this.didPressKey,this),this.didReceiveInput=e(this.didReceiveInput,this),r=this.element,this.inputElement=r.inputElement,this.toggleButton=r.toggleButton,this.element.preload&&(n=JSON.parse(this.element.preload)),i=new BC.AutocompletableCollection(n),this.setCollection(i),BC.fetchAutocompletables(this.element.url).then(this.addAutocompletables).then(this.createAutocompletablesForSelectedValues),BC.handleEvent("input",{on:this.inputElement,"with":this.didReceiveInput}),BC.handleEvent("keydown",{on:this.inputElement,"with":this.didPressKey}),BC.handleEvent("focus",{on:this.inputElement,"with":this.didFocusInputElement}),BC.handleEvent("blur",{on:this.inputElement,"with":this.didBlurInputElement}),BC.handleEvent("change",{on:this.inputElement,"with":this.didChangeInputElement}),BC.handleEvent("mousedown",{on:this.toggleButton,"with":this.didClickToggleButton}),BC.handleEvent("click",{on:this.element,matching:"[data-behavior~=unselect_autocompletable]","with":this.didClickUnselectButton})}return n.prototype.render=function(){return this.clearRenderedAutocompletables(),this.element.insertAdjacentHTML("afterbegin",this.getHTMLForSelectedAutocompletables()),this.element.setAttribute("selected-count",this.getSelectedAutocompletables().length),this.element.setAttribute("unselected-count",this.getUnselectedAutocompletables().length),this.updateElementClassNames(),this.resizeInputElement()},n.prototype.didReceiveInput=function(){return this.updateElementClassNames(),this.resizeInputElement(),this.displaySuggestions()},n.prototype.didPressKey=function(e){if(!this.inputElement.value)switch(e.keyCode){case t.backspace:return this.unselectLastValue();case t.up:case t.down:return this.displaySuggestions()}},n.prototype.didFocusInputElement=function(){return this.updateElementClassNames()},n.prototype.didBlurInputElement=function(){if(!(this.element.selectOnBlur&&this.inputElement.value&&this.commitSuggestion()))return this.cancelSuggestions(),this.updateElementClassNames(),this.resizeInputElement()},n.prototype.didChangeInputElement=function(t){return t.stopPropagation()},n.prototype.didClickUnselectButton=function(t){var e;return t.preventDefault(),t.stopPropagation(),e=BC.closest(t.target,"[data-value]").dataset.value,this.element.unselectValue(e),this.inputElement.focus()},n.prototype.didClickToggleButton=function(t){return t.preventDefault(),t.stopPropagation(),this.element.expanded?this.cancelSuggestions():(this.displaySuggestions(),this.inputElement.focus())},n.prototype.setCollection=function(t){if(!t.isEqualTo(this.collection))return this.collection=t,this.render()},n.prototype.addAutocompletables=function(t){return this.setCollection(this.collection.add(t))},n.prototype.createAutocompletablesForSelectedValues=function(){var t,e,n,i,r;if(this.element.allowCreate){for(n=this.element.selectedValues,i=[],t=0,e=n.length;t<e;t++)r=n[t],this.collection.has(r)?i.push(void 0):i.push(this.addAutocompletables({value:r,name:r}));return i}},n.prototype.getAutocompletables=function(){return this.collection.withoutValues(this.element.excludedValues)},n.prototype.getSelectedAutocompletables=function(){return this.getAutocompletables().withValues(this.element.selectedValues,{sort:!1})},n.prototype.getUnselectedAutocompletables=function(){return this.getAutocompletables().withoutValues(this.element.selectedValues)},n.prototype.characterMatchesWordBoundary=function(){return!1},n.prototype.matchQueryAndTerminatorForWord=function(t){return{query:t,terminator:""}},n.prototype.getOffsetsAtPosition=function(){return this.element.expandable?this.getElementOffsets():this.getInputElementOffsets()},n.prototype.fetchResultsForQuery=function(t,e){var n,i,r,o,a;return i=this.element.multiple?this.getUnselectedAutocompletables():this.getAutocompletables(),t?(n=i.matchingQuery(t).toArray(),this.element.allowCreate&&(n.some(function(e){return e.name===t})||n.push({value:t,name:t,pending:!0}))):(n=i.toArray(),(o=this.element.selectAllOption)&&n.length>1&&n.unshift({value:"select-all",name:o}),this.element.multiple||(a=this.getSelectedAutocompletables().toArray()[0])),r=BC.renderAutocompletableSuggestions(n,{selectedAutocompletable:a}),e(r)},n.prototype.willCommitValueAtRangeWithTerminator=function(t){switch(this.inputElement.value="",this.element.multiple?this.inputElement.focus():this.inputElement.blur(),!1){case"select-all"!==t:return this.element.selectAll();case!this.collection.has(t):return this.element.selectValue(t);case!this.element.allowCreate:return this.addAutocompletables({value:t,name:t}),this.element.selectValue(t)}},n.prototype.didShowResults=function(t){if(this.displayingSuggestions=!0,this.updateElementClassNames(),this.element.reveal&&(t.dataset.autocompletableReveal=this.element.reveal),this.element.suggestionSelectClass&&t.classList.add(this.element.suggestionSelectClass),this.element.expandable)return this.element.expanded=!0,t.style.width=this.getElementOffsets().width+"px"},n.prototype.didHideResults=function(t){if(this.displayingSuggestions=!1,this.updateElementClassNames(),this.element.reveal&&(t.dataset.autocompletableReveal=null),this.element.suggestionSelectClass&&t.classList.remove(this.element.suggestionSelectClass),this.element.expandable)return this.element.expanded=!1,t.style.width=""},n.prototype.displaySuggestions=function(){if(null==this.suggestionController&&(this.suggestionController=new BC.SuggestionController(this)),this.suggestionController.updateWithContentAndPosition(this.inputElement.value,this.inputElement.selectionStart),this.suggestionController.isCanceled()&&this.suggestionController.resumeSuggestion(),!this.suggestionController.isActive())return this.suggestionController.activateSuggestion()},n.prototype.cancelSuggestions=function(){var t;return this.inputElement.value="",null!=(t=this.suggestionController)&&t.destroy(),this.suggestionController=null},n.prototype.commitSuggestion=function(){var t;return null!=(t=this.suggestionController)?t.commitSuggestion():void 0},n.prototype.unselectLastValue=function(){var t,e;if(e=this.element.selectedValues,t=e[e.length-1])return this.element.unselectValue(t),this.cancelSuggestions()},n.prototype.getElementOffsets=function(){return this.element.getBoundingClientRect()},n.prototype.getInputElementOffsets=function(){return this.inputElement.getBoundingClientRect()},n.prototype.resizeInputElement=function(){var t;if(this.element.multiple)return t=this.inputElement.style,this.inputElement.value&&this.element.value?(t.maxWidth="0px",t.width=this.inputElement.scrollWidth+"px",t.maxWidth=null):t.width=null},n.prototype.updateElementClassNames=function(){return this.element.classList.toggle("focused",this.inputElement===document.activeElement),this.element.classList.toggle("has-input",this.inputElement.value),this.element.classList.toggle("displaying-suggestions",!0===this.displayingSuggestions)},n.prototype.clearRenderedAutocompletables=function(){var t,e,n,i,r;for(i=this.element.querySelectorAll("[data-role~=autocompletable]"),r=[],e=0,n=i.length;e<n;e++)t=i[e],r.push(t.parentNode.removeChild(t));return r},n.prototype.getHTMLForSelectedAutocompletables=function(){var t;return t=this.getSelectedAutocompletables().toArray(),BC.renderAutocompletables(t)},n}()}.call(this),function(){BC.registerElement("bc-autocomplete",{defaultCSS:"%t {\n  display: flex;\n  flex-wrap: wrap;\n}\n\n/* Only show input field placeholder when there are no selections */\n%t:not([selected-count='0']) input::-webkit-input-placeholder { opacity: 0; }\n%t:not([selected-count='0']) input::-moz-placeholder { opacity: 0; }\n%t:not([selected-count='0']) input:-ms-input-placeholder { opacity: 0; }\n%t:not([selected-count='0']) input::placeholder { opacity: 0; }\n\n/* Hide current single selection when replacing it */\n%t:not([multiple]).displaying-suggestions .autocompletable,\n%t:not([multiple]).has-input .autocompletable {\n  display: none;\n}\n\n%t .toggle-button {\n  display: none;\n  width: 1em;\n  line-height: 1;\n  cursor: default;\n  outline: none;\n  border: 0;\n  padding: 0;\n  background-color: transparent;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n}\n\n%t[expandable]:not([unselected-count='0']) .toggle-button {\n  display: inline-block;\n}\n\n%t input {\n  flex-grow: 1;\n  width: 1rem;\n  max-width: 100%;\n}",stringAttributes:["exclude","preload","reveal","select-all-option","suggestion-select-class","url","value"],booleanAttributes:["allow-create","expandable","expanded","multiple","required","select-on-blur"],attachedCallback:function(){return BC.ready(function(t){return function(){var e;return t.inputElement=t.querySelector("input[type=text]"),t.inputElement.setAttribute("autocomplete","off"),t.inputElement.setAttribute("autocorrect","off"),t.inputElement.required&&!t.hasAttribute("required")&&(t.required=!0),(t.hiddenInputElement=t.querySelector("input[type=hidden]"))||(e=t.inputElement.name,t.hiddenInputElement=BC.makeElement("input",{type:"hidden",name:e,value:t.value}),t.inputElement.removeAttribute("name"),t.appendChild(t.hiddenInputElement)),(t.toggleButton=t.querySelector(".toggle-button"))||(t.toggleButton=BC.makeElement("button",{type:"button","class":"toggle-button",title:"Toggle"}),t.toggleButton.textContent="\u25be",t.appendChild(t.toggleButton)),null==t.controller&&(t.controller=new BC.AutocompleteController(t)),t.setSelectedValues(t.defaultSelectedValues=t.selectedValues),t.registerResetListener()}}(this))},detachedCallback:function(){return this.unregisterResetListener()},attributeChangedCallback:function(t,e,n){if(null!=e||null!=n)switch(t){case"exclude":return this.setSelectedValues(BC.arrayWithout(this.selectedValues,this.excludedValues));case"value":if(this.value!==this.hiddenInputElement.value)return this.hiddenInputElement.value=this.value,this.controller.render(),BC.triggerEvent(this,"change")}},selectedValues:{get:function(){return this.value?this.multiple?this.value.split(","):[this.value]:[]}},setSelectedValues:function(t){return null==t&&(t=[]),t=BC.uniqueValues(t),this.required&&(this.inputElement.required=0===t.length),this.value=t.join(",")},excludedValues:{get:function(){var t;return(t=this.exclude)?t.split(","):[]}},setExcludedValues:function(t){return null==t&&(t=[]),t=BC.uniqueValues(t),this.exclude=t.join(",")},selectedAutocompletables:{get:function(){return this.controller.getSelectedAutocompletables().toArray()}},unselectedAutocompletables:{get:function(){return this.controller.getUnselectedAutocompletables().toArray()}},selectValue:function(t){var e;return this.multiple?(e=this.selectedValues.concat(t),this.setSelectedValues(e)):this.setSelectedValues([t])},unselectValue:function(t){var e;return e=BC.arrayWithout(this.selectedValues,t),this.setSelectedValues(e)},selectAll:function(){var t,e;if(this.multiple)return t=this.controller.getUnselectedAutocompletables().getValues(),e=this.selectedValues.concat(t),this.setSelectedValues(e)},unselectAll:function(){return this.setSelectedValues([])},excludeValue:function(t){var e;return e=this.excludedValues.concat(t),this.setExcludedValues(e)},unexcludeValue:function(t){var e;return e=BC.arrayWithout(this.excludedValues,t),this.setExcludedValues(e)},addAutocompletables:function(t){return this.controller.addAutocompletables(t)},registerResetListener:function(){return this.resetListener=this.resetBubbled.bind(this),window.addEventListener("reset",this.resetListener,!1)},unregisterResetListener:function(){return window.removeEventListener("reset",this.resetListener,!1)},resetBubbled:function(t){var e;if(t.target===(null!=(e=this.inputElement)?e.form:void 0)&&!t.defaultPrevented)return this.reset()},reset:function(){return this.setSelectedValues(this.defaultSelectedValues)}})}.call(this),function(){var t;t={},addEventListener("turbolinks:visit",function(){return t={}}),BC.fetchAutocompletables=function(e){return e?null!=t[e]?t[e]:t[e]=BC.fetch(e,{as:"json"}):Promise.resolve()},BC.renderAutocompletable=function(t){return JST["bc/inputs/autocomplete/templates/autocompletable"](t)},BC.renderAutocompletables=function(t){return null==t&&(t=[]),t.map(BC.renderAutocompletable).join("\n")},BC.renderAutocompletableSuggestions=function(t,e){var n;return n=(null!=e?e:{}).selectedAutocompletable,JST["bc/inputs/autocomplete/templates/suggestions"]({autocompletables:t,selectedAutocompletable:n})}}.call(this),function(){this.JST||(this.JST={}),this.JST["bc/inputs/autocomplete/templates/autocompletable"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?r(t):""},i=t.safe,r=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<span class="autocompletable '),this.avatar_url&&e.push(n("autocompletable--has-avatar")),e.push(" "),this.status&&e.push(n("autocompletable--"+this.status)),e.push('" data-role="autocompletable" data-value="'),e.push(n(this.value)),e.push('">\n  '),this.avatar_url&&(e.push('\n    <img src="'),e.push(n(this.avatar_url)),e.push('" class="avatar autocompletable__avatar" width="22" height="22">\n  ')),e.push('\n\n  <span class="autocompletable__name">\n    '),e.push(n(this.name)),e.push("\n  </span>\n\n  "),this.email_address&&(e.push('\n    <span class="autocompletable__email_address">\n      '),e.push(n(this.email_address)),e.push("\n    </span>\n  ")),e.push('\n\n  <a href="#" class="autocompletable__unselect" title="Remove" data-behavior="unselect_autocompletable">\xd7</a>\n</span>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["bc/inputs/autocomplete/templates/suggestions"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?r(t):""},i=t.safe,r=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,r,o;for(o=this.autocompletables,i=0,r=o.length;i<r;i++)t=o[i],e.push('\n  <bc-suggestion-option value="'),e.push(n(t.value)),e.push('" '),t===this.selectedAutocompletable&&e.push(n("selected")),e.push(">\n    "),t.pending?(e.push("\n      Add <strong>"),e.push(n(t.name)),e.push("\u2026</strong>\n    ")):(e.push("\n      "),e.push(BC.renderAutocompletable(t)),e.push("\n    ")),e.push("\n  </bc-suggestion-option>\n");e.push("\n")}).call(this)}.call(t),t.safe=i,t.escape=r,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["bc/inputs/color/templates/field"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?r(t):""},i=t.safe,r=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<label class="color-picker__field" data-role="color_picker_field">\n  <input class="color-picker__input" data-role="color_picker_input" type="radio" name="'),e.push(n(this.name)),e.push('" value="'),e.push(n(this.color)),e.push('" '),this.checked&&e.push("checked"),e.push('>\n  <span class="color-picker__swatch" data-role="color_picker_swatch" style="background-color: '),e.push(n(this.color)),e.push("; color: "),e.push(n(this.color)),e.push('"></span>\n</label>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["bc/inputs/color/templates/fields"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,n,i,r;for(r=this.colorList,n=0,i=r.length;n<i;n++)t=r[n],e.push("\n  "),e.push(JST["bc/inputs/color/templates/field"]({name:this.name,color:t,checked:t===this.value})),e.push("\n");e.push("\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){BC.registerElement("bc-color-picker",{defaultCSS:"%t,\n%t .color-picker__field {\n  display: inline-block;\n}\n\n%t .color-picker__field {\n  position: relative;\n  min-width: 1em;\n  min-height: 1em;\n}",stringAttributes:["color","name"],attachedCallback:function(){if(!this.installed)return this.installed=!0,this.innerHTML=JST["bc/inputs/color/templates/fields"]({name:this.name,value:this.value,colorList:this.colorList}),this.hasAttribute("value")&&(this.value=this.getAttribute("value"),this.removeAttribute("value")),this.addEventListener("change",function(t){return function(e){var n;if((n=e.target)!==t)return e.stopImmediatePropagation(),t.value=t.valueChangedTo=n.value,requestAnimationFrame(function(){return t.valueChangedTo=null}),BC.triggerEvent(t,"change")}}(this)),this.addEventListener("click",function(t){return function(e){var n;if(n=e.target,n.checked)return BC.defer(function(){if(n.checked&&n.value!==t.valueChangedTo)return t.value="",BC.triggerEvent(t,"change")})}}(this))},value:{
get:function(){var t,e;return null!=(t=null!=(e=this.querySelector("input:checked"))?e.value:void 0)?t:""},set:function(t){var e;if(t){if(e=this.querySelector("input[value='"+t+"']:not(:checked)"))return e.checked=!0}else if(e=this.querySelector("input:checked"))return e.checked=!1}},colorList:{get:function(){var t;return t=document.createElement("div"),t.className=this.color,t.classList}}})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};BC.DateInputController=function(){function e(e){this.element=e,this.pickerDidClose=t(this.pickerDidClose,this),this.pickerDidSelect=t(this.pickerDidSelect,this),this.pickerWillOpen=t(this.pickerWillOpen,this),this.installPicker(),this.setDateInPickerFromElement()}var n;return n="D, M d, yy",e.prototype.pickerWillOpen=function(){return this.element.isOpen=!0},e.prototype.pickerDidSelect=function(){return BC.triggerEvent(this.element,"before-change"),this.ignoreElementValueChanges(function(t){return function(){return t.element.date=t.getDateFromPicker()}}(this)),BC.triggerEvent(this.element,"change")},e.prototype.pickerDidClose=function(){return this.element.isOpen=!1},e.prototype.elementDidChangeValue=function(){if(!this.isIgnoringElementValueChanges)return this.setDateInPickerFromElement()},e.prototype.openPicker=function(){return BC.defer(function(t){return function(){return $(t.element.trigger).datepicker("show")}}(this))},e.prototype.ignoreElementValueChanges=function(t){return this.isIgnoringElementValueChanges=!0,t(),this.isIgnoringElementValueChanges=!1},e.prototype.setDateInPickerFromElement=function(){return this.setDateInPicker(this.element.date)},e.prototype.getDateFromPicker=function(){var t;if(null!=(t=$(this.element.trigger).datepicker("getDate")))return CalendarDate.parse(t)},e.prototype.setDateInPicker=function(t){return BC.defer(function(e){return function(){if($(e.element.trigger).datepicker("setDate",null!=t?t.getLocalDate():void 0),null!=$.datepicker._curInst)return $.datepicker._updateDatepicker($.datepicker._curInst)}}(this))},e.prototype.installPicker=function(){return $(this.element.trigger).datepicker({dateFormat:n,beforeShow:this.pickerWillOpen,onSelect:this.pickerDidSelect,onClose:this.pickerDidClose,firstDay:parseInt(BC.current.person.firstWeekDayInt,10),defaultDate:CalendarDate.today().getLocalDate()})},e}()}.call(this),function(){var t,e,n,i,r,o;BC.DateInputElement=BC.registerElement("bc-date-picker",{defaultCSS:"%t { display: inline-block; }",attachedCallback:function(){return BC.ready(function(t){return function(){return t.input=i(t),t.trigger=r(t),t.controller=new BC.DateInputController(t),t.setAttribute("initialized","")}}(this))},name:{get:function(){return this.getAttribute("name")}},value:{get:function(){return this.getAttribute("value")},set:function(t){var e,n,i;return null!=t?(this.setAttribute("value",t),null!=(e=this.input)&&e.setAttribute("value",t)):(this.removeAttribute("value"),null!=(n=this.input)&&n.removeAttribute("value",t)),null!=(i=this.controller)?i.elementDidChangeValue():void 0}},date:{get:function(){if(null!=this.value)return CalendarDate.parse(this.value)},set:function(t){return this.value=null!=t?t.toString():void 0}},open:function(){var t;return null!=(t=this.controller)?t.openPicker():void 0},shake:function(){return BC.shakeElement(this.trigger)}}),i=function(e){var i;return null!=(i=n(e))?i:t(e)},n=function(t){return t.querySelector("input[type=hidden]")},t=function(t){var e,n;if(null!=t.name)return e=BC.makeElement("input",{type:"hidden",name:t.name,value:null!=(n=t.value)?n:""}),t.appendChild(e),e},r=function(t){var n;return null!=(n=o(t))?n:e(t)},o=function(t){return t.querySelector("input:not([type=hidden])")},e=function(t){var e;return e=BC.makeElement("input",{type:"text","class":"input"}),e.readOnly=!0,t.appendChild(e),e}}.call(this),function(){BC.DatetimeInputElement=BC.registerElement("bc-datetime-picker",{defaultCSS:"%t { display: inline-block; }",attachedCallback:function(){return BC.ready(function(t){return function(){return t.getChildElements(function(e){return t.datePicker=e.datePicker,t.timePicker=e.timePicker,t.setAttribute("initialized","")})}}(this))},name:{get:function(){return this.getAttribute("name")}},dateTime:{get:function(){if(null!=this.date&&null!=this.time)return new CalendarDateTime(this.date,this.time)},set:function(t){return this.date=null!=t?t.calendarDate:void 0,this.time=null!=t?t.calendarTime:void 0}},date:{get:function(){return this.datePicker.date},set:function(t){return this.datePicker.date=t}},time:{get:function(){return this.timePicker.time},set:function(t){return this.timePicker.time=t}},shake:function(){return this.datePicker.shake(),this.timePicker.shake()},getChildElements:function(t){var e,n;return e=this.querySelector("bc-date-picker[initialized], bc-relative-date-input[initialized]"),n=this.querySelector("bc-time-picker[initialized]"),null!=e&&null!=n?t({datePicker:e,timePicker:n}):requestAnimationFrame(function(e){return function(){return e.getChildElements(t)}}(this))}})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};BC.RelativeDateInputController=function(){function e(e){this.element=e,this.didSelectDate=t(this.didSelectDate,this),this.didClick=t(this.didClick,this),this.didFocusTrigger=t(this.didFocusTrigger,this),this.setStartDate(),this.installClickListener(),this.installTriggerListeners(),this.installPickerElement()}return e.prototype.setStartDate=function(){if(this.element.dataset.startDate)return this.startDate=CalendarDate.parse(this.element.dataset.startDate)},e.prototype.destroy=function(){return this.uninstallClickListener()},e.prototype.didFocusTrigger=function(){return this.openPicker()},e.prototype.didClick=function(t){return this.element.contains(t.target)?t.preventDefault():this.pickerElement.hide()},e.prototype.didSelectDate=function(t){return this.validateDate(t.target.date)?(BC.triggerEvent(this.element,"before-change"),this.element.date=t.target.date,BC.triggerEvent(this.element,"change")):this.element.shake()},e.prototype.openPicker=function(){return this.pickerElement.date=this.element.date,this.pickerElement.show()},e.prototype.installClickListener=function(){return window.addEventListener("click",this.didClick)},e.prototype.uninstallClickListener=function(){return window.removeEventListener("click",this.didClick)},e.prototype.installTriggerListeners=function(){return this.element.trigger.addEventListener("focus",this.didFocusTrigger)},e.prototype.installPickerElement=function(){return this.pickerElement=this.createPickerElement(),this.element.appendChild(this.pickerElement),this.pickerElement.addEventListener("date-selected",this.didSelectDate)},e.prototype.createPickerElement=function(){var t;return t=document.createElement("div"),t.innerHTML=JST["bc/inputs/relative_date/picker"](),t.firstChild},e.prototype.validateDate=function(t){return null==this.startDate||t.daysSince(this.startDate)>=1},e}()}.call(this),function(){var t,e,n,i,r,o;BC.RelativeDateInputElement=BC.registerElement("bc-relative-date-input",{defaultCSS:"%t { display: inline-block; }",attachedCallback:function(){return BC.ready(function(t){return function(){return t.input=i(t),t.trigger=r(t),t.valueDidChange(),t.controller=new BC.RelativeDateInputController(t),t.setAttribute("initialized","")}}(this))},name:{get:function(){return this.getAttribute("name")}},value:{get:function(){return this.getAttribute("value")},set:function(t){var e,n;return null!=t?(this.setAttribute("value",t),null!=(e=this.input)&&e.setAttribute("value",t)):(this.removeAttribute("value"),null!=(n=this.input)&&n.removeAttribute("value")),this.valueDidChange()}},date:{get:function(){if(null!=this.value)return CalendarDate.parse(this.value)},set:function(t){return this.value=null!=t?t.toString():void 0}},week:{get:function(){if(this.date)return this.date.weeksSince(BC.TEMPLATE_BASE_DATE)+1}},shake:function(){return BC.shakeElement(this.trigger)},open:function(){var t;return null!=(t=this.controller)?t.openPicker():void 0},valueDidChange:function(){return this.trigger.readOnly=!1,null!=this.date?this.trigger.value="Week "+this.week+", "+this.date.getWeekdayName():this.trigger.value="",this.trigger.readOnly=!0}}),i=function(e){var i;return null!=(i=n(e))?i:t(e)},n=function(t){return t.querySelector("input[type=hidden]")},t=function(t){var e,n;if(null!=t.name)return e=BC.makeElement("input",{type:"hidden",name:t.name,value:null!=(n=t.value)?n:""}),t.appendChild(e),e},r=function(t){var n;return null!=(n=o(t))?n:e(t)},o=function(t){return t.querySelector("input")},e=function(t){var e;return e=BC.makeElement("input",{type:"text","class":"input"}),e.readOnly=!0,t.appendChild(e),e}}.call(this),function(){this.JST||(this.JST={}),this.JST["bc/inputs/relative_date/picker"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<bc-relative-date-picker class="relative-datepicker">\n  <div class="ui-datepicker-header ui-widget-header ui-helper-clearfix ui-corner-all">\n    <a class="ui-datepicker-prev ui-corner-all" data-role="previous-week" title="Prev">\n      <span class="ui-icon ui-icon-circle-triangle-w">Prev</span>\n    </a>\n    <a class="ui-datepicker-next ui-corner-all" data-role="next-week" title="Next">\n      <span class="ui-icon ui-icon-circle-triangle-e">Next</span>\n    </a>\n    <div class="ui-datepicker-title">\n      <span class="ui-datepicker-month" data-role="week-name">Week 0</span>\n    </div>\n  </div>\n\n  <div class="relative-datepicker__days" data-role="days-list">\n    '),e.push('\n    <a href="#" class="relative-datepicker__day" data-role="day">Monday</a>\n  </div>\n</bc-relative-date-picker>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};BC.RelativeDatePickerController=function(){function e(e){this.element=e,this.didClick=t(this.didClick,this),this.installClickListener()}return e.prototype.destroy=function(){return this.uninstallClickListener()},e.prototype.didClick=function(t){return BC.matches(t.target,"[data-role=previous-week]")?this.element.showPreviousWeek():BC.matches(t.target,"[data-role=next-week]")?this.element.showNextWeek():BC.matches(t.target,"[data-role=day]")&&(this.element.date=t.target.date,BC.triggerEvent(this.element,"date-selected")),t.preventDefault()},e.prototype.installClickListener=function(){return this.element.addEventListener("click",this.didClick)},e.prototype.uninstallClickListener=function(){return this.element.removeEventListener("click",this.didClick)},e}()}.call(this),function(){BC.RelativeDatePickerElement=BC.registerElement("bc-relative-date-picker",{defaultCSS:"%t { display: inline-block; }",attachedCallback:function(){return BC.ready(function(t){return function(){return t.controller=new BC.RelativeDatePickerController(t),t.weekNameElement=t.querySelector("[data-role=week-name]"),t.daysContainerElement=t.querySelector("[data-role=days-list]"),t.dayElement=t.querySelector("[data-role=day]"),t.previousArrowElement=t.querySelector("[data-role=previous-week]"),t.setAttribute("initialized",""),t.hide()}}(this))},date:{set:function(t){return this.chosenDate=t,this.visibleDate=t},get:function(){return this.chosenDate}},showPreviousWeek:function(){if(!(this.week<=1))return this.visibleDate=this.visibleDate.previous(7)},showNextWeek:function(){return this.visibleDate=this.visibleDate.next(7)},week:{get:function(){return this.visibleDate.weeksSince(BC.TEMPLATE_BASE_DATE)+1}},show:function(){var t;return null!=(t=this.style)?t.display="block":void 0},hide:function(){var t;return null!=(t=this.style)?t.display="none":void 0},visibleDate:{get:function(){return this._visibleDate||BC.TEMPLATE_BASE_DATE},set:function(t){return this._visibleDate=t,this.dateDidChange()}},dateDidChange:function(){return this.updateWeekName(),this.updateDays(),this.updatePreviousArrow()},updateWeekName:function(){var t;return null!=(t=this.weekNameElement)?t.textContent="Week "+this.week:void 0},updateDays:function(){for(var t,e,n,i,r,o,a;t=this.daysContainerElement.firstChild;)this.daysContainerElement.removeChild(t);for(a=[],r=i=0;i<=6;r=++i)e=this.visibleDate.beginningOfWeek().next(r),n=this.dayElement.cloneNode(!0),n.date=e,n.textContent=e.getWeekdayName(),e.toString()===(null!=(o=this.chosenDate)?o.toString():void 0)&&n.classList.add("relative-datepicker__day--active"),a.push(this.daysContainerElement.appendChild(n));return a},updatePreviousArrow:function(){return this.week<2?this.previousArrowElement.classList.add("ui-datepicker-prev--disabled"):this.previousArrowElement.classList.remove("ui-datepicker-prev--disabled")}})}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};BC.SegmentedInputController=function(){function n(t){var n;this.element=t,this.dummyDidFocus=e(this.dummyDidFocus,this),this.didPressKey=e(this.didPressKey,this),n=this.element,this.dummyElement=n.dummyElement,this.inputElement=n.inputElement,this.fieldElements=n.fieldElements}return n.prototype.initialize=function(){return this.installListeners(),this.autofocus(),this.initiallyDisable()},n.prototype.destroy=function(){return this.uninstallListeners()},n.prototype.push=function(t){var e;if(e=this.fieldElements[this.getIndex()])return e.value=""+t,this.setValue(""+this.getValue()+t)},n.prototype.pop=function(){var t;if(t=this.fieldElements[this.getIndex()-1])return t.value="",this.setValue(this.getValue().slice(0,-1))},n.prototype.reset=function(){var t;for(t=[];this.getIndex();)t.push(this.pop());return t},n.prototype.getIndex=function(){return this.getValue().length},n.prototype.getValue=function(){return""+this.inputElement.value},n.prototype.setValue=function(e){var n;return this.inputElement.value=e,(n=this.fieldElements[this.getIndex()])?(this.dummyElement.style.left=t(n)+"px",this.dummyElement.style.opacity=""):(this.dummyElement.blur(),this.dummyElement.style.opacity="0"),this.triggerCompletedEvent()},n.prototype.getSize=function(){return this.fieldElements.length},n.prototype.isCompleted=function(){return this.getIndex()===this.getSize()},n.prototype.didPressKey=function(t){var e,n;if(48<=(e=t.keyCode)&&e<=57)this.didPressNumericKey(t.keyCode-48);else if(96<=(n=t.keyCode)&&n<=105)this.didPressNumericKey(t.keyCode-96);else if(8===t.keyCode)this.didPressBackspaceKey();else{if(27!==t.keyCode)return;this.didPressEscapeKey()}return t.preventDefault()},n.prototype.didPressNumericKey=function(t){return this.push(t)},n.prototype.didPressBackspaceKey=function(){return this.pop()},n.prototype.didPressEscapeKey=function(){return this.reset()},n.prototype.dummyDidFocus=function(){return this.element.disabled?this.dummyElement.blur():this.isCompleted()?this.reset():void 0},n.prototype.didClick=function(){return this.dummyElement.focus()},n.prototype.installListeners=function(){return this.dummyElement.addEventListener("focus",this.dummyDidFocus),this.element.addEventListener("keydown",this.didPressKey),this.element.addEventListener("click",this.didClick),this.element.addEventListener("keypress",this.suppress),this.element.addEventListener("input",this.suppress),this.element.addEventListener("paste",this.suppress)},n.prototype.autofocus=function(){if(this.element.autofocus)return this.dummyElement.focus()},n.prototype.initiallyDisable=function(){if(this.element.disabled)return this.element.disable()},n.prototype.uninstallListeners=function(){return this.dummyElement.removeEventListener("focus",this.dummyDidFocus),this.element.removeEventListener("keydown",this.didPressKey),this.element.removeEventListener("click",this.didClick),this.element.removeEventListener("keypress",this.suppress),this.element.removeEventListener("input",this.suppress),this.element.removeEventListener("paste",this.suppress)},n.prototype.triggerCompletedEvent=function(){if(this.isCompleted())return BC.triggerEvent(this.element,"completed")},n}(),t=function(t){var e,n;return n=t.offsetParent.getBoundingClientRect(),e=t.getBoundingClientRect(),e.left-n.left}}.call(this),function(){var t;t=0,BC.registerElement("bc-segmented-input",{attachedCallback:function(){return null==this.controller&&(this.controller=new BC.SegmentedInputController(this)),this.controller.initialize()},detachedCallback:function(){var t;return null!=(t=this.controller)?t.destroy():void 0},size:{get:function(){return this.getAttribute("size")}},autofocus:{get:function(){return this.hasAttribute("autofocus")}},identifier:{get:function(){return this.hasAttribute("identifier")?this.getAttribute("identifier"):(this.setAttribute("identifier",t++),this.identifier)}},disabled:{get:function(){return this.hasAttribute("disabled")}},inputElement:{get:function(){var t;return this.hasAttribute("input")?document.getElementById(this.getAttribute("input")):(t=BC.makeElement("input",{type:"hidden",id:"segmented_input_"+this.identifier}),this.setAttribute("input",t.id),this.parentElement.insertBefore(t,this.nextElementSibling))}},dummyElement:{get:function(){var t;return this.hasAttribute("dummy")?document.getElementById(this.getAttribute("dummy")):(t=BC.makeElement("input",{type:"tel",id:"segmented_input_dummy_"+this.identifier,pattern:"[0-9]*",size:"1",maxlength:"0",autocomplete:"off","class":"input centered segmented-input__dummy"}),this.setAttribute("dummy",t.id),this.appendChild(t))}},labelElement:{get:function(){var t;return this.hasAttribute("label")?document.getElementById(this.getAttribute("label")):(t=BC.makeElement("label",{id:"segmented_input_label_"+this.identifier,"for":this.dummyElement.id,"class":"segmented-input__label"}),this.setAttribute("label",t.id),this.insertBefore(t,this.dummyElement.nextElementSibling))}},fieldElements:{get:function(){var t,e,n,i,r;if(e=this.labelElement.querySelectorAll("[data-role=field]"),e.length)return e;for(r=[],n=0,i=this.size;0<=i?n<i:n>i;0<=i?++n:--n)t=BC.makeElement("input",{type:"text",disabled:"disabled",size:"1","class":"input centered segmented-input__field","data-role":"field"}),r.push(this.labelElement.appendChild(t));return r}},disable:function(){return this.setAttribute("disabled",""),this.dummyElement.blur(),this.dummyElement.style.opacity="0"},enable:function(){return this.removeAttribute("disabled"),this.dummyElement.style.opacity=""}})}.call(this),function(){}.call(this),function(){}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};BC.TimeInputController=function(){function n(e){this.element=e,this.didClickOption=t(this.didClickOption,this),this.didClick=t(this.didClick,this),this.didChangeInput=t(this.didChangeInput,this),this.didFocusInput=t(this.didFocusInput,this),this.input=this.element.input,this.installClickListener(),this.installInputListeners()}var i;return i=function(){var t,e,n,i,r,o,a,s,u,l,c,d,h;for(h=[],l=["am","pm"],e=0,r=l.length;e<r;e++)for(u=l[e],c=[12].concat([1,2,3,4,5,6,7,8,9,10,11]),n=0,o=c.length;n<o;n++)for(t=c[n],d=["00","30"],i=0,a=d.length;i<a;i++)s=d[i],h.push(t+":"+s+u);return h}(),n.prototype.destroy=function(){return this.uninstallClickListener()},n.prototype.didFocusInput=function(){return this.revealOptions(),this.scrollToCurrentOption()},n.prototype.didChangeInput=function(){return this.element.time=this.parseTimeFromInput(),this.hideOptions()},n.prototype.didClick=function(t){return this.element.contains(t.target)?t.preventDefault():this.hideOptions()},n.prototype.didClickOption=function(t){if("option"===t.target.getAttribute("data-role"))return this.element.time=CalendarTime.parse(t.target.textContent),this.hideOptions(),BC.triggerEvent(this.element,"change")},n.prototype.installClickListener=function(){return window.addEventListener("click",this.didClick)},n.prototype.uninstallClickListener=function(){return window.removeEventListener("click",this.didClick)},n.prototype.installInputListeners=function(){return this.input.addEventListener("focus",this.didFocusInput),this.input.addEventListener("change",this.didChangeInput)},n.prototype.parseTimeFromInput=function(){var t,n,i;return i=function(){try{if(null!=this.input.value)return CalendarTime.parse(this.input.value)}catch(t){}}.call(this),t=null!=i?i.hour:void 0,e.call([8,9,10,11],t)>=0||(null!=(n=this.input.value)?n.match(/[ap]/i):void 0)||null!=i&&(i.hour+=12),i},n.prototype.hideOptions=function(){var t;return null!=(t=this.optionsElement)?t.style.display="none":void 0},n.prototype.revealOptions=function(){return null==this.optionsElement&&(this.optionsElement=this.createAndPopulateOptionsElement(),this.element.appendChild(this.optionsElement),this.optionsElement.addEventListener("click",this.didClickOption)),this.optionsElement.style.display="block"},n.prototype.createAndPopulateOptionsElement=function(){var t,e,n,r,o;for(o=document.createElement("ul"),o.classList.add("time-picker__options"),t=0,e=i.length;t<e;t++)n=i[t],r=document.createElement("li"),r.classList.add("time-picker__item"),r.setAttribute("data-role","option"),r.textContent=n,r.dataset.option=CalendarTime.parse(n),o.appendChild(r);return o},n.prototype.scrollToCurrentOption=function(){var t;return null!=(t=this.optionsElement)?t.scrollTop=this.scrollOffsetToCenterCurrentOption():void 0},n.prototype.scrollOffsetToCenterCurrentOption=function(){var t,e,n;if(t=this.findCurrentOptionElement())return n=this.optionsElement.getBoundingClientRect().height,e=t.getBoundingClientRect().height,t.offsetTop-Math.floor(n/2)+Math.floor(e/2)},n.prototype.findCurrentOptionElement=function(){var t;if(null!=this.element.time)return null!=(t=this.optionsElement)?t.querySelector("li[data-option='"+this.element.time.toString()+"']"):void 0},n}()}.call(this),function(){var t;BC.TimeInputElement=BC.registerElement("bc-time-picker",{defaultCSS:"%t { display: inline-block; }",attachedCallback:function(){return BC.ready(function(e){return function(){return e.input=t(e),e.controller=new BC.TimeInputController(e),e.time=e.controller.parseTimeFromInput(),e.setAttribute("initialized","")}}(this))},detachedCallback:function(){var t;return null!=(t=this.controller)?t.destroy():void 0},value:{get:function(){return this.getAttribute("value")},set:function(t){return this.setAttribute("value",t)}},time:{get:function(){try{if(null!=this.value)return CalendarTime.parse(this.value)}catch(t){}},set:function(t){var e;return this.value=null!=t?t:"",this.input.value=null!=(e=null!=t?t.toFriendlyString():void 0)?e:""}},shake:function(){return BC.shakeElement(this.input)}}),t=function(t){var e;return(e=t.querySelector("input"))||(e=document.createElement("input"),e.type="text",e.classList.add("input"),t.appendChild(e)),e}}.call(this),function(){var t,e;(t=document.querySelector("meta[name=cable-url]"))&&(e=t.getAttribute("content"),BC.cable=ActionCable.createConsumer(e))}.call(this),function(){var t=function(t){"use strict";function e(t){if(t.paused||t.ended||g)return!1;try{c.clearRect(0,0,u,s),c.drawImage(t,0,0,u,s)}catch(t){}y=setTimeout(function(){e(t)},$.duration),T.setIcon(l)}function n(t){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(e,function(t,e,n,i){return e+e+n+n+i+i});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return!!n&&{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}}function i(t,e){var n,i={};for(n in t)i[n]=t[n];for(n in e)i[n]=e[n];return i}function r(){return C.hidden||C.msHidden||C.webkitHidden||C.mozHidden}t=t||{};var o,a,s,u,l,c,d,h,p,f,m,g,v,b,y,C,D={bgColor:"#d00",textColor:"#fff",fontFamily:"sans-serif",fontStyle:"bold",type:"circle",position:"down",animation:"slide",elementId:!1,element:null,dataUrl:!1,win:window};v={},v.ff="undefined"!=typeof InstallTrigger,v.chrome=!!window.chrome,v.opera=!!window.opera||navigator.userAgent.indexOf("Opera")>=0,v.ie=!1,v.safari=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,v.supported=v.chrome||v.ff||v.opera;var _=[];m=function(){},h=g=!1;var E=function(){o=i(D,t),o.bgColor=n(o.bgColor),o.textColor=n(o.textColor),o.position=o.position.toLowerCase(),o.animation=$.types[""+o.animation]?o.animation:D.animation,C=o.win.document;var e=o.position.indexOf("up")>-1,r=o.position.indexOf("left")>-1;if(e||r)for(var h in $.types)for(var p=0;p<$.types[h].length;p++){var f=$.types[h][p];e&&(f.y<.6?f.y=f.y-.4:f.y=f.y-2*f.y+(1-f.w)),r&&(f.x<.6?f.x=f.x-.4:f.x=f.x-2*f.x+(1-f.h)),$.types[h][p]=f}o.type=B[""+o.type]?o.type:D.type,a=T.getIcon(),l=document.createElement("canvas"),d=document.createElement("img"),a.hasAttribute("href")?(d.setAttribute("crossOrigin","anonymous"),d.onload=function(){s=d.height>0?d.height:32,u=d.width>0?d.width:32,l.height=s,l.width=u,c=l.getContext("2d"),w.ready()},d.setAttribute("src",a.getAttribute("href"))):(s=32,u=32,d.height=s,d.width=u,l.height=s,l.width=u,c=l.getContext("2d"),w.ready())},w={};w.ready=function(){h=!0,w.reset(),m()},w.reset=function(){h&&(_=[],p=!1,f=!1,c.clearRect(0,0,u,s),c.drawImage(d,0,0,u,s),T.setIcon(l),window.clearTimeout(b),window.clearTimeout(y))},w.start=function(){if(h&&!f){var t=function(){p=_[0],f=!1,_.length>0&&(_.shift(),w.start())};if(_.length>0){f=!0;var e=function(){["type","animation","bgColor","textColor","fontFamily","fontStyle"].forEach(function(t){t in _[0].options&&(o[t]=_[0].options[t])}),$.run(_[0].options,function(){t()},!1)};p?$.run(p.options,function(){e()},!0):e()}}};var B={},S=function(t){return t.n="number"==typeof t.n?Math.abs(0|t.n):t.n,t.x=u*t.x,t.y=s*t.y,t.w=u*t.w,t.h=s*t.h,t.len=(""+t.n).length,t};B.circle=function(t){t=S(t);var e=!1;2===t.len?(t.x=t.x-.4*t.w,t.w=1.4*t.w,e=!0):t.len>=3&&(t.x=t.x-.65*t.w,t.w=1.65*t.w,e=!0),c.clearRect(0,0,u,s),c.drawImage(d,0,0,u,s),c.beginPath(),c.font=o.fontStyle+" "+Math.floor(t.h*(t.n>99?.85:1))+"px "+o.fontFamily,c.textAlign="center",e?(c.moveTo(t.x+t.w/2,t.y),c.lineTo(t.x+t.w-t.h/2,t.y),c.quadraticCurveTo(t.x+t.w,t.y,t.x+t.w,t.y+t.h/2),c.lineTo(t.x+t.w,t.y+t.h-t.h/2),c.quadraticCurveTo(t.x+t.w,t.y+t.h,t.x+t.w-t.h/2,t.y+t.h),c.lineTo(t.x+t.h/2,t.y+t.h),c.quadraticCurveTo(t.x,t.y+t.h,t.x,t.y+t.h-t.h/2),c.lineTo(t.x,t.y+t.h/2),c.quadraticCurveTo(t.x,t.y,t.x+t.h/2,t.y)):c.arc(t.x+t.w/2,t.y+t.h/2,t.h/2,0,2*Math.PI),c.fillStyle="rgba("+o.bgColor.r+","+o.bgColor.g+","+o.bgColor.b+","+t.o+")",c.fill(),c.closePath(),c.beginPath(),c.stroke(),c.fillStyle="rgba("+o.textColor.r+","+o.textColor.g+","+o.textColor.b+","+t.o+")","number"==typeof t.n&&t.n>999?c.fillText((t.n>9999?9:Math.floor(t.n/1e3))+"k+",Math.floor(t.x+t.w/2),Math.floor(t.y+t.h-.2*t.h)):c.fillText(t.n,Math.floor(t.x+t.w/2),Math.floor(t.y+t.h-.15*t.h)),c.closePath()},B.rectangle=function(t){t=S(t);2===t.len?(t.x=t.x-.4*t.w,t.w=1.4*t.w):t.len>=3&&(t.x=t.x-.65*t.w,t.w=1.65*t.w),c.clearRect(0,0,u,s),c.drawImage(d,0,0,u,s),c.beginPath(),c.font=o.fontStyle+" "+Math.floor(t.h*(t.n>99?.9:1))+"px "+o.fontFamily,c.textAlign="center",c.fillStyle="rgba("+o.bgColor.r+","+o.bgColor.g+","+o.bgColor.b+","+t.o+")",c.fillRect(t.x,t.y,t.w,t.h),c.fillStyle="rgba("+o.textColor.r+","+o.textColor.g+","+o.textColor.b+","+t.o+")","number"==typeof t.n&&t.n>999?c.fillText((t.n>9999?9:Math.floor(t.n/1e3))+"k+",Math.floor(t.x+t.w/2),Math.floor(t.y+t.h-.2*t.h)):c.fillText(t.n,Math.floor(t.x+t.w/2),Math.floor(t.y+t.h-.15*t.h)),c.closePath()};var k=function(t,e){e=("string"==typeof e?{animation:e}:e)||{},m=function(){try{if("number"==typeof t?t>0:""!==t){var i={type:"badge",options:{n:t}};if("animation"in e&&$.types[""+e.animation]&&(i.options.animation=""+e.animation),"type"in e&&B[""+e.type]&&(i.options.type=""+e.type),["bgColor","textColor"].forEach(function(t){t in e&&(i.options[t]=n(e[t]))}),["fontStyle","fontFamily"].forEach(function(t){t in e&&(i.options[t]=e[t])}),_.push(i),_.length>100)throw new Error("Too many badges requests in queue.");w.start()}else w.reset()}catch(t){throw new Error("Error setting badge. Message: "+t.message)}},h&&m()},A=function(t){m=function(){try{var e=t.width,n=t.height,i=document.createElement("img"),r=e/u<n/s?e/u:n/s;i.setAttribute("crossOrigin","anonymous"),i.onload=function(){c.clearRect(0,0,u,s),c.drawImage(i,0,0,u,s),T.setIcon(l)},i.setAttribute("src",t.getAttribute("src")),i.height=n/r,i.width=e/r}catch(t){throw new Error("Error setting image. Message: "+t.message)}},h&&m()},F=function(t){m=function(){try{if("stop"===t)return g=!0,w.reset(),void(g=!1);t.addEventListener("play",function(){e(this)},!1)}catch(t){throw new Error("Error setting video. Message: "+t.message)}},h&&m()},x=function(t){if(window.URL&&window.URL.createObjectURL||(window.URL=window.URL||{},window.URL.createObjectURL=function(t){return t}),v.supported){var n=!1;navigator.getUserMedia=navigator.getUserMedia||navigator.oGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia||navigator.webkitGetUserMedia,m=function(){try{if("stop"===t)return g=!0,w.reset(),void(g=!1);n=document.createElement("video"),n.width=u,n.height=s,navigator.getUserMedia({video:!0,audio:!1},function(t){n.src=URL.createObjectURL(t),n.play(),e(n)},function(){})}catch(t){throw new Error("Error setting webcam. Message: "+t.message)}},h&&m()}},T={};T.getIcon=function(){var t=!1,e=function(){for(var t=C.getElementsByTagName("head")[0].getElementsByTagName("link"),e=t.length,n=e-1;n>=0;n--)if(/(^|\s)icon(\s|$)/i.test(t[n].getAttribute("rel")))return t[n];return!1};return o.element?t=o.element:o.elementId?(t=C.getElementById(o.elementId),t.setAttribute("href",t.getAttribute("src"))):!1===(t=e())&&(t=C.createElement("link"),t.setAttribute("rel","icon"),C.getElementsByTagName("head")[0].appendChild(t)),t.setAttribute("type","image/png"),t},T.setIcon=function(t){var e=t.toDataURL("image/png");if(o.dataUrl&&o.dataUrl(e),o.element)o.element.setAttribute("href",e),o.element.setAttribute("src",e);else if(o.elementId){var n=C.getElementById(o.elementId);n.setAttribute("href",e),n.setAttribute("src",e)}else if(v.ff||v.opera){var i=a;a=C.createElement("link"),v.opera&&a.setAttribute("rel","icon"),a.setAttribute("rel","icon"),a.setAttribute("type","image/png"),C.getElementsByTagName("head")[0].appendChild(a),a.setAttribute("href",e),i.parentNode&&i.parentNode.removeChild(i)}else a.setAttribute("href",e)};var $={};return $.duration=40,$.types={},$.types.fade=[{x:.4,y:.4,w:.6,h:.6,o:0},{x:.4,y:.4,w:.6,h:.6,o:.1},{x:.4,y:.4,w:.6,h:.6,o:.2},{x:.4,y:.4,w:.6,h:.6,o:.3},{x:.4,y:.4,w:.6,h:.6,o:.4},{x:.4,y:.4,w:.6,h:.6,o:.5},{x:.4,y:.4,w:.6,h:.6,o:.6},{x:.4,y:.4,w:.6,h:.6,o:.7},{x:.4,y:.4,w:.6,h:.6,o:.8},{x:.4,y:.4,w:.6,h:.6,o:.9},{x:.4,y:.4,w:.6,h:.6,o:1}],$.types.none=[{x:.4,y:.4,w:.6,h:.6,o:1}],$.types.pop=[{x:1,y:1,w:0,h:0,o:1},{x:.9,y:.9,w:.1,h:.1,o:1},{x:.8,y:.8,w:.2,h:.2,o:1},{x:.7,y:.7,w:.3,h:.3,o:1},{x:.6,y:.6,w:.4,h:.4,o:1},{x:.5,y:.5,w:.5,h:.5,o:1},{x:.4,y:.4,w:.6,h:.6,o:1}],$.types.popFade=[{x:.75,y:.75,w:0,h:0,o:0},{x:.65,y:.65,w:.1,h:.1,o:.2},{x:.6,y:.6,w:.2,h:.2,o:.4},{x:.55,y:.55,w:.3,h:.3,o:.6},{x:.5,y:.5,w:.4,h:.4,o:.8},{x:.45,y:.45,w:.5,h:.5,o:.9},{x:.4,y:.4,w:.6,h:.6,o:1}],$.types.slide=[{x:.4,y:1,w:.6,h:.6,o:1},{x:.4,y:.9,w:.6,h:.6,o:1},{x:.4,y:.9,w:.6,h:.6,o:1},{x:.4,y:.8,w:.6,h:.6,o:1},{x:.4,y:.7,w:.6,h:.6,o:1},{x:.4,y:.6,w:.6,h:.6,o:1},{x:.4,y:.5,w:.6,h:.6,o:1},{x:.4,y:.4,w:.6,h:.6,o:1}],$.run=function(t,e,n,a){var s=$.types[r()?"none":o.animation];if(a=!0===n?void 0!==a?a:s.length-1:void 0!==a?a:0,e=e||function(){},!(a<s.length&&a>=0))return void e();B[o.type](i(t,s[a])),b=setTimeout(function(){n?a-=1:a+=1,$.run(t,e,n,a)},$.duration),T.setIcon(l)},E(),{badge:k,video:F,image:A,webcam:x,reset:w.reset,browser:{supported:v.supported}}};"undefined"!=typeof define&&define.amd?define([],function(){return t}):"undefined"!=typeof module&&module.exports?module.exports=t:this.Favico=t}(),function(){var t,e,n;t=new Favico({animation:"none",bgColor:"#ff5400",position:"up"}),t.browser.supported?(BC.setFaviconBadge=function(e){var n;try{return t.badge(e),!0}catch(t){return n=t,console.log("Favico error:",n),!1}},n=null,addEventListener("turbolinks:before-cache",function(){return n=e()}),addEventListener("turbolinks:render",function(){var t;if(n&&(t=e())&&t!==n)return t.parentNode.replaceChild(n,t)}),e=function(){return document.head.querySelector("link[rel='shortcut icon']")}):BC.setFaviconBadge=function(){return!1}}.call(this),function(){var t,e,n;Turbolinks.Visit.prototype.hasSnapshot=Turbolinks.Visit.prototype.hasCachedSnapshot,Turbolinks.Visit.prototype.restoreSnapshot=Turbolinks.Visit.prototype.loadCachedSnapshot,t=Turbolinks.Controller.prototype,n=t.startVisitToLocationWithAction,
t&&(Turbolinks.Controller.prototype.startVisitToLocationWithAction=function(){return e(this.adapter),n.apply(this,arguments)},e=function(t){return null!=t.visitRendered?t.visitRendered:t.visitRendered=t.visitResponseLoaded})}.call(this),function(){var t,e,n,i,r,o,a,s,u,l,c,d,h,p,f,m,g,v,b,y,C;BC.autosaveStorage=new ObjectStore.Adapter({prefix:"bc3/autosave"}),n="form[data-behavior~=autosave]",h=!1,e=function(){var t;return t=["input","reset","trix-change"],BC.platform.isMobile()||t.push("trix-blur"),t}(),BC.clearAutosaveForForm=function(t){var e;return e=s(t),BC.autosaveStorage.removeObjectForKey(e)},BC.observe(n,function(e){if(!BC.displayingTurbolinksPreview())return t(e,function(){var t,n,i,r,o;if(i=s(e),(r=BC.autosaveStorage.getObjectForKey(i))&&(t=v(e),!a(r,t)))if(n=u(e)){if(o=l(r),n===o&&m(r,e))return $(e).trigger("autosave:restore")}else if(m(r,e))return $(e).trigger("autosave:restore")})}),$(document).on(e.join(" "),function(t){var e,i,r;if(h)return void(h=!1);if((e=$(t.target).closest(n)[0])&&!e.dataset.autosaveDisabled){if(i=s(e),!(r=v(e)))return BC.autosaveStorage.removeObjectForKey(i);if(BC.autosaveStorage.updateObjectForKey(r,i))return $(e).trigger("autosave:save")}}),$(document).on("ajax:beforeSend",n,function(){return $(this).off("ajax:beforeEval.autosave"),$(this).one("ajax:beforeEval.autosave",function(){return BC.clearAutosaveForForm(this)})}),$(document).on("click","[data-behavior~=discard_autosave]",function(){var t;if(t=$(this).closest("main").find(n).get(0))return t.dataset.autosaveDisabled=!0,BC.clearAutosaveForForm(t)}),y={"input[type=text]":function(t){if(!d(t.value))return t.value},textarea:function(t){if(!d(t.value))return t.value},"trix-editor":function(t){if(!d(t.editor.getDocument()))return t.editor.toJSON()}},r={"input[type=text]":function(t,e){return t.value=e},textarea:function(t,e){return t.value=e},"trix-editor":function(t,e){var n;h=!0,n=t.editor.toJSON();try{return t.editor.loadJSON(e)}catch(e){return e,t.editor.loadJSON(n)}}},t=function(e,n){var i;return(i=e.querySelector("bc-require[pending]"))?$(i).one("bc-require-activate",function(){return t(e,n)}):(i=e.querySelector("trix-editor"))&&null==i.editor?$(i).one("trix-initialize",function(){return t(e,n)}):n()},v=function(t){var e,n,i,r,a,s,u,l,c;for(r=!1,i={},(c=t.dataset.autosaveRevision)&&(i._revision=c),l=o(t),a=0,s=l.length;a<s;a++)e=l[a],n=g(e),null!=n&&(r=!0),(null!=i[u=e.name]?i[u]:i[u]=[]).push(n);if(r)return i},m=function(t,e){var n,i,r,a,s,u,l,d,h,p;a=c(o(e)),p=!0;for(l in t)if(r=t[l],/^[^_]/.test(l))for(d=C(r),s=0,u=d.length;s<u;s++)i=d[s],(n=null!=(h=a[l])?h.shift():void 0)?f(i,n):p=!1;return p},a=function(t,e){if(t&&e)return JSON.stringify(t)===JSON.stringify(e)},l=function(t){return t._revision},g=function(t){var e;if(null!=(e=b(t)))return{value:e,active:t===document.activeElement}},f=function(t,e){if(null!=t)return t.active&&e.focus(),i(e,t.value)},b=function(t){var e;if(e=p(t,y))return e(t)},i=function(t,e){var n;if(n=p(t,r))return n(t,e)},p=function(t,e){var n,i;for(n in e)if(i=e[n],$(t).is(n))return i},s=function(t){var e,n,i,r;return e=document.createElement("a"),e.href=t.action,n=e.pathname,r=null!=(i=t.dataset.autosaveScope)?i:"",r.length>0&&(n+=","+r),n},u=function(t){return t.dataset.autosaveRevision},o=function(t){var e,n,i,r,o,a;for(a=Object.keys(y).join(", "),n=t.querySelectorAll(a),o=[],i=0,r=n.length;i<r;i++)e=n[i],e.name.length>0&&o.push(e);return o},c=function(t){var e,n,i,r,o;for(o={},n=0,i=t.length;n<i;n++)e=t[n],(null!=o[r=e.name]?o[r]:o[r]=[]).push(e);return o},d=function(t){return 0===t.toString().trim().length},C=function(t){if(null!=t)return Array.isArray(t)?t:[t]}}.call(this),function(){var t;$(document).on("autosave:save","[data-behavior~=autosave]",function(){return null==this.autosaveNotice&&(this.autosaveNotice=new t(this)),this.autosaveNotice.touch()}),t=function(){function t(t){this.element=t}var e,n,i;return n=1500,i=3e3,e="autosaved",t.prototype.isVisible=function(){return this.element.classList.contains(e)},t.prototype.show=function(){return this.element.classList.add(e)},t.prototype.hide=function(){return this.element.classList.remove(e)},t.prototype.touch=function(){return this.isVisible()?null!=this.timer?this.timer:this.timer=setTimeout(function(t){return function(){return t.timer=null,t.hide()}}(this),i):(clearTimeout(this.timer),this.timer=setTimeout(function(t){return function(){return t.timer=null,t.show(),t.touch()}}(this),n))},t}()}.call(this),function(){$(document).on("click","button.btn",function(){return $(this).css("outline","none")})}.call(this),function(){var t,e;e="[data-role~=card_slider]",t="[data-role~=card_slide]",$.fn.resetCardSlider=function(){return this.closest(e).removeClass("card__slider--step-2 card__slider--step-3 card__slider--step-4")},$.fn.advanceCardSlide=function(){var n,i,r;return n=this.closest(t),i=this.closest(e),r=n.data("step"),i.addClass("card--sliding card__slider--step-"+(r+1)),n.transitionClass("card--sliding",function(){return function(){return setTimeout(function(){return i.removeClass("card--sliding"),i.find("[autofocus]").first().focus()},200)}}()),!1},$(document).on("click","[data-behavior~=advance_card_slide]",function(){return $(this).advanceCardSlide(),!1}),$(document).on("click","[data-behavior~=close_card_slide]",function(){return $(this).resetCardSlider(),!1})}.call(this),function(){var t;t=function(t){var e,n,i,r,o,a,s,u,l,c,d,h,p,f,m,g;for(g=t.querySelector("select.year"),l=t.querySelector("select.month"),i=t.querySelector("select.day"),m=g.value,u=l.value,n=i.value,r=new Date(m,u,0).getDate(),f=Math.min(n,r),d=i.querySelectorAll("option"),o=0,s=d.length;o<s;o++)c=d[o],i.removeChild(c);for(p=[],n=a=1,h=r;1<=h?a<=h:a>=h;n=1<=h?++a:--a)e=new CalendarDate(m,u,n),c=document.createElement("option"),c.value=n,c.textContent=e.getWeekdayName()+", "+n+e.ordinalSuffix(),c.defaultSelected=n===f,p.push(i.appendChild(c));return p},BC.observe("[data-behavior~=date_selection]",function(e){return t(e)}),$(document).on("change","[data-behavior~=date_selection]",function(e){if(BC.matches(e.target,"select.year, select.month"))return t(this)})}.call(this),function(){var t,e,n,i,r,o,a,s,u,l=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};u="[data-behavior~=drop_zone]",n=null,e=null,s=null,a=function(t,e,n){var i;return i=function(t){if(r(t))return e(t)},document.addEventListener(t,i,null!=n&&n)},a("dragenter",function(e){var i;if(n=e.target,e.preventDefault(),i=o(e))return t(i)}),a("dragover",function(t){if(t.preventDefault(),o(t))return t.dataTransfer.effectAllowed="copy",t.dataTransfer.dropEffect="copy"}),a("dragleave",function(t){if(t.target===n)return n=null,i()}),a("dragend",function(){return n=null,i()}),a("drop",function(t){var n,r,o;if(t.preventDefault(),n=e)return r=t.dataTransfer.files,o=BC.triggerEvent(n,"dropzone:drop",{files:r}),o.defaultPrevented&&t.stopImmediatePropagation(),i()},!0),o=function(t){var e,n;return null!=(e=null!=(n=$(t.target).closest(u).get(0))?n:$.contains(document.documentElement,s)?s:void 0)?e:document.querySelector(u)},r=function(t){var e,n;return l.call(null!=(e=null!=(n=t.dataTransfer)?n.types:void 0)?e:[],"Files")>=0},t=function(t){if(s=t,t!==e)return i(),e=t,BC.triggerEvent(e,"dropzone:activate")},i=function(){if(null!=e)return BC.triggerEvent(e,"dropzone:deactivate"),e=null}}.call(this),function(){var t,e,n;t=null,n='<div class="drop-zone-indicator drop-zone-indicator--local">\n  <bc-sticky class="drop-zone-indicator__sticky">\n    <div class="drop-zone-indicator__balloon">\n      <figure class="drop-zone-indicator__figure"><div class="drop-zone-indicator__icon"></div></figure>\n      <strong class="drop-zone-indicator__explanation">Drop your file to add it below.</strong>\n    </div>\n  </bc-sticky>\n</div>\n<div class="drop-zone-indicator"></div>',e=!1,$(document).on("dropzone:activate",function(i){var r,o;return t=$(n),o=$(i.target),o.isExpanded()||(o.expand(),e=!0),r=o.closest("[data-behavior~='drop_zone_container']"),t.appendTo(r)}),$(document).on("dropzone:drop",function(){return e=!1,!0}),$(document).on("dropzone:deactivate",function(n){return e&&$(n.target).collapse(),e=!1,t.remove(),t=null})}.call(this),function(){var t,e,n,i=function(t,e){return function(){return t.apply(e,arguments)}};e="[data-role~=emoji_picker_toggle]",t="[data-role~=emoji_picker_character]",n="emoji-picker--expanded",BC.EmojiPickerController=function(){function r(t,n){this.element=t,this.delegate=n,this.didKeydown=i(this.didKeydown,this),this.didClick=i(this.didClick,this),this.didClickEmojiToggle=i(this.didClickEmojiToggle,this),this.emojiToggle=this.element.querySelector(e),BC.handleEvent("click",{on:this.emojiToggle,"with":this.didClickEmojiToggle})}return r.prototype.open=function(){var t;if(!this.isOpen())return this.element.classList.add(n),"function"==typeof(t=this.delegate).emojiPickerOpened&&t.emojiPickerOpened(),this.addEventListeners()},r.prototype.close=function(){var t;return this.element.classList.remove(n),"function"==typeof(t=this.delegate).emojiPickerClosed&&t.emojiPickerClosed(),this.removeEventListeners()},r.prototype.isOpen=function(){return this.element.classList.contains(n)},r.prototype.addEventListeners=function(){if(this.eventListeners)throw new Error("double-adding event listeners");return this.eventListeners=[BC.handleEvent("keydown",{"with":this.didKeydown}),BC.handleEvent("click",{"with":this.didClick})]},r.prototype.removeEventListeners=function(){var t,e,n,i;if(this.eventListeners){for(i=this.eventListeners,e=0,n=i.length;e<n;e++)t=i[e],t.destroy();return this.eventListeners=null}throw new Error("removing missing event listeners")},r.prototype.findEmojiCharacterForEvent=function(e){var n;if((n=BC.closest(e.target,t))&&this.element.contains(n))return n.textContent},r.prototype.didClickEmojiToggle=function(){return this.isOpen()?this.close():this.open()},r.prototype.didClick=function(t){var e;if(t.target!==this.emojiToggle)return(e=this.findEmojiCharacterForEvent(t))&&this.delegate.emojiPicked(e),this.close()},r.prototype.didKeydown=function(){return this.close()},r}()}.call(this),function(){var t,e,n,i,r,o,a,s,u,l;a="[data-behavior~=expandable]",r=a+" [data-behavior~=expand_on_click]",i=a+" [data-behavior~=expand_on_focus]",n=a+" [data-behavior~=collapse_on_click]",o=a+" [data-behavior~=collapse_on_reset]",l="[data-behavior~=toggle_expansion_on_click]",s=a+" [data-behavior~=toggle_expansion_on_check]",u="[data-behavior~=toggle_expansion_on_radio_change]",t="[data-behavior~=collapse_on_clickoutside]",e="[data-behavior~=collapse_on_keydown]",$(document).on("click",r,function(){return $(this).expand(),!1}),$(document).on("click",n,function(){return $(this).collapse(),!1}),$(document).on("reset",o,function(){return $(this).collapse()}),$(document).on("click",l,function(){return $(this).toggleExpansion(),!1}),$(document).on("click",s,function(){return $(this).toggleCheckboxExpansion()}),$(document).on("change",u,function(){return $(this).toggleRadioExpansion()}),$(document).on("focus",i,function(){return BC.defer(function(t){return function(){return $(t).expand()}}(this)),!1}),$(document).on("keydown",e,function(){return $(this).collapse()}),$(document).on("keydown",function(t){if(t.keyCode===BC.keyCodes.escape)return $("[aria-expanded=true]").focus(),$(a).collapse()}),$(document).on("ajax:complete",t,function(){return $(this).collapse()}),$.fn.expandable=function(){return this.closest(a)},$.fn.isExpanded=function(){return this.expandable().is(".expanded")},$.fn.isChecked=function(){return this.expandable().find("input[type=checkbox]").first().prop("checked")},$.fn.expand=function(){return this.isExpanded()?this.expandable():(this.expandable().find(l).attr("aria-expanded",!0),this.expandable().addClass("expanded").dispatchEvent("expand").find(t).bind("clickoutside.expandable",function(t){return function(){return t.collapse()}}(this)),this.autofocusExpandedField())},$.fn.collapse=function(){return this.isExpanded()?(this.expandable().find(l).attr("aria-expanded",!1),this.expandable().dispatchEvent("before-collapse"),this.expandable().removeClass("expanded").dispatchEvent("collapse").find(t).unbind(".expandable")):this.expandable()},$.fn.toggleExpansion=function(){return this.isExpanded()?this.collapse():this.expand()},$.fn.toggleCheckboxExpansion=function(){return this.isChecked()?this.expand():this.collapse()},$.fn.toggleRadioExpansion=function(){return this.expandable().length?this.expand():this.closest("form").find(a).collapse()},$.fn.autofocusExpandedField=function(){return this.expandable().find("[autofocus]").first().focus()}}.call(this),function(){$(document).on("autosave:restore",function(t){return $(t.target).expand()})}.call(this),function(){$(document).on("expand","[data-behavior~=load_on_expand]",function(){var t,e;return t=$(this),t.addClass("loading"),e=$(t.data("load-target")),$.get(t.data("load-url"),function(n){return e.html(n),t.removeClass("loading").find("[autofocus]").first().focus(),t.trigger("expandable:load"),t.one("collapse",function(){var t;return e.find("[autofocus]").removeAttr("autofocus"),null!=(t=e.find("form").get(0))?t.reset():void 0})})})}.call(this),function(){var t,e;t=null,e=null,$(document).on("expand",function(e){return t=e.target,BC.defer(function(){return t=null})}),$(document).on("expand","[data-behavior~=reveal_on_expand]",function(){return $(this).find("[data-role~=revealable_content]").revealElement()}),$(document).on("focusin","[data-behavior~=expandable]",function(){if(this===t&&this!==e)return e=this,$(this).revealElement(function(){return e=null})})}.call(this),function(){BC.observe("[data-behavior~=flash_notice]",function(t){var e,n,i,r,o;return e=$(t),n=null!=(i=e.data("flash-duration"))?i:3,o=null!=(r=e.data("remove"))&&r,e.onTransitionEnd(function(){return setTimeout(function(){return e.fadeOut("fast",function(){if(o)return e.remove()})},1e3*n)})}),document.addEventListener("turbolinks:before-cache",function(){var t,e,n,i,r;for(i=document.querySelectorAll("[data-behavior~=flash_notice]"),r=[],e=0,n=i.length;e<n;e++)t=i[e],r.push(t.parentNode.removeChild(t));return r})}.call(this),function(){var t,e,n,i,r;n="[data-behavior~=display_floating_placeholder]",i="[data-role~=floating_placeholder]",t="floating-placeholder__input--active",e="floating-placeholder__label--active",r=function(n){var r;return r=n.val(),n.toggleClass(t,r.length>0),n.next(i).toggleClass(e,r.length>0)},$(document).on("select",n,function(){return r($(this))}),$(document).on("input",n,function(){return r($(this))})}.call(this),function(){var t,e,n,i,r,o,a,s,u,l,c;s="textarea:required, input:required, select:required, .trix_required_field",a="input--required-text",o="[data-behavior~=loading_on_submit]",u=function(e){var n;return e.attr("data-submittable-text",t(e)),e.addClass("btn--loading"),t(e,null!=(n=e.attr("data-loading-text"))?n:"Saving\u2026")},i=function(e){return t(e,e.attr("data-submittable-text")),e.removeAttr("disabled").removeAttr("data-submittable-text").removeClass("btn--loading")},t=function(t,e){var n;return n=t.is("button")?"html":"val",null!=e?t[n](e):t[n]()},l=function(t){var e;if(n(t))return e=t.find(o+"[data-behavior~=primary_submit]"),u(e),t.addClass("submitting"),e.click(),e.attr("disabled",!0)},n=function(t){var e,n,i,o,a,u,l;for(u=$(t).find(s),n=0,o=u.length;n<o;n++)if(e=u[n],!e.disabled&&!e.value.trim())return e.focus(),r(e),!1;for(l=$(t).find("input:invalid"),i=0,a=l.length;i<a;i++)if(e=l[i],!e.disabled)return e.focus(),!1;return!0},e=function(t){return t.hasClass("submitting")||t.find(":submit:disabled").length>0},r=function(t){if($(t).hasBehavior("highlight_required_field"))return $(t).transitionClass(a)},c=function(t){var e;if(e=$(t.target),n(e.parents("form")))return u(e),e.attr("disabled",!0),e.parents("form").submit()},$(document).on("keydown","[data-behavior~=submit_on_enter]",function(t){var n;if(t.keyCode===BC.keyCodes.enter&&(n=$(this).closest("form"),!e(n)))return l(n),!1}),$(document).on("keydown","[data-behavior~=submit_on_control_enter]",function(t){var n;if(t.keyCode===BC.keyCodes.enter&&(t.ctrlKey||t.metaKey)&&(n=$(this).closest("form"),!e(n)))return l(n),!1}),$(document).on("change","bc-autocomplete:not([selected-count='0'])[data-behavior~=submit_on_change]",function(){return l($(this).closest("form"))}),$(document).on("click",o,function(t){return c(t),!1}),$(document).on("ajax:beforeSend",o,function(){return u($(this))}),$(document).on("ajax:error",o,function(){return i($(this))}),$(document).on("ajax:error","form",function(){return i($(this).find(o))})}.call(this),function(){BC.observe("[data-behavior~=hide_on_android]",function(t){if(BC.platform.isAndroid())return $(t).remove()})}.call(this),function(){$(document).on("keypress","[data-behavior~=ignore_enter]",function(t){return t.which!==BC.keyCodes.enter||t.metaKey||t.ctrlKey})}.call(this),function(){var t,e;e="[data-behavior~=select_on_click]",BC.observe(e,function(e){return BC.handleEvent("click",{on:e,"with":function(e){return t(e.target)}})}),t=function(t){return t.focus(),t.selectionStart=0,t.selectionEnd=999}}.call(this),function(){var t,e;t="bc-modal[opened=true]",e=0,BC.observe(t,{selectorMatched:function(t){if(!t.closeOnScroll&&!t.closeButtonOnly)return e++,document.body.classList.add("u-unscrollable")},selectorUnmatched:function(t){if(!t.closeOnScroll&&!t.closeButtonOnly&&0==--e)return document.body.classList.remove("u-unscrollable")}}),document.addEventListener("turbolinks:before-cache",function(e){var n,i,r,o;for(o=document.querySelectorAll(t),i=0,r=o.length;i<r;i++)n=o[i],n.close({initiatingEvent:e});return document.body.classList.remove("u-unscrollable")})}.call(this),function(){var t,e,n,i,r,o,a,s,u,l;u="[data-behavior~=radio_option_group]",o="[data-role=option]",r="[data-role=option_input]",s="field__input-option--selected",BC.observe(u,function(e){return BC.handleEvent("change",{on:e,matching:r,"with":t}),a(e.querySelector(r+"[checked]"))}),t=function(t){return a(t.target)},a=function(t){var e;if(e=BC.closest(t,o))return e.classList.add(s),n(e),l(e)},l=function(t){var n,i,r,a,u;for(a=t.parentNode.querySelectorAll(o),u=[],n=0,i=a.length;n<i;n++)(r=a[n])!==t&&(r.classList.remove(s),u.push(e(r)));return u},n=function(t){var e,n,r,o,a;for(o=i(t),a=[],e=0,r=o.length;e<r;e++)n=o[e],a.push(n.disabled=!1);return a},e=function(t){var e,n,r,o,a;for(o=i(t),a=[],e=0,r=o.length;e<r;e++)n=o[e],a.push(n.disabled=!0);return a},i=function(t){return t.querySelectorAll("input:not("+r+"), select")}}.call(this),function(){$(document).on("ajax:beforeSend","[data-behavior~=remote-link]",function(){return $(this).addClass("remote-link--loading")})}.call(this),function(){var t;t=20,$.fn.revealElement=function(e){var n,i,r,o,a,s,u;if(null==e&&(e=function(){}),o=$(this).offset().top,r=$(this).height(),i=o+r,$(window).width(),u=$(window).height(),s=$(window).scrollTop(),a=s+u,i>a&&r<u)return n=o-(u-r)+t,requestAnimationFrame(function(){return $("html,body").stop().animate({scrollTop:n},e)})}}.call(this),function(){var t,e;e="[data-behavior~=reveal_submit_on_select]",t=function(t){return _.every(t.querySelectorAll("select"),function(t){return""!==t.value})},$(document).on("change",e,function(){var e;return e=this.querySelector("[data-role=submit_on_select]"),e.style.display=t(this)?"block":"none"})}.call(this),function(){$(document).on("click","[data-behavior~=reveal_validation]",function(){var t;if(t=$(this).closest("form").find("input:invalid"),t.addClass("reveal-validation"),t.length)return $(document.body).animate({scrollTop:t.first().offset().top-100},{complete:function(){return t.first().focus()}}),!1})}.call(this),function(){var t,e,n,i,r,o,a,s;a="[data-behavior~=selectable_buttons]",t="[data-role=selectable_button]",o="btn--primary",BC.observe(a,function(n){return BC.handleEvent("click",{on:n,matching:t,"with":e})}),e=function(t){var e,n,o;if(e=t.target,o=BC.closest(e,a).querySelector("select"),n=o.querySelector("option[value='"+e.dataset.value+"']"),!r(n))return s(n),i(o)},s=function(t){return t.selected=!t.selected},i=function(e){var n,i,r,a,s,u;for(s=e.querySelectorAll("option"),u=[],n=0,i=s.length;n<i;n++)a=s[n],r=e.parentNode.querySelector(t+"[data-value='"+a.value+"']"),u.push(r.classList.toggle(o,a.selected));return u},r=function(t){return t.selected&&1===n(t.parentNode).length},n=function(t){var e,n,i,r,o;for(r=t.querySelectorAll("option"),o=[],e=0,n=r.length;e<n;e++)i=r[e],i.selected&&o.push(i);return o}}.call(this),function(){var t,e;e="[data-behavior~=show_button_on_suggest]",t="showing_button",$(document).on("change",e+" bc-autocomplete",function(n){var i;return i="0"!==n.target.getAttribute("selected-count"),$(this).closest(e).toggleClass(t,i)})}.call(this),function(){var t,e;e="[data-behavior~=hide_trashed_recording]",t=function(){if($(e).length)return $(".panel--perma").addClass("panel--perma-trashed")},BC.on("turbolinks:load","hide perma if it is trashed",t),$(document).on("click","[data-behavior~=show_trashed_perma]",function(){return $(".panel--perma").removeClass("panel--perma-trashed"),!1})}.call(this),function(){$(document).on("click","[data-behavior~=sound]",function(){return BC.playSound($(this).data("url")),!1})}.call(this),function(){var t,e,n;n="[data-role~=toggle_theme]",t="[data-behavior~=toggle_theme_button]",e="theme-picker__swatch--selected",BC.observe(n,function(n){return BC.handleEvent("click",{on:n,matching:t,"with":function(i){var r,o,a,s,u,l,c,d;for(l=i.target,s=l.dataset,d=s.url,c=s.theme,document.documentElement.setAttribute("data-theme",c),u=n.querySelectorAll(t),o=0,a=u.length;o<a;o++)r=u[o],r.classList.remove(e);return l.classList.add(e),BC.fetch(d,{method:"put",contentType:"application/json",body:JSON.stringify({theme:c})})}})})}.call(this),function(){$.fn.transitionClass=function(t,e){return $(this).addClass(t).onTransitionEnd(function(n){return function(){if($(n).removeClass(t),e)return e()}}(this))}}.call(this),function(){var t,e;BC.observe("[data-visible-to-admin]",function(e){if(!t())return $(e).remove()}),BC.observe("[data-visible-to-creator]",function(t){if(!e(t))return $(t).remove()}),BC.observe("[data-visible-to-creator-or-admin]",function(n){if(!e(n)&&!t())return $(n).remove()}),t=function(){return"true"===BC.current.person.admin},e=function(t){return $(t).closest("[data-creator-id]").attr("data-creator-id")===BC.current.person.id}}.call(this),function(){$(document).on("change","[data-behavior~=visit_on_change]",function(){return Turbolinks.visit(this.value,{action:this.dataset.visitOnChangeAction})})}.call(this),function(){$(document).ajaxError(function(t,e,n,i){var r;if("abort"!==e.statusText)return Raven.captureMessage(i||e.statusText,{extra:{type:n.type,url:n.url,data:n.data,status:e.status,error:i||e.statusText,response:null!=(r=e.responseText)?r.substring(0,100):void 0}})})}.call(this),function(){var t,e;t=/^\S+@\S+\.[A-Za-z0-9-]{2,23}$/,e=t.toString().replace(/^\//,"").replace(/\/$/,""),BC.observe("input[type=email]:not([pattern])",function(t){return t.pattern=e})}.call(this),function(){var t,e,n,i,r,o,a,s;s="[data-behavior~=autoresize]",e={styles:{visibility:"hidden",overflow:"hidden",position:"absolute",maxHeight:"0px"},properties:{disabled:!0},ignoredAttributes:["autofocus","name","data-behavior","data-controller","data-target"]},i=new WeakMap,n=0,BC.observe(s,function(e){return t(e)}),$(document).on("input",s,function(){return t(this)}),$(document).on("expand","[data-behavior~=expandable]",function(){var e,n,i,r,o;for(r=this.querySelectorAll(s),o=[],n=0,i=r.length;n<i;n++)e=r[n],o.push(t(e));return o}),$(document).on("reset","form",function(){var e,n,i,r,o;for(r=this.querySelectorAll(s),o=[],n=0,i=r.length;n<i;n++)e=r[n],o.push(t(e));return o}),t=function(t){var e,n,i;return i=t.style,e=a(t),e.value=t.value,e.style.width=getComputedStyle(t).width,n=e.scrollHeight,i.height=n+"px",i.overflowY=i.maxHeight&&n>parseInt(i.maxHeight)?"scroll":"hidden"},a=function(t){var e,n,a;return null!=(n=i.get(t))?n:(e=null!=(a=o(t))?a:r(t),i.set(t,e),e)},o=function(t){var e;if(e=t.dataset.cloneId)return document.getElementById(e)},r=function(t){var i,r,o,a,s,u,l,c,d;for(r=t.cloneNode(),u=e.ignoredAttributes,o=0,s=u.length;o<s;o++)i=u[o],r.removeAttribute(i);l=e.styles;for(a in l)d=l[a],r.style[a]=d;c=e.properties;for(a in c)d=c[a],r[a]=d;return r.id="autoresize_clone_"+n++,t.dataset.cloneId=r.id,t.parentNode.insertBefore(r,t),r}}.call(this),function(){var t,e;e="[data-behavior~=expandable]",t="[data-behavior~=prevent_collapse_on_unload]",$(document).on("turbolinks:before-cache",function(){return $(e+":not("+t+").expanded").collapse()})}.call(this),function(){var t;t=function(t,e){var n,i,r;i=[];for(n in e)r=e[n],t.getAttribute(n)!==r?i.push(t.setAttribute(n,r)):i.push(void 0);return i},BC.observe("[data-current-person-name]",function(t){return t.textContent=BC.current.person.name}),BC.observe("img[data-current-person-avatar]",function(e){return t(e,{src:BC.current.person.avatarUrl,title:BC.current.person.name,alt:""})}),BC.observe("img[data-current-person-avatar][data-behavior~=rich_avatar]",function(t){return t.dataset.richAvatarUrl=BC.accountPath("people/"+BC.current.person.id+"/rich_avatar")}),BC.observe("[data-personalization][data-person-id]",function(t){if(t.dataset.personId===BC.current.person.id)return t.textContent=t.dataset.personalization})}.call(this),function(){document.addEventListener("turbolinks:before-cache",function(){var t,e,n,i,r;for($.datepicker.dpDiv.remove(),i=document.querySelectorAll("input.hasDatepicker"),r=[],e=0,n=i.length;e<n;e++)t=i[e],r.push($(t).datepicker("destroy"));return r}),document.addEventListener("turbolinks:before-render",function(t){return $.datepicker.dpDiv.appendTo(t.data.newBody)})}.call(this),function(){var t,e,n,i,r;document.addEventListener("turbolinks:before-cache",function(){return n(document.body)}),document.addEventListener("turbolinks:render",function(){if(!document.documentElement.hasAttribute("data-turbolinks-preview"))return r(document.body)}),t={"video, audio":{disable:function(t){return e(t,"src","data:application/octet-stream,"),t.pause(),t.load()},enable:function(t){return i(t,"src")}},iframe:{disable:function(t){return e(t,"src")},enable:function(t){return i(t,"src")}}},n=function(e){var n,i,r,o;r=[];for(o in t)n=t[o].disable,r.push(function(){var t,r,a,s;for(a=e.querySelectorAll(o),s=[],t=0,r=a.length;t<r;t++)i=a[t],s.push(n(i));return s}());return r},r=function(e){var n,i,r,o;r=[];for(o in t)i=t[o].enable,r.push(function(){var t,r,a,s;for(a=e.querySelectorAll(o),s=[],t=0,r=a.length;t<r;t++)n=a[t],s.push(i(n));return s}());return r},e=function(t,e,n){var i;return i=t.getAttribute(e),null!=i&&t.setAttribute("data-original-"+e,i),null!=n?t.setAttribute(e,n):t.removeAttribute(e)},i=function(t,e){var n;if(null!=(n=t.getAttribute("data-original-"+e)))return t.removeAttribute("data-original-"+e),t.setAttribute(e,n)}}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.TextNodeObserver=function(){function e(e,n){this.element=e,this.callback=n,this.elementMutated=t(this.elementMutated,this),this.observer=new MutationObserver(this.elementMutated)}var n;return e.prototype.start=function(){if(!this.started)return this.observer.observe(this.element,{childList:!0,subtree:!0,attributes:!1,characterData:!0}),this.started=!0},e.prototype.stop=function(){if(this.started)return this.observer.disconnect(),this.started=!1},e.prototype.pause=function(t){return this.started?(this.stop(),t(),this.start()):t()},e.prototype.elementMutated=function(t){var e,n,i,r,o;for(o=[],n=0,i=t.length;n<i;n++)switch(r=t[n],r.type){case"characterData":o.push(this.processTextNode(r.target));break;case"childList":o.push(function(){var t,n,i,o;for(i=r.addedNodes,o=[],t=0,n=i.length;t<n;t++)e=i[t],o.push(this.processAllTextNodes(e));return o}.call(this));break;default:o.push(void 0)}return o},e.prototype.processTextNode=function(t){return this.callback(t)},e.prototype.processAllTextNodes=function(t){var e,i,r,o,a;for(null==t&&(t=this.element),r=n(t),o=[],e=0,i=r.length;e<i;e++)a=r[e],o.push(this.processTextNode(a));return o},n=function(t){var e,n;switch(e=[],t.nodeType){case Node.TEXT_NODE:e.push(t);break;case Node.ELEMENT_NODE:for(n=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,null,!1);n.nextNode();)e.push(n.currentNode)}return e},e}()}.call(this),function(){var t,e,n,i,r,o,a,s,u,l,c,d,h;d=function(){var t,e;return t=document.createElement("canvas"),e=t.getContext("2d"),e.fillStyle="#f00",e.textBaseline="top",e.font="bold 32px sans-serif",e.fillText("\ud83d\udc28",0,0),0!==e.getImageData(16,16,1,1).data[0]}(),h=function(){var t,e;return t=document.createElement("canvas"),e=t.getContext("2d"),e.font="32px sans-serif",e.measureText("\ud83d\udc4d").width===e.measureText("\ud83d\udc4d\ud83c\udffc").width}(),c=function(){var t,e,n;return t=document.createElement("canvas"),e=t.getContext("2d"),e.font="32px sans-serif",n=e.measureText("\ud83d\ude04").width,e.font="64px sans-serif",e.measureText("\ud83d\ude04").width!==n}(),s=function(t){return i(t)&&o(t)},l=function(t){if(BC.EMOJI_SKIN_TONE_PATTERN.test(t.textContent))return t.textContent=t.textContent.replace(BC.EMOJI_SKIN_TONE_PATTERN,"")},n=function(t){var n,i;if(!r(t))return n=e(t.textContent),null!=(i=t.parentNode)?i.replaceChild(n,t):void 0},i=function(t){return BC.EMOJI_PATTERN.test(t.textContent)},o=function(t){var e,n;if(e=t.parentNode)return"script"!==(n=e.tagName.toLowerCase())&&"style"!==n&&"textarea"!==n&&!a(e)},a=function(t){return t.isContentEditable||BC.closest(t,"[contenteditable]")},r=function(t){var e;if(e=t.parentNode)return"span"===e.tagName.toLowerCase()&&"emoji"===e.className},e=function(e){var n,i,r;return n=document.createDocumentFragment(),i=0,e.replace(BC.EMOJI_PATTERN,function(r,o){var a,s,u;return s=o+r.length,o>i&&(u=e.slice(i,o),n.appendChild(document.createTextNode(u))),a=e.slice(o,s),n.appendChild(t(a)),i=s}),(r=e.slice(i))&&n.appendChild(document.createTextNode(r)),n},t=function(t){var e;return e=document.createElement("span"),e.className="emoji",e.textContent=t,e},d&&h||(u=new TextNodeObserver(document.documentElement,function(t){if(s(t))return u.pause(function(){return h||l(t),n(t)})}),u.start(),u.processAllTextNodes()),function(){var t;t=[],d&&t.push("bold"),h&&t.push("skin-tones"),c&&t.push("big"),document.documentElement.dataset.emojiSupport=t.join(" ")}()}.call(this),function(){var t,e,n,i,r,o,a,s,u,l;u="input[autocomplete=off][placeholder]:not([data-fixed-autocomplete-off])",l=window.navigator.userAgent,r=l.match(/chrome/i),a=l.match(/safari/i)&&!r,t=function(){return!(r||a)},s=function(){return document.body.classList.contains("env-test")},o=function(){return t()||s()},e=function(t){return t.autocomplete="chrome-is-buggy"},n=function(t){return t.placeholder=i(t.placeholder)},i=function(t){return t.charAt(0)+"\ufeff"+t.substring(1)},BC.ready(function(){if(!o())return BC.observe(u,function(t){return r&&e(t),a&&n(t),t.dataset.fixedAutocompleteOff=""})})}.call(this),function(){var t;(t=function(){var t;return t=document.createElement("textarea"),t.placeholder="buggy","buggy"===t.cloneNode(!0).value}())&&(BC.on("turbolinks:load","fix buggy placeholders",function(){var t,e,n,i,r;for(i=document.querySelectorAll("textarea[placeholder]"),r=[],e=0,n=i.length;e<n;e++)t=i[e],t.value===t.placeholder?r.push(t.value=""):r.push(void 0);return r}),BC.handleEvent("focusin",{matching:"[placeholder]",phase:"capturing","with":function(t){var e,n;if(n=t.target,!n.value)return e=BC.handleEvent("input",{on:n,once:!0,"with":function(t){if(!n.value)return t.stopImmediatePropagation()}}),setTimeout(e.destroy,1)}}))}.call(this),function(){!function(t,e,n){window.HSCW=e,window.HS=n,n.beacon=n.beacon||{};var i=n.beacon;i.userConfig={},i.readyQueue=[],i.config=function(t){this.userConfig=t},i.ready=function(t){this.readyQueue.push(t)},e.config={docs:{enabled:!0,baseUrl:"//basecamp.helpscoutdocs.com/"},contact:{enabled:!0,formId:"368489dd-b824-11e7-b466-0ec85169275a"}};var r=t.getElementsByTagName("script")[0],o=t.createElement("script");o.type="text/javascript",o.async=!0,o.src="https://djtflbt20bdde.cloudfront.net/",r.parentNode.insertBefore(o,r)}(document,window.HSCW||{},window.HS||{});var t,e,n,i,r;HS.beacon.config({modal:!0,autoInit:!1,poweredBy:!1,showContactFields:!0,color:"#283c46",translation:{searchLabel:"What do you need help with?",topicLabel:"What do you need help with?",messageLabel:"What\u2019s your question, comment, or issue?",contactSuccessDescription:"Help is on the way! Someone from the team is about to read your message and will personally reach out to you soon."},topics:[{val:"login",label:"I can't access my account"},{val:"signup",label:"I have a question before I sign up"
},{val:"request",label:"I want to request a feature"},{val:"billing",label:"I have a billing question"},{val:"email",label:"I'm not receiving emails"},{val:"confused",label:"I'm confused about how something works"},{val:"broken",label:"I think something is broken"},{val:"other",label:"Other"}]}),t=function(){if(null!=BC.current.person)return HS.beacon.identify({name:BC.current.person.name,email:BC.current.person.emailAddress})},n=!1,e=function(e){return n?e():(HS.beacon.ready(t),HS.beacon.ready(e),HS.beacon.ready(function(){return n=!0}),HS.beacon.init())},r=function(){return HS.beacon.destroy&&HS.beacon.destroy(),n=!1},i=function(){return e(function(){return HS.beacon.open()})},BC.handleEvent("click",{matching:"[data-behavior~=help_button]","with":i}),BC.handleEvent("turbolinks:load",{"with":r}),BC.handleEvent("turbolinks:before-cache",{"with":r})}.call(this),function(){var t;t="iframe[data-behavior~=has_dimension_notifier]",window.addEventListener("message",function(e){var n,i,r,o,a;if(a=e.data,o=a.identifier,i=a.dimensions,null!=o&&null!=i&&(r=i.height,n=$(t+"[data-identifier='"+o+"']"),r!==n.height()))return n.css({height:r}).dispatchEvent("height:change")})}.call(this),function(){$(document).ajaxComplete(function(t,e){var n;if(401===e.status&&(n=e.getResponseHeader("WWW-Authenticate")))return window.location.replace(n)})}.call(this),function(){var t=[].slice;BC.Chat={createRoom:function(e){var n,i,r,o;return r=e.dataset,o=r.roomNumber,n=r.campfirePerson,i=r.integrationPerson,BC.cable.subscriptions.create({channel:"ChatChannel",room_number:o},{element:e,roomNumber:o,campfirePerson:JSON.parse(n),integrationPerson:null!=i?JSON.parse(i):void 0,initialized:function(){return this.watchdog=BC.Chat.Watchdog.get(this.roomNumber),this.controller=new BC.Chat.RoomController(this),this.bridge("speaker.speak",{to:"controller.inputController.speak"}),this.bridge("speaker.startedTyping",{to:"controller.inputController.startedTyping"}),this.bridge("speaker.stoppedTyping",{to:"controller.inputController.stoppedTyping"}),this.bridge("transcript.scrollToBottom",{to:"controller.transcriptController.scrollToBottom"})},connected:function(){var t;if(this.log("connected"),this.enable(),null!=this.disconnectedAt)return t=Date.now()-this.disconnectedAt,this.log("reconnected",{reconnectTime:t}),t>4e3&&Beanstalk.logEvent("actionCableChatReconnectTime",t),this.disconnectedAt=null},disconnected:function(){return this.log("disconnected"),this.disconnectedAt=Date.now(),this.disable()},received:function(t){return this.controller.receive(t)},attached:function(){return this.log("attached"),this.enable(),this.controller.attached()},detached:function(){return this.log("detached"),this.leave(),this.controller.detached()},enable:function(){if(!this.enabled)return this.log("enable"),this.enabled=!0,this.controller.enable()},disable:function(){return this.log("disable"),this.enabled=!1,this.controller.disable()},leave:function(){return this.log("leave"),this.disable(),this.unsubscribe()},showDisconnectedMessage:function(){var t;return(t=this.controller).showDisconnectedMessage.apply(t,arguments)},log:function(t,e){return this.watchdog.log("room."+t,e)},bridge:function(e,n){var i,r,o,a,s,u,l,c,d,h,p,f,m,g,v,b,y;for(y=n.to,v=e.split("."),o=2<=v.length?t.call(v,0,l=v.length-1):(l=0,[]),i=v[l++],b=y.split("."),u=2<=b.length?t.call(b,0,c=b.length-1):(c=0,[]),m=b[c++],r=this,d=0,p=o.length;d<p;d++)g=o[d],null==r[g]&&(r[g]={}),r=r[g];for(a=this,h=0,f=u.length;h<f;h++)s=u[h],a=a[s];if("function"==typeof a[m])return r[i]=a[m].bind(a);throw new Error("Missing bridge method "+y+" for "+e)}})}}}.call(this),function(){BC.extendObject(BC.Chat,{transcriptSelector:"bc-infinite-page[data-behavior~=chat_transcript]",linesSelector:"[data-behavior~=chat_lines]",lineSelector:"[data-behavior~=chat_line]",typingStatusSelector:"[data-behavior~=chat_typing_status]",inputSelector:"[data-behavior~=chat_speak]",attachButtonSelector:"[data-behavior~=chat_attach_files]",emojiPickerSelector:"[data-behavior~=emoji_picker]",uploadProgressSelector:"[data-role~=upload_progress]",soundNames:["56k","ballmer","bell","bezos","bueller","butts","clowntown","cottoneyejoe","crickets","curb","dadgummit","dangerzone","danielsan","deeper","donotwant","drama","flawless","greatjob","greyjoy","guarantee","heygirl","horn","horror","inconceivable","letitgo","live","loggins","makeitso","noooo","nyan","ohmy","ohyeah","pushit","rimshot","rollout","rumble","sax","secret","sexyback","story","tada","tmyk","totes","trololo","trombone","unix","vuvuzela","what","whoomp","wups","yay","yeah","yodel"],memeNames:["badluckbrian","conspiracykeanu","grumpycat","idontalways","scumbagsteve","skepticalkid","whatifitoldyou"]})}.call(this),function(){BC.extendObject(BC.Chat,{renderTemplate:function(t,e){return JST["all/channels/chat/templates/"+t](e)},createLineElement:function(t){var e,n;return t instanceof Element?t:(e=document.createElement("div"),e.innerHTML=t,function(){if(null!=(n=e.querySelector(BC.Chat.lineSelector)))return n;throw Error("invalid chat line: "+t)}())}})}.call(this),function(){var t,e,n,i=function(t,e){return function(){return t.apply(e,arguments)}};n=BC.Chat,e=n.inputSelector,t=n.emojiPickerSelector,BC.Chat.InputController=function(){function n(t){var n;this.roomController=t,this.onTrixChange=i(this.onTrixChange,this),this.onTrixFocus=i(this.onTrixFocus,this),this.onKeypress=i(this.onKeypress,this),this.stoppedTyping=i(this.stoppedTyping,this),this.installEmojiPicker=i(this.installEmojiPicker,this),n=this.roomController,this.room=n.room,this.transcriptController=n.transcriptController,this.uploadController=new BC.Chat.UploadController(this.room.element,this.transcriptController),this.element=this.room.element.querySelector(e),this.element.addEventListener("keypress",this.onKeypress),this.element.addEventListener("trix-focus",this.onTrixFocus),this.element.addEventListener("trix-change",this.onTrixChange),this.awaitTrixEditor(this.installEmojiPicker)}var r,o,a;return n.prototype.installEmojiPicker=function(){if(!this.emojiPickerController)return this.emojiPicker=this.room.element.querySelector(t),this.emojiPickerController=new BC.EmojiPickerController(this.emojiPicker,this),this.emojiPicker.classList.remove("u-display-n")},n.prototype.speak=function(t){var e,n,i;return e=new BC.Chat.Input(t),n=new BC.Chat.PendingLine(e.getAttributesForRoom(this.room)),i=new BC.Chat.PendingLineController(n,this.roomController),i.deliver()?(this.transcriptController.unmarkDeliveredLines(),this.room.enable(),!0):(this.shakeElement(),this.room.disable(),this.room.showDisconnectedMessage(),!1)},n.prototype.startedTyping=function(){return"started"!==this.typing&&(this.typing="started",this.room.perform("typing",{typing:this.typing}),this.transcriptController.exitDeleteMode()),clearTimeout(this.stopTimeout),this.stopTimeout=setTimeout(this.stoppedTyping,3e3)},n.prototype.stoppedTyping=function(){if("started"===this.typing)return this.typing="stopped",this.room.perform("typing",{typing:this.typing})},n.prototype.disable=function(){return this.stoppedTyping()},n.prototype.detached=function(){return this.disable()},n.prototype.emojiPicked=function(t){return this.element.editor.insertString(t)},n.prototype.emojiPickerClosed=function(){return this.element.focus()},n.prototype.awaitTrixEditor=function(t){return this.element.editor?t():BC.handleEvent("trix-initialize",{on:this.element,once:!0,"with":t})},n.prototype.onKeypress=function(t){var e,n;return t.keyCode!==BC.keyCodes.enter||t.shiftKey?this.startedTyping():(t.preventDefault(),e=this.getInputHTML(),n=this.getInputString().trim(),0===n.length?(this.shakeElement(),this.removeTrailingNewline()):this.speak({html:e,text:n})?(this.resetElement(),this.stoppedTyping()):this.removeTrailingNewline())},n.prototype.onTrixFocus=function(){return this.transcriptController.exitDeleteMode()},n.prototype.onTrixChange=function(){return this.toggleQuoteFormatting(),this.toggleBigEmoji()},n.prototype.shakeElement=function(){return BC.shakeElement(this.element)},n.prototype.resetElement=function(){return this.element.value=""},n.prototype.getInputString=function(){return this.element.editor.getDocument().toString().replace(/\n$/,"")},n.prototype.getInputHTML=function(){return r(this.element.value)},n.prototype.removeTrailingNewline=function(){var t,e,n;if(-1!==(n=this.getInputString().search(/\n$/)))return t=this.element.editor,e=t.getSelectedRange(),t.setSelectedRange(n),t.deleteInDirection("forward"),t.setSelectedRange(e)},n.prototype.toggleQuoteFormatting=function(){var t,e,n,i,r;if(t=this.element.editor,e=t.attributeIsActive("quote"),i=this.getInputString(),a(i)?e||(r="activate"):e&&(r="deactivate"),r)return n=t.getSelectedRange(),t.setSelectedRange([0,i.length+1]),t[r+"Attribute"]("quote"),t.setSelectedRange(n)},n.prototype.toggleBigEmoji=function(){var t,e;return e=this.getInputString(),t=BC.stringIsEntirelyEmoji(e),this.element.classList.toggle("chat__mic--emoji",t)},a=function(t){if(!o(t))return/\n/.test(t)},o=function(t){return/^(\/|!)/.test(t)},r=function(t){var e,n,i,r,o,a;for(e=document.createElement("div"),e.innerHTML=t,o=e.querySelectorAll("blockquote"),n=0,i=o.length;n<i;n++)r=o[n],"BR"===(null!=(a=r.lastChild)?a.tagName:void 0)&&r.removeChild(r.lastChild);return e.innerHTML},n}()}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=BC.Chat.renderTemplate,BC.Chat.PendingLineController=function(){function n(t,n){var i;this.pendingLine=t,this.roomController=n,this.didClickResendLink=e(this.didClickResendLink,this),this.handleStalePendingLine=e(this.handleStalePendingLine,this),this.uuid=this.pendingLine.get("uuid"),i=this.roomController,this.transcriptController=i.transcriptController,this.room=i.room}var i,r;return n.prototype.deliver=function(){switch(this.pendingLine.get("type")){case"help":return this.displayHelp();case"report":return this.sendReport();default:return this.performSpeak()}},n.prototype.performSpeak=function(){if(this.room.perform("speak",this.pendingLine.toJSON()))return this.appendLine("pending",this.pendingLine),this.monitorDelivery(),!0},n.prototype.appendLine=function(e,n){var i;return i=t(e+"_line",n),this.transcriptController.appendLine(i)},n.prototype.displayHelp=function(){return this.appendLine("help",{person:this.room.campfirePerson})},n.prototype.sendReport=function(){var t;return this.appendDebugLine("Sending debug report to the developers\u2026"),t={location:location.toString(),lines:this.transcriptController.getLineRecordingIDs()},BC.ChatWatchdog.sendReport(t).then(function(t){return function(){return t.appendDebugLine("Report sent")}}(this))["catch"](function(t){return function(e){return t.appendDebugLine("Couldn't send report: "+e)}}(this))},n.prototype.appendDebugLine=function(t){return this.appendLine("debug",{content:t,person:this.room.campfirePerson})},i=6e3,r="[data-behavior~=resend_chat_line]",n.prototype.monitorDelivery=function(){return setTimeout(this.handleStalePendingLine,i)},n.prototype.handleStalePendingLine=function(){if(this.lineIsPending())return this.transcriptController.fetchPendingLine(this.uuid,function(t){return function(e){return e?(t.room.log("Fetched "+t.uuid+" from the server"),Beanstalk.logEvent("actionCableChatPendingSpeakFetchedFromServer")):(t.transcriptController.markLineUndelivered(t.uuid),t.installResendLinkHandler(),BC.cable.connection.reopen(),t.room.log("Marked "+t.uuid+" as undelivered and reopened connection"),Beanstalk.logEvent("actionCableChatPendingSpeakMarkedUndelivered"))}}(this)),this.room.log("Speaking "+this.uuid+" timed out after "+i/1e3+"s"),Beanstalk.logEvent("actionCableChatPendingSpeakTimeout",i/1e3)},n.prototype.installResendLinkHandler=function(){var t;return t=this.getElement().querySelector(r),t.addEventListener("click",this.didClickResendLink,!0)},n.prototype.didClickResendLink=function(t){if(t.preventDefault(),this.deliver())return this.removeElement()},n.prototype.getElement=function(){return null!=this.element?this.element:this.element=this.transcriptController.findPendingLine(this.uuid)},n.prototype.removeElement=function(){var t;if(t=this.getElement())return t.parentNode.removeChild(t)},n.prototype.lineIsPending=function(){return null!=this.transcriptController.findPendingLine(this.uuid)},n}()}.call(this),function(){var t,e,n;t=BC.Chat,e=t.renderTemplate,n=t.uploadProgressSelector,BC.Chat.PendingUploadController=function(){function t(t,e,n){this.file=t,this.fileUploadUrl=e,this.transcriptController=n,this.pendingLine=new BC.Chat.PendingLine({type:"upload",filename:this.file.name}),this.uuid=this.pendingLine.get("uuid")}return t.prototype.start=function(){return this.startUpload(),this.appendLine()},t.prototype.startUpload=function(){var t,e;return e=BC.accountPath(this.fileUploadUrl,{name:this.file.name,uuid:this.uuid}),t=new BC.FileUpload({file:this.file,url:e}),t.delegate=this,t.enqueue()},t.prototype.appendLine=function(){var t;return t=e("pending_line",this.pendingLine),this.transcriptController.appendLine(t),this.transcriptController.unmarkDeliveredLines()},t.prototype.fileUploadDidFail=function(){return this.transcriptController.markLineUndelivered(this.uuid)},t.prototype.fileUploadDidProgress=function(t){var e,i;return null==this.progressElement&&(this.progressElement=null!=(e=this.transcriptController.findPendingLine(this.uuid))?e.querySelector(n):void 0),null!=(i=this.progressElement)?i.textContent=Math.round(t):void 0},t}()}.call(this),function(){var t,e,n;e=BC.Chat,n=e.typingStatusSelector,t=e.createLineElement,BC.Chat.RoomController=function(){function e(t){var e;this.room=t,e=this.room,this.element=e.element,this.watchdog=e.watchdog,this.statusElement=this.element.querySelector(n),this.transcriptController=new BC.Chat.TranscriptController(this),this.inputController=new BC.Chat.InputController(this),this.showDisconnectedMessage({delay:i})}var i,r;return i=15e3,e.prototype.receive=function(t){switch(t.action){case"typing":return this.typing(t);case"line":return this.createLine(t);case"delete":return this.deleteLine(t)}},e.prototype.enable=function(){return this.clearTypingStatus(),this.hideDisconnectedMessage(),null!=this.element.dataset.previouslyEnabled?this.transcriptController.fetchMissingLines():this.element.dataset.previouslyEnabled="",this.notifyControllers("enable")},e.prototype.disable=function(){return this.clearTypingStatus(),this.showDisconnectedMessage({delay:i}),this.notifyControllers("disable")},e.prototype.attached=function(){return this.notifyControllers("attached")},e.prototype.detached=function(){return this.notifyControllers("detached")},e.prototype.notifyControllers=function(t){var e,n;return"function"==typeof(e=this.inputController)[t]&&e[t](),"function"==typeof(n=this.transcriptController)[t]?n[t]():void 0},e.prototype.typing=function(t){var e,n,i;if(e=t.participantId,n=t.participantName,i=t.toggle,e.toString()!==BC.current.person.id)return"on"===i?this.setTypingStatus(n+" is typing\u2026"):this.clearTypingStatus()},e.prototype.setTypingStatus=function(t){return this.statusElement.textContent=t,this.statusElement.classList.add("active")},e.prototype.clearTypingStatus=function(){return this.statusElement.classList.remove("active"),setTimeout(function(t){return function(){if(!t.statusElement.classList.contains("active"))return t.statusElement.textContent=""}}(this),60)},e.prototype.createLine=function(e){var n,i,o,a,s;return n=e.html,i=t(n),a=i.dataset,s=a.uuid,o=a.recordingId,this.log("createLine",o),this.transcriptController.findPendingLine(s)?this.transcriptController.replacePendingLine(s,i):this.transcriptController.appendLine(i),r(i)},e.prototype.showDisconnectedMessage=function(t){var e;return e=(null!=t?t:{delay:0}).delay,clearTimeout(this.disconnectedMessageTimeout),this.disconnectedMessageTimeout=setTimeout(function(t){return function(){return t.element.classList.add("chat--disconnected")}}(this),e)},e.prototype.hideDisconnectedMessage=function(){return clearTimeout(this.disconnectedMessageTimeout),this.element.classList.remove("chat--disconnected")},r=function(t){var e,n,i,r,o;for(r=t.querySelectorAll("[data-behavior~=sound]"),o=[],n=0,i=r.length;n<i;n++)e=r[n],o.push(BC.playSound(e.dataset.url));return o},e.prototype.deleteLine=function(t){var e;return e=t.recordingId,this.transcriptController.removeLine(e)},e.prototype.log=function(t,e){return this.watchdog.log("receiver."+t,e)},e}()}.call(this),function(){var t,e,n,i,r,o,a,s,u,l;s=BC.Chat,s.renderTemplate,n=s.createLineElement,a=s.linesSelector,o=s.lineSelector,u=s.transcriptSelector,e="[data-behavior~=chat_line_gap]",t=".blank-slate--campfire",r="chat-line--delivered",l="chat-line--undelivered",i="chat-line--delete-mode",BC.Chat.TranscriptController=function(){function s(e){var n;this.roomController=e,n=this.roomController,this.room=n.room,this.watchdog=n.watchdog,this.element=this.room.element.querySelector(u),this.lines=this.room.element.querySelector(a),this.blankSlateElement=this.room.element.querySelector(t),this.formatter=new BC.Chat.TranscriptFormatter(this.lines),this.handlePagination(),this.monitorContentChanges()}var c,d,h;return s.prototype.log=function(t,e){return this.watchdog.log("transcript."+t,e)},s.prototype.handlePagination=function(){return this.element.addEventListener("bc-infinite-page:beforeload",function(t){return function(e){var n;return(n=t.findFirstLine())?t.element.params={before_recording_id:n.dataset.recordingId}:e.preventDefault()}}(this)),this.element.addEventListener("click",function(t){return function(n){var i;if(i=n.target,BC.matches(i,e)||BC.closest(i,e))return n.preventDefault(),t.fetchMissingLinesInGap()}}(this))},s.prototype.monitorContentChanges=function(){return this.element.addEventListener("bc-infinite-page:load",function(t){return function(){return t.afterRender()}}(this)),this.element.addEventListener("height:change",function(t){return function(){return t.keepScrolledToBottom()}}(this)),this.element.addEventListener("bc-grouped-dates:before",function(t){return function(){return t.wasNearBottomBeforeDateGrouping=t.isScrolledNearBottom()}}(this)),this.element.addEventListener("bc-grouped-dates:update",function(t){return function(){return t.wasNearBottomBeforeDateGrouping&&t.scrollToBottom(),delete t.wasNearBottomBeforeDateGrouping}}(this))},s.prototype.attached=function(){return this.setInitialScrollPosition(),this.showOrHideBlankSlate()},s.prototype.appendLine=function(t){var e,i;return e=n(t),i=e.dataset.recordingId,this.log("appendLine",i),this.render(function(){return this.lines.appendChild(e),this.log("appendLine.render",i)})},s.prototype.removeLine=function(t){return this.render(function(){var e;if(e=this.findLine({recordingId:t}))return this.lines.removeChild(e),this.formatter.rethread()})},s.prototype.replacePendingLine=function(t,e){return this.render(function(){var i;return(i=this.findPendingLine(t))&&this.lines.replaceChild(n(e),i),this.markLineDelivered(t)})},s.prototype.fetchMissingLines=function(){var t,e;return(t=this.findLastLine())&&(e={since_recording_id:t.dataset.recordingId}),this.log("fetchMissingLines",{params:e}),this.element.performRequest(null!=e?e:{}).then(function(e){return function(n){if(n=c(n))return e.log("fetchMissingLines.performRequest.then",h(n)),e.render(function(){return null!=t?t.insertAdjacentHTML("afterend",n):this.lines.insertAdjacentHTML("beforeend",n)})}}(this))},s.prototype.fetchMissingLinesInGap=function(){var t,n;return t=this.element.querySelector(e),t.classList.add("loading"),n={"between_recording_ids[]":t.dataset.recordingIds.split(",")},this.log("fetchMissingLinesInGap",{params:n}),this.element.performRequest(n).then(function(e){return function(n){if(n=c(n))return e.render({keepScrolledToBottom:!1},function(){return this.log("fetchMissingLinesInGap.performRequest.then",h(n)),t.insertAdjacentHTML("afterend",n),t.parentNode.removeChild(t),this.formatter.update()})}}(this))},s.prototype.fetchPendingLine=function(t,e){var n,i;return(n=this.findActiveLineBeforePendingLine(t))?(i={after_recording_id:n.dataset.recordingId},this.element.performRequest(i).then(function(n){return function(i){var r;return(r=d(i,t))?(n.replacePendingLine(t,r),e(!0)):e(!1)}}(this))):e(!1)},s.prototype.render=function(t,e){var n;return null==e&&(e=t,t={keepScrolledToBottom:!0}),n=function(e){return function(n){return t.keepScrolledToBottom?e.keepScrolledToBottom(n):n()}}(this),requestAnimationFrame(function(t){return function(){return n(function(){return e.call(t),t.afterRender()})}}(this))},s.prototype.afterRender=function(){return this.formatter.update(),this.showOrHideBlankSlate()},c=function(t){var e,n;return e=document.createElement("div"),e.innerHTML=t,null!=(n=e.querySelector(a))?n.innerHTML.trim():void 0},d=function(t,e){var n,i;if(n=c(t))return i=document.createElement("div"),i.innerHTML=n,i.querySelector("[data-uuid='"+e+"']")},h=function(t){var e,n,i,r,a,s;for(e=document.createElement("div"),e.innerHTML=t,a=e.querySelectorAll(o),s=[],n=0,i=a.length;n<i;n++)r=a[n],s.push(r.dataset.recordingId);return s},s.prototype.markLineDelivered=function(t){var e;return this.unmarkDeliveredLines(),null!=(e=this.findLine({uuid:t}))?e.classList.add(r):void 0},s.prototype.unmarkDeliveredLines=function(){var t,e,n,i,o;for(i=this.element.querySelectorAll("."+r),o=[],e=0,n=i.length;e<n;e++)t=i[e],o.push(t.classList.remove(r));return o},s.prototype.markLineUndelivered=function(t){var e;return null!=(e=this.findPendingLine(t))?e.classList.add(l):void 0},s.prototype.findLine=function(t){var e,n,i;if(e=t.recordingId,i=t.uuid,null!=e?n="[data-recording-id='"+e+"']":null!=i&&(n="[data-uuid='"+i+"']"),null!=n)return this.element.querySelector(n)},s.prototype.findPendingLine=function(t){return this.element.querySelector("[data-pending-uuid='"+t+"']")},s.prototype.findActiveLineBeforePendingLine=function(t){var e,n,i,r,a,s;for(a=this.findPendingLine(t),e=null,s=this.element.querySelectorAll(o),n=0,i=s.length;n<i;n++){if((r=s[n])===a)return e;r.dataset.recordingId&&(e=r)}return null},s.prototype.findLastLine=function(){return this.element.querySelector(o+":last-of-type")},s.prototype.findFirstLine=function(){return this.element.querySelector(o)},s.prototype.findTargetLine=function(){var t,e;if(t=null!=(e=location.pathname.match(/@(\d+)/))?e[1]:void 0)return this.findLine({recordingId:t})},s.prototype.getLineRecordingIDs=function(){return h(this.lines.innerHTML)},s.prototype.setInitialScrollPosition=function(){var t;return(t=this.findTargetLine())?this.scrollToElement(t):this.scrollToBottom()},s.prototype.scrollToElement=function(t){return t.scrollIntoView(),requestAnimationFrame(function(){return t.scrollIntoView()})},s.prototype.scrollToBottom=function(){var t;if(t=this.findLastLine())return this.scrollToElement(t)},s.prototype.keepScrolledToBottom=function(t){var e;try{if(e=this.isScrolledNearBottom(),null!=t)return t.call(this)}finally{e&&this.scrollToBottom()}},s.prototype.isScrolledNearBottom=function(){return this.element.isScrolledNearBottom()},s.prototype.getVisibleScrollTop=function(){return this.element.scrollTop+parseInt(getComputedStyle(this.element).paddingTop)},s.prototype.exitDeleteMode=function(){var t,e,n,r,a;for(r=this.element.querySelectorAll(o+"."+i),a=[],t=0,e=r.length;t<e;t++)n=r[t],a.push(n.classList.remove(i));return a},s.prototype.showOrHideBlankSlate=function(){return this.findFirstLine()?this.hideBlankSlate():this.showBlankSlate()},s.prototype.showBlankSlate=function(){var t;return null!=(t=this.blankSlateElement)?t.classList.add("blank-slate--display"):void 0},s.prototype.hideBlankSlate=function(){var t;return null!=(t=this.blankSlateElement)?t.classList.remove("blank-slate--display"):void 0},s}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};BC.FileUploadManager=function(){function e(){this.didCompleteUpload=t(this.didCompleteUpload,this),this.uploadNext=t(this.uploadNext,this),this.fileUploads=[]}var n;return n=1,e.prototype.add=function(t){return this.fileUploads.push(t),this.uploadNext()},e.prototype.remove=function(t){return t.cancel(),this.fileUploads=this.fileUploads.filter(function(e){return e!==t})},e.prototype.stop=function(){return this.fileUploads.forEach(this.remove,this)},e.prototype.getActive=function(){return this.fileUploads.filter(function(t){return t.isActive()})},e.prototype.getPending=function(){return this.fileUploads.filter(function(t){return t.isPending()})},e.prototype.getActiveOrPending=function(){return this.fileUploads.filter(function(t){return t.isActive()||t.isPending()})},e.prototype.getDone=function(){return this.fileUploads.filter(function(t){return t.isDone()})},e.prototype.isUploading=function(){return this.getActiveOrPending().length>0},e.prototype.canStartUpload=function(){return this.getActive().length<n},e.prototype.getNext=function(){return this.getPending()[0]},e.prototype.uploadNext=function(){var t;if(this.canStartUpload()&&(t=this.getNext()))return t.perform().then(this.didCompleteUpload)["catch"](this.didCompleteUpload)},e.prototype.didCompleteUpload=function(){return this.getDone().forEach(this.remove,this),this.uploadNext()},e}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};BC.FileUploadPreviewCompletion=function(){function e(e,n){this.data=e,this.delegate=n,this.didGetUpdate=t(this.didGetUpdate,this),this.checkForUpdateOrStop=t(this.checkForUpdateOrStop,this),this.stopPollingForUpdate=t(this.stopPollingForUpdate,this),this.isProcessing()&&this.pollForUpdate()}return e.prototype.isProcessing=function(){return this.data&&this.data.processing_preview&&this.data.status_url},e.prototype.pollForUpdate=function(){if(!this.active)return this.active=!0,this.location=window.location,this.timer=setInterval(this.checkForUpdateOrStop,2e3)},e.prototype.stopPollingForUpdate=function(){if(this.active)return clearInterval(this.timer),this.timer=null,this.location=null,this.active=null},e.prototype.checkForUpdateOrStop=function(){return this.location===window.location?this.checkForUpdate():this.stopPollingForUpdate()},e.prototype.checkForUpdate=function(){return BC.fetch(this.data.status_url,{as:"json"}).then(this.didGetUpdate)["catch"](this.stopPollingForUpdate)},e.prototype.didGetUpdate=function(t){if(this.data=t,this.active&&!this.isProcessing())return this.delegate.previewDidComplete(this.data),this.stopPollingForUpdate()},e}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};BC.FileUpload=function(){function e(e){var n,i,r,a,s;if(i=e.file,r=e.form,s=e.url,a=e.method,this.manager=e.manager,this.requestDidError=t(this.requestDidError,this),this.requestDidLoad=t(this.requestDidLoad,this),this.requestDidProgress=t(this.requestDidProgress,this),i)this.payload=this.file=i,n="application/octet-stream";else{if(!r)throw new Error("No file or form provided");this.file=r.file,this.payload=new FormData,this.payload.append(r.name,this.file)}null==this.manager&&(this.manager=BC.fileUploadManager),this.state=o,this.promise=new Promise(function(t){return function(e,n){t.resolve=e,t.reject=n}}(this)),this.xhr=BC.xhr(s,{method:null!=a?a:"post",contentType:n}),this.xhr.upload.addEventListener("progress",this.requestDidProgress),this.xhr.addEventListener("load",this.requestDidLoad),this.xhr.addEventListener("error",this.requestDidError)}var n,i,r,o;return o=1,n=2,i=3,r="It looks like that file is empty. Files must be greater than 0 bytes.",e.prototype.enqueue=function(){return this.manager.add(this)},e.prototype.destroy=function(){return this.cancel(),this.manager.remove(this)},e.prototype.perform=function(){return this.file.size>0?(this.state=n,this.xhr.send(this.payload)):this.finalize({error:r}),this.promise},e.prototype.cancel=function(){var t;return this.isActive()&&(this.xhr.abort(),null!=(t=this.delegate)&&"function"==typeof t.fileUploadDidCancel&&t.fileUploadDidCancel()),this.state=i},e.prototype.isPending=function(){return this.state===o},e.prototype.isActive=function(){return this.state===n},e.prototype.isDone=function(){return this.state===i},e.prototype.finalize=function(t){var e,n,r;return e=(null!=t?t:{}).error,this.state=i,null!=e?(this.reject(),null!=(n=this.delegate)&&"function"==typeof n.fileUploadDidFail?n.fileUploadDidFail(e):void 0):(this.resolve(),null!=(r=this.delegate)&&"function"==typeof r.fileUploadDidComplete&&r.fileUploadDidComplete(this.getResponseData()),this.checkForPreviewCompletion())},e.prototype.getResponseData=function(){return null!=this.responseData?this.responseData:this.responseData=function(){try{return JSON.parse(this.xhr.responseText)}catch(t){return this.xhr.responseText}}.call(this)},e.prototype.requestDidProgress=function(t){var e,n;if(e=t.loaded/t.total*100,Raven.captureBreadcrumb({level:"info",category:"xhr.progress",message:"XHR progress "+e+"%",data:{percent:e,event:t}}),"number"==typeof e&&!isNaN(e))return null!=(n=this.delegate)&&"function"==typeof n.fileUploadDidProgress?n.fileUploadDidProgress(e):void 0},e.prototype.requestDidLoad=function(){var t;return 200<=(t=this.xhr.status)&&t<300?this.finalize():this.finalize({error:"status "+this.xhr.status})},e.prototype.requestDidError=function(t){return this.finalize({error:t})},e.prototype.checkForPreviewCompletion=function(){return new BC.FileUploadPreviewCompletion(this.getResponseData(),this)},e.prototype.previewDidComplete=function(t){var e;return null!=(e=this.delegate)&&"function"==typeof e.fileUploadDidProcessPreview?e.fileUploadDidProcessPreview(t):void 0},e}()}.call(this),function(){var t,e;t="Your files will not finish uploading if you leave this page.",e=t+" Are you sure you want to go?",$(document).on("turbolinks:before-visit",function(){if(BC.isUploadingFiles())return!!confirm(e)&&(BC.fileUploadManager.stop(),!0)}),$(window).on("beforeunload",function(){if(BC.isUploadingFiles())return t})}.call(this),function(){BC.pickFiles=function(t,e){var n,i,r,o;return null==t&&(t={}),"function"==typeof t&&(e=t,t={}),r=!1!==t.multiple,t.accept&&(i=""+t.accept),n=$('<input type="file">'),r&&n.attr("multiple",""),i&&n.attr("accept",i),n.hide().appendTo("body"),o=function(){if(n)return n.remove(),n=null},n.on("change",function(){return e(r?this.files:this.files[0]),o()}),n.click(),BC.defer(function(){return $(document).one("click",o)})}}.call(this),function(){null==BC.fileUploadManager&&(BC.fileUploadManager=new BC.FileUploadManager),BC.isUploadingFiles=function(){return BC.fileUploadManager.isUploading()}}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};e=BC.Chat,e.renderTemplate,t=e.attachButtonSelector,BC.Chat.UploadController=function(){function e(e,i){this.element=e,this.transcriptController=i,this.onPaste=n(this.onPaste,this),this.onDrop=n(this.onDrop,this),this.didClickAttachButton=n(this.didClickAttachButton,this),this.fileUploadUrl=this.element.dataset.fileUploadUrl,this.element.addEventListener("dropzone:drop",this.onDrop),this.element.addEventListener("paste",this.onPaste),this.element.querySelector(t).addEventListener("click",this.didClickAttachButton)}var r;return e.prototype.didClickAttachButton=function(){return BC.pickFiles(function(t){return function(e){var n,i,r,o;for(o=[],i=0,r=e.length;i<r;i++)n=e[i],o.push(t.uploadFile(n));return o}}(this))},e.prototype.onDrop=function(t){var e,n,i,r,o;for(n=t.files,o=[],i=0,r=n.length;i<r;i++)e=n[i],o.push(this.uploadFile(e));return o},e.prototype.onPaste=function(t){var e,n,o,a;if((n=t.clipboardData)&&i.call(n.types,"Files")>=0&&(e=null!=(o=n.items)&&null!=(a=o[0])&&"function"==typeof a.getAsFile?a.getAsFile():void 0))return t.preventDefault(),e.name="paste."+r(e),this.uploadFile(e)},e.prototype.uploadFile=function(t){var e;return e=new BC.Chat.PendingUploadController(t,this.fileUploadUrl,this.transcriptController),e.start()},r=function(t){var e,n;return null!=(e=t.type)&&null!=(n=e.match(/\/(\w+)$/))?n[1]:void 0},e}()}.call(this),function(){BC.Chat.Input=function(){function t(t){"string"==typeof t&&(t={text:t}),this.html=t.html,this.text=t.text,null!=this.html&&null==this.text&&(this.text=e(this.html))}var e;return t.definitions=[],t.register=function(t){return this.definitions.push(t)},t.register({type:"help",pattern:/^\/help/,property:"text"}),t.register({type:"report",pattern:/^\/report/,property:"text"}),t.register({type:"meme",pattern:RegExp("^/meme ("+BC.Chat.memeNames.join("|")+") \\| ([^|]+) \\| ([^]+)"),matchNames:["name","top","bottom"]}),t.register({type:"play",pattern:RegExp("^/play ("+BC.Chat.soundNames.join("|")+")"),matchNames:["sound_name"]}),t.register({type:"code",pattern:/^\/code ([^|]+) \| ([^]+)/,matchNames:["language","content"]}),
t.register({type:"integration_command",pattern:/^!(\S+) ([^]+)/,matchNames:["service_name","command"],contentProperty:"html"}),t.prototype.getAttributes=function(){var t;return null!=(t=this.getAttributesForMatchingDefinition())?t:this.getAttributesForInput()},t.prototype.getAttributesForRoom=function(t){var e,n;return e=this.getAttributes(),!t.integrationPerson||"text"!==(n=e.type)&&"rich_text"!==n?e:{type:"integration_command",service_name:t.integrationPerson.name,command:this.text,content:e.content}},t.prototype.getAttributesForMatchingDefinition=function(){var t,e,n,i,r;for(r=this.constructor.definitions,e=0,n=r.length;e<n;e++)if(t=r[e],i=this.text.match(t.pattern))return this.getAttributesFromDefinitionWithMatch(t,i);return null},t.prototype.getAttributesFromDefinitionWithMatch=function(t,e){var n,i,r,o,a,s,u,l;for(l=t.type,u=t.matchNames,i=t.contentProperty,null==u&&(u=[]),n={type:l},null!=i&&(n.content=this[i]),o=r=0,a=u.length;r<a;o=++r)s=u[o],n[s]=e[o+1];return n},t.prototype.getAttributesForInput=function(){return null!=this.html?{type:"rich_text",content:this.html}:{type:"text",content:this.text}},e=function(t){return Trix.HTMLParser.parse(t).getDocument().toString().replace(/\n$/,"")},t}()}.call(this),function(){BC.Chat.PendingLine=function(){function t(t){this.attributes=null!=t?t:{},this.attributes.uuid=BC.generateUUID()}return t.prototype.get=function(t){return this.attributes[t]},t.prototype.toJSON=function(){return BC.copyObject(this.attributes)},t}()}.call(this),function(){var t;t=BC.Chat.lineSelector,BC.Chat.TranscriptFormatter=function(){function e(t){this.element=t,this.update()}var n,i,r,o,a,s,u,l,c,d,h,p,f,m,g,v,b,y,C;return b=3e5,e.prototype.update=function(){var t,e,n,i,r;for(i=this.getUnformattedLines(),r=[],t=0,e=i.length;t<e;t++)n=i[t],r.push(this.formatLine(n));return r},e.prototype.rethread=function(){var t,e,n,i,r;for(i=this.getLines(),r=[],t=0,e=i.length;t<e;t++)n=i[t],r.push(this.rethreadLine(n));return r},e.prototype.getLines=function(){return this.element.querySelectorAll(t)},e.prototype.getUnformattedLines=function(){return this.element.querySelectorAll(t+":not([data-formatted])")},e.prototype.formatLine=function(t){return this.lineIsDuplicate(t)?g(t):(v(t),u(t),s(t),n(t),m(t))},e.prototype.rethreadLine=function(t){return C(t),v(t)},e.prototype.lineIsDuplicate=function(e){if(e.id)return this.element.querySelectorAll(t+"[id='"+e.id+"']").length>1},g=function(t){return t.parentNode.removeChild(t)},v=function(t){if(l(t,t.previousElementSibling))return t.classList.add("chat-line--thread")},C=function(t){return t.classList.remove("chat-line--thread")},u=function(t){if(o(t)===BC.current.person.id&&t.classList.add("chat-line--me"),d(t))return t.classList.add("chat-line--mention")},s=function(t){var e,n,i,r,o;for(r=t.querySelectorAll("pre code"),o=[],n=0,i=r.length;n<i;n++)e=r[n],o.push(hljs.highlightBlock(e));return o},n=function(t){if(c(t))return t.classList.add("chat-line--emoji")},m=function(t){return t.setAttribute("data-formatted","")},l=function(t,e){if(e)return h(t,e)&&f(t,e)&&p(t,e)},d=function(t){return t.querySelector("bc-mention[gid='"+BC.current.person.gid+"']")},c=function(t){var e;return e=i(t),BC.stringIsEntirelyEmoji(e)},h=function(t,e){return o(t)===o(e)},f=function(t,e){return r(t).equals(r(e))},p=function(t,e){return y(t,e)<b},y=function(t,e){return Math.abs(a(t)-a(e))},r=function(t){return CalendarDate.parse(t.dataset.datetime)},a=function(t){return Date.parse(t.dataset.datetime)},o=function(t){return t.dataset.creatorId},i=function(t){return t.querySelector(".chat-line__body").textContent.trim()},e}()}.call(this),function(){var t,e=[].slice;BC.Chat.Watchdog=function(){function t(){this.records=[],this.log("created")}var e,n;return t.watchdogs={},t.get=function(t){var e;return null!=(e=this.watchdogs)[t]?e[t]:e[t]=new this},t.sendReport=function(t){return BC.fetch(n(),{method:"post",body:this.createReport(t)})},t.createReport=function(t){var e;return e={userAgent:navigator.userAgent.toString(),person:BC.current.person},JSON.stringify({info:e,report:t,watchdogs:this.watchdogs})},n=function(){return BC.accountPath("/buckets/1/chats/177435597/uploads",{name:"report.json"})},t.prototype.log=function(t,n){return this.records.push(e(t,n))},t.prototype.toJSON=function(){return this.records},e=function(t,e){var n;return n=(new Date).getTime(),null!=e?[n,t,e]:[n,t]},t}(),t=function(){var t,e,n;return n={},e=0,t=function(t){var i;return null!=n[i=t.getPath()]?n[i]:n[i]=++e},function(e){var n,i,r,o;return null==e&&(e=window.location),e=Turbolinks.Location.wrap(e),r=t(e),n=e.getPathComponents(),o=function(){var t,e,r;for(r=[],t=0,e=n.length;t<e;t++)i=n[t],i.match(/^\d+$/)&&r.push(i);return r}(),[r,o.join("/")].join("#")}}(),ActionCable.log=function(){var t,n;return t=BC.Chat.Watchdog.get("cable"),n=ActionCable.log,function(){var i;return i=1<=arguments.length?e.call(arguments,0):[],t.log("log",i),n.apply(ActionCable,i)}}(),function(){var e;e=BC.Chat.Watchdog.get("navigation"),document.addEventListener("turbolinks:visit",function(){var n,i,r,o;return r=o=Turbolinks.controller.currentVisit,i=r.location,n=r.action,e.log("visit",{location:t(i),action:n,hasCachedSnapshot:o.hasCachedSnapshot()})}),document.addEventListener("turbolinks:render",function(){var n;return n=document.documentElement.hasAttribute("data-turbolinks-preview"),e.log("render",{location:t(),isPreview:n})}),document.addEventListener("turbolinks:load",function(n){return e.log("load",{location:t(n.data.url)})}),document.addEventListener("visibilitychange",function(){var t;return t=document.visibilityState,e.log("visibilitychange",{visibilityState:t})}),["focus","blur"].forEach(function(t){return window.addEventListener(t,function(){return e.log("focuschange",{hasFocus:document.hasFocus()})})})}()}.call(this),function(){this.JST||(this.JST={}),this.JST["all/channels/chat/templates/debug_line"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?r(t):""},i=t.safe,r=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<article class="chat-line chat-line--integration chat-line--debug-message" data-behavior="chat_line">\n  <div class="chat-line__avatar">\n    <img src="'),e.push(n(this.person.avatar_url)),e.push('" class="avatar" height="64" width="64">\n  </div>\n\n  <div class="chat-line__bubble">\n    <span class="chat-line__meta">\n      <strong class="chat-line__author">'),e.push(n(this.person.name)),e.push('</strong>\n      <span class="chat-line__timestamp"><time>'),e.push(n(LocalTime.strftime(new Date,"%l:%M%P"))),e.push('</time></span>\n    </span>\n\n    <div class="chat-line__body">\n      '),e.push(n(this.content)),e.push("\n    </div>\n  </div>\n</article>\n")}).call(this)}.call(t),t.safe=i,t.escape=r,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["all/channels/chat/templates/help_line"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?r(t):""},i=t.safe,r=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<article class="chat-line chat-line--integration chat-line--help" data-behavior="chat_line">\n  <div class="chat-line__avatar">\n    <img src="'),e.push(n(this.person.avatar_url)),e.push('" class="avatar" height="64" width="64">\n  </div>\n\n  <span class="chat-line__meta">\n    <strong class="chat-line__author">'),e.push(n(this.person.name)),e.push("</strong>\n  </span>\n\n  <p>\n    <strong>Have some fun with these useful commands:</strong>\n  </p>\n\n  <ul>\n    <li>/meme grumpycat | I'm grumpy | Because I'm a cat</li>\n    <li>/play ohyeah</li>\n    <li>/code ruby | [paste]</li>\n  </ul>\n\n  <p><strong>Meme options:</strong> "),e.push(n(BC.Chat.memeNames.join(", "))),e.push("</p>\n  <p><strong>Play options:</strong> "),e.push(n(BC.Chat.soundNames.join(", "))),e.push("</p>\n</article>\n")}).call(this)}.call(t),t.safe=i,t.escape=r,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["all/channels/chat/templates/pending_line"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?r(t):""},i=t.safe,r=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i;t=new Date,e.push('\n<article class="chat-line chat-line--me chat-line--pending" data-behavior="chat_line" data-creator-id="'),e.push(n(BC.current.person.id)),e.push('" data-datetime="'),e.push(n(t.toISOString())),e.push('" data-pending-uuid="'),e.push(n(this.get("uuid"))),e.push('">\n  <div class="chat-line__avatar">\n    <img src="'),e.push(n(BC.current.person.avatarUrl)),e.push('" class="avatar" height="64" width="64">\n  </div>\n\n  <div class="chat-line__bubble">\n    <span class="chat-line__meta">\n      <strong class="chat-line__author">Me</strong>\n      <span class="chat-line__timestamp">\n        <span class="btn btn--small btn--icon btn--overflow-icon-light btn--borderless chat-line__toggle-delete-mode"></span>\n        <time>'),e.push(n(LocalTime.strftime(t,"%l:%M%P"))),e.push('</time>\n      </span>\n    </span>\n\n    <div class="chat-line__body">\n      '),i=this.get("type"),e.push("\n      "),"play"===i?(e.push("\n        Playing "),e.push(n(this.get("sound_name"))),e.push("\u2026\n      ")):"code"===i?(e.push('\n        <pre><code class="hljs '),e.push(n(this.get("language"))),e.push('">'),e.push(this.get("content")),e.push("</code></pre>\n      ")):"meme"===i?(e.push("\n        Generating "),e.push(n(this.get("name"))),e.push(" meme\u2026\n      ")):"upload"===i?(e.push("\n        Uploading <strong>"),e.push(n(this.get("filename"))),e.push('</strong> (<span data-role="upload_progress">0</span>%)\n      ')):"text"===i?(e.push("\n        "),e.push(n(this.get("content"))),e.push("\n      ")):(e.push("\n        "),e.push(this.get("content")),e.push("\n      ")),e.push('\n    </div>\n  </div>\n\n  <div class="chat-line__resend">\n    <span class="chat-line__resend_message" data-role="resend_message">\n      '),"upload"===i?e.push("\n        Upload failed.\n      "):e.push('\n        Your message was not delivered. <a href="#" class="decorated chat-line__resend-link" data-behavior="resend_chat_line">Resend it</a>\n      '),e.push("\n    </span>\n  </div>\n</article>\n")}).call(this)}.call(t),t.safe=i,t.escape=r,e.join("")}}.call(this),function(){BC.appearance=BC.cable.subscriptions.create("AppearanceChannel",{initialized:function(){return this.update=this.update.bind(this),window.addEventListener("focus",this.update),window.addEventListener("blur",this.update),document.addEventListener("turbolinks:load",this.update),document.addEventListener("visibilitychange",this.update),this.keepAlive()},keepAlive:function(){return this.aliveAt=Date.now(),setInterval(function(t){return function(){return t.aliveAt=Date.now(),t.update()}}(this),15e3)},connected:function(){return this.online=!0,this.update()},disconnected:function(){return this.online=!1,this.update()},update:function(){return clearTimeout(this.updateTimeout),this.updateTimeout=setTimeout(function(t){return function(){if(t.contextChanged())return t.updateContext(),t.performUpdate()}}(this),500)},performUpdate:function(){return this.context.documentIsActive?this.perform("appear",{appearing_on:this.context.appearingOn}):this.perform("away")},getAppearingOn:function(){return $("main").data("appearing-on")},getContext:function(){return{documentIsActive:BC.documentIsActive(),appearingOn:this.getAppearingOn(),aliveAt:this.aliveAt,online:this.online}},contextChanged:function(){return JSON.stringify(this.context)!==JSON.stringify(this.getContext())},updateContext:function(){return this.context=this.getContext()}})}.call(this),function(){var t=[].slice;BC.cableMonitor=BC.cable.subscriptions.create("MonitoringChannel",{connected:function(){return null!=this.consumer.connectionMonitor?this.consumer.connectionMonitor.connected():this.consumer.connection.monitor.recordConnect()},received:function(t){switch(t.action){case"ping":case"pubsub_ping":return this.ping();case"info":return this.log(t.info)}},info:function(){var e;return e=1<=arguments.length?t.call(arguments,0):[],this.perform.apply(this,["info"].concat(t.call(e)))},chat:function(){return this.info({stream:"chat"})},unreads:function(){return this.info({stream:"unreads"})},server:function(t){return this.perform("server",{info:t})},server_errors:function(){return this.server("errors")},server_unreads:function(){return this.server("unreads")},server_unmonitored:function(){return this.server("unmonitored")},ping:function(){var t,e;return t=null!=(e=this.consumer.connectionMonitor)?e:this.consumer.connection.monitor,t.pingedAt=(new Date).getTime()},log:function(t){return ActionCable.log(t)}})}.call(this),function(){var t,e;t="RecordingInvalidationsChannel",e=null,addEventListener("bc:recording-id-change",function(n){var i;return i=n.recordingId,null!=e&&e.unsubscribe(),e=null!=i?BC.cable.subscriptions.create({channel:t,recording_id:i},{received:function(){return BC.triggerEvent(document,"bc:recording-invalidate",{recordingId:i})}}):null})}.call(this),function(){var t=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};BC.threads=BC.cable.subscriptions.create("ThreadsChannel",{collection:function(){return $("[data-thread-for-recording]")},connected:function(){return null!=this.staleSince&&setTimeout(function(t){return function(){return t.loadMissingEntries()}}(this),2e4*Math.random()),this.installPageChangeCallback(),this.subscribeToCurrentRecording()},disconnected:function(){return this.staleSince=Date.now()},received:function(t){return this.append(t.entry),this.updateCommentCount()},removed:function(){return setTimeout(function(t){return function(){return t.updateCommentCount()}}(this),2e3)},parentIsCurrentParent:function(t){return this.collection().data("thread-for-recording")===$(t).data("parent-id")},loadMissingEntries:function(){var t,e;if(this.staleSince=null,this.collection().length)return t=null!=(e=this.collection().children("[data-recording-id]").last().data("recording-id"))?e:0,$.get(BC.formatURL(this.collection().data("url"),{since_recording_id:t}),function(t){return function(e){if($(e).length&&t.parentIsCurrentParent(e))return t.scrollToLatestEntry(),t.append(e)}}(this))},append:function(e){var n,i,r,o,a,s,u;if(this.parentIsCurrentParent(e)){for(n=Array.isArray(e)?e:[e],r=this.collection().children("[data-thread-entry-gid]").map(function(){return this.dataset.threadEntryGid}).get(),u=[],o=0,a=n.length;o<a;o++)i=n[o],s=$(i).attr("data-thread-entry-gid"),t.call(r,s)<0?u.push(this.collection().append(i)):u.push(void 0);return u}},updateCommentCount:function(){var t,e,n,i,r,o;return t=$("[data-behavior~=comment_counter]"),e=$("[data-behavior~=comment_counter_description]"),r=this.collection().children("[data-type~=reply]").length,n=this.collection().children("[data-type~=comment]").length,o=n+r,i=0===o?"Discussion":1===r?"Comment/reply":r>1?"Comments/replies":1===n?"Comment":"Comments",t.text(o),e.text(i),t.toggle(o>0)},scrollToLatestEntry:function(){var t;if(null!=(t=this.collection().children()[0]))return this.collection().scrollTop(t.scrollHeight)},subscribeToCurrentRecording:function(){var t;return(t=$("[data-thread-for-recording]").data("thread-for-recording"))?this.perform("follow",{recording_id:t}):this.perform("unfollow")},installPageChangeCallback:function(){if(!this.installedPageChangeCallback)return this.installedPageChangeCallback=!0,BC.on("turbolinks:load","BC.threads.subscribeToCurrentRecording",function(){return BC.threads.subscribeToCurrentRecording()})}})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};BC.UnreadReader=function(){function n(e){this.unreads=e,this.delayedScan=t(this.delayedScan,this),this.scan=t(this.scan,this),this.pageLoaded=t(this.pageLoaded,this),this.visitStarted=t(this.visitStarted,this),this.ignoredIdentifiers=[],document.addEventListener("turbolinks:visit",this.visitStarted),document.addEventListener("turbolinks:load",this.pageLoaded),document.addEventListener("visibilitychange",this.delayedScan),window.addEventListener("focus",this.delayedScan),BC.ready(function(t){return function(){return BC.onScroll(t.scan),setInterval(t.scan,3e3)}}(this))}var i;return n.prototype.reset=function(){return $("[data-readable-identifier][data-read]").removeAttr("data-read"),requestAnimationFrame(this.scan)},n.prototype.visitStarted=function(){return this.visiting=!0},n.prototype.pageLoaded=function(){return this.visiting=!1,this.delayedScan()},n.prototype.visitPreventsReading=function(){return this.visiting||window.location.search.match(/[?&]skip_unread/)},n.prototype.scan=function(){if(BC.documentIsActive()&&!this.visitPreventsReading())return this.markAllAsRead()},n.prototype.delayedScan=function(){return setTimeout(this.scan,500)},n.prototype.markAllAsRead=function(){var t,e,n,i,r,o;for(i=this.findAllReadableIdentifiers(),o=[],t=0,n=i.length;t<n;t++)e=i[t],(null!=(r=this.unreads.byIdentifier[e])?r.length:void 0)?o.push(this.unreads.readIdentifier(e)):o.push(this.markIdentifierAsRead(e));return o},n.prototype.addIgnoredIdentifier=function(t){if(!this.identifierIsIgnored(t))return this.ignoredIdentifiers.push(t),t},n.prototype.removeIgnoredIdentifier=function(t){return this.ignoredIdentifiers=BC.arrayWithout(this.ignoredIdentifiers,t)},n.prototype.identifierIsIgnored=function(t){return e.call(this.ignoredIdentifiers,t)>=0},n.prototype.ignoreIdentifierUntilPageChange=function(t){if(this.addIgnoredIdentifier(t))return $(document).one("turbolinks:load",function(e){return function(){return e.removeIgnoredIdentifier(t)}}(this))},n.prototype.markIdentifierAsRead=function(t){return this.findReadablesByIdentifier(t).attr("data-read","")},n.prototype.markIdentifierAsUnread=function(t){return this.findReadablesByIdentifier(t).removeAttr("data-read")},n.prototype.findReadablesByIdentifier=function(t){return $("[data-unread-readable-identifier='"+t+"']")},n.prototype.findAllReadableIdentifiers=function(){var t,e,n,r,o,a;for(r=[],a=$("[data-readable-identifier]:not([data-read])"),e=0,o=a.length;e<o;e++)t=a[e],n=t.dataset.readableIdentifier,this.identifierIsIgnored(n)||i(t)&&r.push(n);return r},i=function(t){return!BC.closest(t,"[data-reading-skipped]")&&BC.elementIsViewable(t)},n}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};BC.UnreadsView=function(){function e(e){this.unreads=e,this.didChangeFocusMode=t(this.didChangeFocusMode,this),this.didLoadPage=t(this.didLoadPage,this),this.willUnloadPage=t(this.willUnloadPage,this),this.didClickUnreadReadButton=t(this.didClickUnreadReadButton,this),this.didClickReadUnreadButton=t(this.didClickReadUnreadButton,this),this.didClickReadUnreadMenuButton=t(this.didClickReadUnreadMenuButton,this),$(document).on("click","[data-read-unread-menu]",this.didClickReadUnreadMenuButton),$(document).on("click","[data-read-unread-readable]",this.didClickReadUnreadButton),$(document).on("click","[data-unread-read-readable]",this.didClickUnreadReadButton),$(document).on("turbolinks:before-cache",this.willUnloadPage),$(document).on("turbolinks:render",this.didLoadPage),$(document).on("bc:focusmode-change",this.didChangeFocusMode)}return e.prototype.didClickReadUnreadMenuButton=function(t){var e;return e=$(t.target).data("read-unread-menu"),this.unreads.readMenu(e),this.collapseMenuForElement(t.target),t.stopImmediatePropagation(),t.preventDefault()},e.prototype.didClickReadUnreadButton=function(t){var e;return e=$(t.target).data("read-unread-readable"),this.unreads.readIdentifier(e),t.stopImmediatePropagation(),t.preventDefault()},e.prototype.didClickUnreadReadButton=function(t){var e;return e=$(t.target).closest("[data-unread-readable-identifier]"),this.unreads.unreadIdentifier(e.data("unread-readable-identifier")),BC.triggerEvent(e,"bc:unread-readable"),t.stopImmediatePropagation(),t.preventDefault()},e.prototype.willUnloadPage=function(){return this.clearTitle()},e.prototype.didLoadPage=function(){return this.renderWindowBadge()},e.prototype.didChangeFocusMode=function(){return this.renderWindowBadge()},e.prototype.render=function(){return this.renderNavigationBadges(),this.renderWindowBadge()},e.prototype.renderNavigationBadges=function(){var t,e,n,i,r,o,a,s;for(o=$("[data-unread-badge]"),a=[],n=0,i=o.length;n<i;n++)e=o[n],t=$(e),r=t.data("unread-badge"),s=this.unreads.getTotal(r),a.push(t.attr("data-badge-count",s));return a},e.prototype.renderWindowBadge=function(){if(!this.renderFavicon())return this.renderTitle()},e.prototype.renderIdentifierAsRead=function(t){var e,n,i,r,o;for(this.unreads.reader.markIdentifierAsRead(t),r=this.unreads.reader.findReadablesByIdentifier(t),o=[],e=0,n=r.length;e<n;e++)i=r[e],o.push(this.moveReadable(i,"unreads","reads"));return o},e.prototype.renderIdentifierAsUnread=function(t){var e,n,i,r,o;for(this.unreads.reader.markIdentifierAsUnread(t),r=this.unreads.reader.findReadablesByIdentifier(t),o=[],e=0,n=r.length;e<n;e++)i=r[e],o.push(this.moveReadable(i,"reads","unreads"));return o},e.prototype.moveReadable=function(t,e,n){var i,r,o,a;if(r=$(t),i=r.closest("[data-readings-container]").find("[data-"+e+"-container]"),a=r.closest("[data-readings-container]").find("[data-"+n+"-container]"),a.length?(o=a.find("[data-readings]"),o.prepend(r),a.removeClass("readings--empty")):r.remove(),0===i.find("[data-readings]").children().length)return i.addClass("readings--empty")},e.prototype.collapseMenuForElement=function(t){return $(t).closest("[data-menu-section]").collapse()},e.prototype.renderFavicon=function(){var t;return BC.focusModeEnabled()?BC.setFaviconBadge(0):this.isShowingBadgeCounts()?BC.setFaviconBadge(this.unreads.getTotal()):(t=" ",BC.setFaviconBadge(0===this.unreads.getTotal()?0:t))},e.prototype.clearTitle=function(){return document.title=document.title.replace(/^\(\w+\) /,"").replace(/^\u2022 /,"")},e.prototype.renderTitle=function(){var t;if(this.clearTitle(),!BC.focusModeEnabled()&&(t=this.unreads.getTotal())>0)return this.isShowingBadgeCounts()?document.title="("+t+") "+document.title:document.title="\u2022 "+document.title},e.prototype.isShowingBadgeCounts=function(){return!$("[data-hide-badge-counts=true]").length},e}()}.call(this),function(){var t,e;BC.unreads=BC.cable.subscriptions.create("UnreadsChannel",{initialized:function(){return this.view=new BC.UnreadsView(this),this.reader=new BC.UnreadReader(this),this.refresh(),BC.ready(function(t){return function(){return t.fetchUnreads()}}(this)),document.addEventListener("visibilitychange",function(t){return function(){return t.visibilityDidChange()}}(this))},visibilityDidChange:function(){return"hidden"===document.visibilityState?this.hiddenAt=Date.now():(e(this.hiddenAt)>.5&&this.fetchUnreads(),this.hiddenAt=null)},connected:function(){return e(this.disconnectedAt)>60&&this.fetchUnreads(),this.disconnectedAt=null},disconnected:function(){return this.disconnectedAt=Date.now()},received:function(t){return this.refresh(t.unreads)},fetchUnreads:function(){return null!=this.fetchUnreadsRequest?this.fetchUnreadsRequest:this.fetchUnreadsRequest=BC.fetch(BC.accountPath("/my/unreads"),{as:"json"}).then(function(t){return function(e){return t.refresh(e),t.fetchUnreadsRequest=null}}(this))},refresh:function(t){return null==t&&(t=[]),this.all=t,this.indexByIdentifierAndMenu(t),this.view.render(),this.reader.reset(),BC.triggerEvent(document,"bc:unreads-change",{unreads:t})},getTotal:function(t){var e,n;return null!=t?null!=(e=null!=(n=this.byMenu[t])?n.length:void 0)?e:0:this.all.length},readMenu:function(t){return this.read(this.byMenu[t])},read:function(t){var e,n,i;if(null!=t?t.length:void 0)return i=function(){var i,r,o,a;for(a=[],i=0,r=t.length;i<r;i++)o=t[i],e=o.identifier,n=o.readable,this.view.renderIdentifierAsRead(e),a.push(n);return a}.call(this),BC.fetch(BC.accountPath("/my/unreads"),{method:"put",contentType:"application/json",body:JSON.stringify({readables:i})}),this.refresh(BC.arrayWithout(this.all,t))},readAll:function(){return this.read(this.all)},readIdentifier:function(t){var e;return e=this.byIdentifier[t],this.read(e)},unreadIdentifier:function(t){return this.reader.ignoreIdentifierUntilPageChange(t),this.view.renderIdentifierAsUnread(t),BC.fetch(this.reader.findReadablesByIdentifier(t).data("unread-url"),{method:"POST",contentType:"application/json"})},indexByIdentifierAndMenu:function(e){var n,i,r,o,a,s,u,l;for(this.byIdentifier={},this.byMenu={},u=[],r=0,a=e.length;r<a;r++)l=e[r],o=l.identifier,null==(n=this.byIdentifier)[o]&&(n[o]=[]),this.byIdentifier[o].push(l),s=t(l.section),null==(i=this.byMenu)[s]&&(i[s]=[]),u.push(this.byMenu[s].push(l));return u}},t=function(t){return"pings"===t?"pings":"heystack"},e=function(t){return null!=t?(Date.now()-t)/1e3:0})}.call(this),function(){$(function(){if(window.Notification||"test"===BC.env)return Notification.requestPermission(function(t){return Notification.permission!==t&&(Notification.permission=t),$("html").attr("data-notification-permission",t)}),BC.webNotifications=BC.cable.subscriptions.create("WebNotificationsChannel",{received:function(t){var e,n,i,r,o,a;if(o=t.title,e=t.body,r=t.tag,n=t.image,a=t.url,"granted"===Notification.permission)return i=new Notification(o,{body:e,tag:r,icon:n}),i.onclick=function(){return Turbolinks.visit(a),window.focus()},setTimeout(function(){return i.close()},15e3)}})})}.call(this),function(){}.call(this),function(){BC.on("turbolinks:load","refresh export when completed",function(){return $("[data-behavior~=refresh_export_when_completed]").install("refresh export when completed",function(t){var e,n;return n=t.data("url"),(e=function(){return BC.fetch(n).then(function(t){return"true"===t?Turbolinks.visit(location.href):setTimeout(e,5e3)})})()})})}.call(this),function(){var t,e;t="[data-behavior~=account_settings]",e="[data-behavior~=toggle_setting]",$(document).on("change",t+" "+e,function(){var t,e;return e=this.dataset.setting,t={setting:{}},t.setting[e]=this.checked,BC.fetch(BC.accountPath("/account/settings"),{method:"put",contentType:"application/json",body:JSON.stringify(t)})})}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){this.element=t,this.didPressKeyForStep=e(this.didPressKeyForStep,this),this.didClickSubmitForStep=e(this.didClickSubmitForStep,this),this.installEventListeners()}var n,i,r,o,a,s;return o="[data-role~=step]",s="[data-behavior~=submit_step]",a="[data-behavior~=submit_step_on_enter]",r="[data-behavior~=required_radio_group]",n="[data-role~=error_message]",i="[data-role~=final_step]",t.prototype.installEventListeners=function(){return BC.handleEvent("click",{on:this.element,matching:s,"with":this.didClickSubmitForStep}),BC.handleEvent("keydown",{on:this.element,matching:a,"with":this.didPressKeyForStep})},t.prototype.didClickSubmitForStep=function(t){var e;if(e=this.getStepForElement(t.target))return t.preventDefault(),this.submitStep(e)},t.prototype.didPressKeyForStep=function(t){var e;if(t.keyCode===BC.keyCodes.enter&&(e=this.getStepForElement(t.target)))return t.preventDefault(),this.submitStep(e)},t.prototype.getStepForElement=function(t){return BC.closest(t,o)},t.prototype.submitStep=function(t){return this.validateFieldsForStep(t,function(e){return function(n){return n?e.showValidationErrorsForStep(t,n):e.stepIsFinalStep(t)?e.submitFormForStep(t):e.showNextStep(t)}}(this))},t.prototype.disableSubmitButtonForStep=function(t){var e;return null!=(e=t.querySelector(s))?e.disabled=!0:void 0},t.prototype.stepIsFinalStep=function(t){return BC.matches(t,i)},t.prototype.submitFormForStep=function(t){return this.disableSubmitButtonForStep(t),BC.closest(t,"form").submit()},t.prototype.showNextStep=function(t){var e;return t.classList.add("welcome-step--completing"),document.activeElement.blur(),e=$(t).next(o),e.addClass("welcome-step--activating").onTransitionEnd(function(){var n;return null!=(n=e.find("input[type=text], input[type=password]").first())&&n.focus(),e.addClass("welcome-step--active"),t.classList.add("welcome-step--completed")})},t.prototype.validateFieldsForStep=function(t,e){if(this.validateRequiredFieldsForStep(t)&&this.validateRequiredRadioGroupsForStep(t)&&this.validateInvitationForm(t))return t.dataset.validationUrl?this.performRemoteValidationForStep(t,e):e()},t.prototype.validateRequiredFieldsForStep=function(t){var e,i,r,o;for(o=t.querySelectorAll("[required]"),i=0,r=o.length;i<r;i++)if(e=o[i],!e.disabled&&!e.value.trim())return e.focus(),e.classList.add("reveal-validation"),t.querySelector(n).classList.remove("u-display-n"),!1;return!0},t.prototype.validateRequiredRadioGroupsForStep=function(t){var e,i,o,a,s;for(a=t.querySelectorAll(r),e=0,i=a.length;e<i;e++)if(o=a[e],!o.querySelectorAll("[type=radio]:checked").length)return null!=(s=o.querySelector(n))&&s.classList.remove("u-display-n"),!1;return!0},t.prototype.performRemoteValidationForStep=function(t,e){return $.post(t.dataset.validationUrl,$(t).find("[data-validation-name]").serialize(),function(t){return Object.keys(t.errors).length?e(t.errors):e()})},t.prototype.validateInvitationForm=function(t){var e,n;if(n=t.querySelector("[data-role~=invitee_name]"),e=t.querySelector("[data-role~=invitee_email]"),n&&e){if(n.value&&!e.value)return this.showValidationErrorsForInput(e,"Please enter an email address to invite someone else."),!1;if(e.value&&!this.isValidEmailAddress(e.value))return this.showValidationErrorsForInput(e,"Please enter a valid email address."),!1}return!0},t.prototype.isValidEmailAddress=function(t){return null!=t?t.match(/^\S+@\S+\.[A-Za-z0-9-]{2,23}$/):void 0},t.prototype.showValidationErrorsForStep=function(t,e){var n,i,r,o;o=[];for(r in e)i=e[r],(n=t.querySelector("[data-validation-name~='"+r+"']"))?o.push(this.showValidationErrorsForInput(n,i)):o.push(void 0);return o},t.prototype.showValidationErrorsForInput=function(t,e){var i;return null!=(i=BC.closest(t,"div").querySelector(n))?i.innerHTML=e:void 0},t}(),BC.observe("[data-behavior~=account_setup_steps]",function(e){return new t(e)})}.call(this),function(){var t,e,n,i;t="[data-behavior~=trial_upgrade_banner]",n="[data-role~=trial_upgrade_banner_content]",i=function(){return!e()},e=function(){return $(t).find(n).length},BC.on("turbolinks:load","load trial upgrade banner",function(){var r;if(r=$(t),r.length&&i()&&BC.fetch(r.data("url")).then(function(t){return r.html(t)}),e()&&($("body").addClass("trial-banner-showing"),$(n).hasClass("bottom-trial-banner")))return $("body").addClass("bottom-banner-showing")})}.call(this),function(){var t,e,n;e="[data-behavior~=toggle_segmented_plans]",t="[data-role~=segmented_plan]",BC.observe(e,function(t){return BC.handleEvent("click",{on:t,"with":function(e){return n(t),e.preventDefault()}})}),n=function(n){var i,r,o,a,s,u,l,c,d;for(u=n.dataset.plan,l=document.querySelectorAll(t),d=document.querySelectorAll(e),i=0,o=l.length;i<o;i++)s=l[i],s.style.display="none";for(r=0,a=d.length;r<a;r++)c=d[r],c.classList.remove("segmented-button--active");return n.classList.add("segmented-button--active"),document.querySelector("[data-plan-type~="+u+"]").style.display="block"}}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){this.element=t,this.didSelectJobInput=e(this.didSelectJobInput,this),this.installEventListeners()}var n,i;return n="[data-role~=welcome_job_input]",i="[data-role~=welcome_job_summary]",t.prototype.installEventListeners=function(){return BC.handleEvent("change",{on:this.element,matching:n,"with":this.didSelectJobInput})},t.prototype.didSelectJobInput=function(t){var e;return e=this.getJobForElement(t.target),this.showJobSummary(e)},t.prototype.getJobForElement=function(t){return t.dataset.welcomeJob},t.prototype.showJobSummary=function(t){var e,n,r,o,a;for(o=document.querySelectorAll(i),r=[],e=0,n=o.length;e<n;e++)a=o[e],
a.dataset.welcomeJob===t?r.push(a.classList.remove("u-display-n")):r.push(a.classList.add("u-display-n"));return r},t}(),BC.observe("[data-behavior~=welcome_job_survey]",function(e){return new t(e)})}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t,e){var i;this.element=t,this.selectedDate=e,this.onClickReturnToToday=n(this.onClickReturnToToday,this),this.showNextTwoMonths=n(this.showNextTwoMonths,this),this.onClickGridDay=n(this.onClickGridDay,this),this.onClickBackwardMonth=n(this.onClickBackwardMonth,this),this.onClickForwardMonth=n(this.onClickForwardMonth,this),this.renderAgendaView=n(this.renderAgendaView,this),this.renderCalendarGrid=n(this.renderCalendarGrid,this),this.render=n(this.render,this),i=this.element.dataset,this.url=i.url,this.newEntryUrl=i.newEntryUrl,this.calendarStartDate=this.selectedDate.beginningOfMonth(),this.calendarEntryLoader=new BC.Calendar.CalendarEntryLoader(this.url,this),this.installEventListeners()}var e,i,r,o,a,s,u,l,c,d,h,p,f,m,g,v,b,y,C,D;return u="all/sections/calendar/templates/calendar_display",g="all/sections/calendar/templates/grid",m="all/sections/calendar/templates/grid/_navigation",o="all/sections/calendar/templates/agenda",e="all/sections/calendar/templates/agenda/_load_button",r="all/sections/calendar/templates/agenda/_months",l="calendar-grid--current",C="calendar-grid__cell--selected",h="loading-calendar-grid",v="[data-behavior~=grid_view]",f="[data-behavior~=grid_navigation]",p="[data-behavior~=calendar_grid_month]",d="[data-behavior~=show_agenda_date]",a="[data-behavior~=agenda_view]",i="[data-behavior~=agenda_load_more]",b="[data-behavior~=add_event_to_schedule]",c="[data-behavior~=forward_month]",s="[data-behavior~=backward_month]",D="[data-behavior~=show_next_two_months]",y="[data-behavior~=return_to_today]",t.prototype.installEventListeners=function(){return BC.handleEvent("click",{on:this.element,matching:c,"with":this.onClickForwardMonth}),BC.handleEvent("click",{on:this.element,matching:s,"with":this.onClickBackwardMonth}),BC.handleEvent("click",{on:this.element,matching:d,"with":this.onClickGridDay}),BC.handleEvent("click",{on:this.element,matching:D,"with":this.showNextTwoMonths}),BC.handleEvent("click",{on:this.element,matching:y,"with":this.onClickReturnToToday})},t.prototype.render=function(){return this.calendarEntryLoader.withMonthsForCalendarDate(this.calendarStartDate,function(t){return function(){return t.element.innerHTML=JST[u](t),t.renderCalendarGrid(),t.renderAgendaView()}}(this))},t.prototype.renderCalendarGrid=function(){var t;return t=this.element.querySelector(v),t.innerHTML=JST[g](this),t.querySelector(p).classList.add(l),this.renderGridNavigation(),this.highlightSelectedDay()},t.prototype.renderAgendaView=function(){return this.agendaViewLastDay=this.selectedDate.nextMonth(2).endOfMonth(),this.renderAgendaLoadMoreButton(),this.element.querySelector(a).innerHTML=JST[o](this)},t.prototype.renderAgendaLoadMoreButton=function(){return this.element.querySelector(i).innerHTML=JST[e](this)},t.prototype.renderGridNavigation=function(){return this.element.querySelector(f).innerHTML=JST[m](this)},t.prototype.onClickForwardMonth=function(t){return t.preventDefault(),this.calendarStartDate=this.calendarStartDate.nextMonth(),this.calendarEntryLoader.withMonthsForCalendarDate(this.calendarStartDate,this.renderCalendarGrid)},t.prototype.onClickBackwardMonth=function(t){return t.preventDefault(),this.calendarStartDate=this.calendarStartDate.previousMonth(),this.calendarEntryLoader.withMonthsForCalendarDate(this.calendarStartDate,this.renderCalendarGrid)},t.prototype.onClickGridDay=function(t){var e;return e=BC.closest(t.target,"[data-agenda-date]"),this.updateSelectedDate(CalendarDate.parse(e.dataset.agendaDate)),this.renderGridNavigation(),this.calendarEntryLoader.withMonthsForCalendarDate(this.selectedDate,this.renderAgendaView)},t.prototype.showNextTwoMonths=function(t){var e;return t.preventDefault(),e=this.agendaViewLastDay.next(),this.agendaViewLastDay=e.nextMonth().endOfMonth(),this.calendarEntryLoader.withMonthsForCalendarDate(e,function(t){return function(){var n;return n=JST[r]({months:t.calendarEntryLoader.getMonthsStartingFromCalendarDate(e,1),selectedDate:t.selectedDate}),t.element.querySelector(a).insertAdjacentHTML("beforeend",n),t.renderAgendaLoadMoreButton()}}(this))},t.prototype.onClickReturnToToday=function(t){return t.preventDefault(),this.updateSelectedDate(CalendarDate.today()),this.calendarStartDate=this.selectedDate.beginningOfMonth(),this.render()},t.prototype.updateSelectedDate=function(t){return this.removeSelectedDayHighlight(),this.selectedDate=t,this.highlightSelectedDay(),this.updateNavigationAddEventButtonURL(),this.setSelectedDayURLParameter()},t.prototype.highlightSelectedDay=function(){var t;return null!=(t=this.element.querySelector("[data-agenda-date~='"+this.selectedDate+"']"))?t.classList.add(C):void 0},t.prototype.removeSelectedDayHighlight=function(){var t;return null!=(t=this.element.querySelector("[data-agenda-date~='"+this.selectedDate+"']"))?t.classList.remove(C):void 0},t.prototype.updateNavigationAddEventButtonURL=function(){var t;return null!=(t=document.querySelector(b))?t.setAttribute("href",this.newEventUrlForSelectedDate()):void 0},t.prototype.setSelectedDayURLParameter=function(){var t;return t=window.location.pathname,this.selectedDate.isnt(CalendarDate.today())&&(t=BC.formatURL(t,{on:this.selectedDate.toString()})),window.history.replaceState({calendarDisplayController:!0},null,t)},t.prototype.monthsForCalendarGrid=function(){return this.calendarEntryLoader.getMonthsStartingFromCalendarDate(this.calendarStartDate,1)},t.prototype.monthsForAgendaView=function(){return this.calendarEntryLoader.getMonthsStartingFromCalendarDate(this.selectedDate,2)},t.prototype.shouldHideReturnToTodayButton=function(){return this.selectedDate.is(CalendarDate.today())&&this.calendarStartDate.occursThisMonth()},t.prototype.selectedCalendarDay=function(){return this.calendarEntryLoader.getDayForCalendarDate(this.selectedDate)},t.prototype.newEventUrlForSelectedDate=function(){if(null!=this.newEntryUrl)return this.newEntryUrl+"?starts_on="+this.selectedDate},t.prototype.didStartLoading=function(){return this.element.classList.add(h)},t.prototype.didFinishLoading=function(){return this.element.classList.remove(h)},t}(),window.addEventListener("popstate",function(t){var e;if(null!=(e=t.state)?e.calendarDisplayController:void 0)return Turbolinks.visit(window.location,{action:"replace"})}),e=/^(\d{4})-(\d{2})-(\d{2})$/,BC.observe("[data-behavior~=calendar_grid]",function(n){var i,r;return(i=BC.getQueryParams().on)&&e.test(i)&&(r=CalendarDate.parse(i)),new t(n,null!=r?r:CalendarDate.today()).render()})}.call(this),function(){BC.Calendar={}}.call(this),function(){BC.Calendar.Entry=function(){function t(t){this.attributes=t}return t.fromJSON=function(t){var e;return new this({allDay:t.all_day,startsAt:new Date(t.starts_at),startsOn:CalendarDate.parse(t.starts_at),endsAt:new Date(t.ends_at),endsOn:CalendarDate.parse(t.ends_at),summary:t.summary,participants:function(){var n,i,r,o;for(r=t.participants,o=[],n=0,i=r.length;n<i;n++)e=r[n],o.push({id:e.id,name:e.name,avatarUrl:e.avatar_url});return o}(),url:t.app_url,commentsCount:t.comments_count,bucket:{name:t.bucket.name,url:t.bucket.app_url}})},t.prototype.inDay=function(t){return this.attributes.startsOn<=t&&t<=this.attributes.endsOn},t.prototype.spansMultipleDays=function(){return!this.attributes.startsOn.equals(this.attributes.endsOn)},t}()}.call(this),function(){BC.Calendar.Todo=function(){function t(t){this.attributes=t}return t.fromJSON=function(t){var e;return new this({startsOn:t.starts_on?CalendarDate.parse(t.starts_on):null,dueOn:CalendarDate.parse(t.due_on),content:t.content,assignees:function(){var n,i,r,o;for(r=t.assignees,o=[],n=0,i=r.length;n<i;n++)e=r[n],o.push({id:e.id,name:e.name,avatarUrl:e.avatar_url});return o}(),completed:t.completed,completion:t.completion,completionDate:t.completion?CalendarDate.parse(t.completion.created_at):null,completionUrl:t.completion_url,url:t.app_url,commentsCount:t.comments_count,bucket:{name:t.bucket.name},parent:{id:t.parent.id,titleWithContext:t.parent.title}})},t.prototype.shouldAppearOnDay=function(t){var e;return this.inDay(t)&&!this.attributes.completed||(null!=(e=this.attributes.completionDate)?e.equals(t):void 0)},t.prototype.inDay=function(t){return this.attributes.startsOn<=t&&t<=this.attributes.dueOn||this.attributes.dueOn.equals(t)},t.prototype.spansMultipleDays=function(){return!!this.attributes.startsOn&&!this.attributes.startsOn.equals(this.attributes.dueOn)},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};BC.Calendar.CalendarEntryLoader=function(){function e(e,n){this.url=e,this.delegate=n,this.loadMonthsInWindow=t(this.loadMonthsInWindow,this),this.cachedMonths={}}return e.prototype.getDayForCalendarDate=function(t){return this.getCachedMonthForCalendarDate(t).getDayForCalendarDate(t)},e.prototype.getMonthsStartingFromCalendarDate=function(t,e){var n,i,r,o,a;for(o=this.monthStartDatesBetween(t,t.nextMonth(e)),a=[],n=0,i=o.length;n<i;n++)r=o[n],a.push(this.getCachedMonthForCalendarDate(r));return a},e.prototype.withMonthsForCalendarDate=function(t,e){var n,i,r,o,a;return o=this.monthStartDatesBetween(t,t.nextMonth(2).endOfMonth()),a=o.every(function(t){return function(e){return null!=t.getCachedMonthForCalendarDate(e)}}(this)),a?e():(r=this.monthStartDatesBetween(t,t.nextMonth(3).endOfMonth()),n=r.find(function(t){return function(e){return null==t.getCachedMonthForCalendarDate(e)}}(this)),i=r.reverse().find(function(t){return function(e){return null==t.getCachedMonthForCalendarDate(e)}}(this)),i.beginningOfMonth().is(n)&&null==this.getCachedMonthForCalendarDate(n.previousMonth())&&(n=n.previousMonth()),this.loadMonthsInWindow(n,i.endOfMonth(),e))},e.prototype.loadMonthsInWindow=function(t,e,n){var i,r;return null!=(i=this.delegate)&&i.didStartLoading(),r=BC.formatURL(this.url,{window_starts_on:t.toString(),window_ends_on:e.toString()}),BC.fetch(r,{as:"json"}).then(function(i){return function(r){var o,a,s,u,l,c,d,h,p;for(o=function(){var t,e,n,i;for(n=r.schedule_entries,i=[],t=0,e=n.length;t<e;t++)a=n[t],i.push(BC.Calendar.Entry.fromJSON(a));return i}(),p=function(){var t,e,n,i;for(n=r.todos,i=[],t=0,e=n.length;t<e;t++)h=n[t],i.push(BC.Calendar.Todo.fromJSON(h));return i}(),c=i.monthStartDatesBetween(t,e),s=0,u=c.length;s<u;s++)l=c[s],i.setCachedMonthForCalendarDate(l,new BC.Calendar.Month(l,o,p));return null!=(d=i.delegate)&&d.didFinishLoading(),n()}}(this))},e.prototype.monthStartDatesBetween=function(t,e){var n,i;for(n=t.beginningOfMonth().previousMonth(),i=[];n.nextMonth()<=e;)i.push(n=n.nextMonth());return i},e.prototype.getCachedMonthForCalendarDate=function(t){return this.cachedMonths[this.cacheKeyForCalendarDate(t)]},e.prototype.setCachedMonthForCalendarDate=function(t,e){return this.cachedMonths[this.cacheKeyForCalendarDate(t)]=e},e.prototype.cacheKeyForCalendarDate=function(t){return t.getAbbreviatedMonthName()+" "+t.year},e}()}.call(this),function(){BC.Calendar.Day=function(){function t(t,e,n){this.calendarDate=t,this.entries=e,this.todos=n,this.dayOfMonth=this.calendarDate.day}return t.prototype.isPast=function(){return this.calendarDate.isPast()},t.prototype.isToday=function(){return this.calendarDate.isToday()},t.prototype.hasEvents=function(){return this.entries.length||this.todos.length},t.prototype.repeatingEntries=function(){return this.entries.filter(function(t){return function(e){return e.attributes.allDay&&e.spansMultipleDays()&&e.attributes.startsOn.isnt(t.calendarDate)}}(this))},t.prototype.nonRepeatingEntries=function(){return _.difference(this.entries,this.repeatingEntries())},t.prototype.repeatingTodos=function(){return this.todos.filter(function(t){return function(e){return e.spansMultipleDays()&&e.attributes.startsOn.isnt(t.calendarDate)&&!e.attributes.completed}}(this))},t.prototype.nonRepeatingTodos=function(){return _.difference(this.todos,this.repeatingTodos())},t.prototype.nonRepeatingEventsCount=function(){return _.union(this.nonRepeatingEntries(),this.nonRepeatingTodos()).length},t.prototype.repeatingEventsCount=function(){return _.union(this.repeatingEntries(),this.repeatingTodos()).length},t.prototype.hasSingleRepeatingEvent=function(){return 0===this.nonRepeatingEventsCount()&&1===this.repeatingEventsCount()},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};BC.Calendar.Month=function(){function e(e,n,i){var r;this.beginningOfMonth=e,this.forCalendarDatesBetween=t(this.forCalendarDatesBetween,this),this.endOfMonth=this.beginningOfMonth.endOfMonth(),this.firstWeekDay=parseInt(null!=(r=BC.current.person.firstWeekDayInt)?r:0,10),this.days=this.generateCalendarDays(n,i)}return e.prototype.weeks=function(){var t,e,n;return e=[],n=this.beginningOfMonth.beginningOfWeek(this.firstWeekDay),t=this.endOfMonth.beginningOfWeek(this.firstWeekDay).next(6),this.forCalendarDatesBetween(n,t,function(t){return function(n){return n.date.getUTCDay()===t.firstWeekDay&&e.push([]),e[e.length-1].push(t.getDayForCalendarDate(n))}}(this)),e},e.prototype.getDayForCalendarDate=function(t){if(t.month===this.beginningOfMonth.month)return this.days.find(function(e){return e.calendarDate.equals(t)})},e.prototype.weekdays=function(){var t,e,n;for(t=this.beginningOfMonth.beginningOfWeek(this.firstWeekDay).previous(),n=[],e=0;e<=6;e++)n.push(t=t.next());return n},e.prototype.daysWithEvents=function(){return this.days.filter(function(t){return t.hasEvents()})},e.prototype.generateCalendarDays=function(t,e){var n;return n=[],this.forCalendarDatesBetween(this.beginningOfMonth,this.endOfMonth,function(){return function(i){var r,o,a,s;return r=function(){var e,n,r;for(r=[],e=0,n=t.length;e<n;e++)a=t[e],a.inDay(i)&&r.push(a);return r}(),o=function(){var t,n,r;for(r=[],t=0,n=e.length;t<n;t++)s=e[t],s.shouldAppearOnDay(i)&&r.push(s);return r}(),n.push(new BC.Calendar.Day(i,r,o))}}()),n},e.prototype.forCalendarDatesBetween=function(t,e,n){var i,r;for(i=t,r=[];i<=e;)n(i),r.push(i=i.next());return r},e}()}.call(this),function(){this.JST||(this.JST={}),this.JST["all/sections/calendar/templates/agenda"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push(JST["all/sections/calendar/templates/agenda/_day"]({calendarDay:this.selectedCalendarDay(),newEventUrl:this.newEventUrlForSelectedDate(),selected:!0})),e.push("\n\n"),e.push(JST["all/sections/calendar/templates/agenda/_months"]({months:this.monthsForAgendaView(),selectedDate:this.selectedDate})),e.push("\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["all/sections/calendar/templates/agenda/_day"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?r(t):""},i=t.safe,r=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,r,o,a,s,u,l,c,d,h,p,f,m;if(e.push('<div class="schedule-day '),this.selected&&e.push(n("schedule-day--selected")),e.push(" "),this.calendarDay.hasEvents()||e.push(n("schedule-day--empty")),e.push('">\n  <div class="schedule-day__dates">\n    <h3 class="schedule-day__date flush--ends">\n      <span class="schedule-day__date-name">\n        '),this.calendarDay.calendarDate.occursThisYear()&&(this.calendarDay.calendarDate.occursThisMonth()||this.calendarDay.calendarDate.isFuture())?(e.push("\n          "),e.push(n(this.calendarDay.calendarDate.abbreviatedShortWithWeekday())),e.push("\n        ")):(e.push("\n          "),e.push(n(this.calendarDay.calendarDate.shortWithYear())),e.push("\n        ")),e.push('\n      </span>\n    </h3>\n  </div>\n\n  <div class="schedule-day__events">\n    '),this.calendarDay.hasEvents()){if(e.push("\n      "),!this.selected){for(e.push("\n        "),h=this.calendarDay.repeatingTodos(),r=0,u=h.length;r<u;r++)f=h[r],e.push("\n          "),e.push(JST["all/sections/calendar/templates/agenda/_todo_lite"]({todo:f})),e.push("\n        ");for(e.push("\n\n        "),p=this.calendarDay.repeatingEntries(),o=0,l=p.length;o<l;o++)i=p[o],e.push("\n          "),e.push(JST["all/sections/calendar/templates/agenda/_entry_lite"]({entry:i})),e.push("\n        ");e.push("\n      ")}for(e.push("\n\n      "),m=this.selected?this.calendarDay.todos:this.calendarDay.nonRepeatingTodos(),e.push("\n      "),a=0,c=m.length;a<c;a++)f=m[a],e.push("\n        "),e.push(JST["all/sections/calendar/templates/agenda/_todo"]({todo:f,calendarDate:this.calendarDay.calendarDate})),e.push("\n      ");for(e.push("\n\n      "),t=this.selected?this.calendarDay.entries:this.calendarDay.nonRepeatingEntries(),e.push("\n      "),s=0,d=t.length;s<d;s++)i=t[s],e.push("\n        "),e.push(JST["all/sections/calendar/templates/agenda/_entry"]({entry:i,calendarDate:this.calendarDay.calendarDate})),e.push("\n      ");e.push("\n    ")}else e.push('\n      <div class="scheduled-event">Nothing\u2019s on the schedule</div>\n    ');e.push("\n\n    "),this.selected&&this.newEventUrl&&(e.push('\n      <div class="schedule-day__add-event app-mobile__hide">\n        <a href="'),e.push(n(this.newEventUrl)),e.push('" class="btn btn--small">Add an event</a>\n      </div>\n    ')),e.push("\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=r,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["all/sections/calendar/templates/agenda/_entry"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?r(t):""},i=t.safe,r=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,r,o;for(e.push('<a href="'),e.push(n(this.entry.attributes.url)),e.push('" class="scheduled-event" data-target="schedule-card.entry">\n  <h4 class="scheduled-event__title">\n    '),e.push(n(this.entry.attributes.summary)),e.push("\n\n    "),this.entry.attributes.commentsCount>0&&(e.push('\n      <span class="scheduled-event__comments comments-balloon push_quarter--left">\n        <span class="comments-balloon__count">'),e.push(n(this.entry.attributes.commentsCount)),e.push("</span>\n      </span>\n    ")),e.push('\n\n    <span class="scheduled-event__people avatar-group avatar-group--small push_quarter--left">\n      '),o=this.entry.attributes.participants,t=0,i=o.length;t<i;t++)r=o[t],e.push("\n        "),e.push(JST["all/sections/people/templates/_avatar"]({person:r})),e.push("\n      ");e.push('\n    </span>\n  </h4>\n\n  <div class="scheduled-event__metadata">\n    '),this.entry.attributes.allDay?(e.push("\n      "),this.entry.spansMultipleDays()&&(e.push('\n        <div class="scheduled-event__time scheduled-event__time--all-day">\n          '),e.push(n(this.entry.attributes.startsOn.abbreviatedShort())),e.push(" -\n          "),this.entry.attributes.endsOn.fallsOnSameMonthAs(this.entry.attributes.startsOn)?(e.push("\n            "),e.push(n(this.entry.attributes.endsOn.day)),e.push("\n          ")):(e.push("\n            "),e.push(n(this.entry.attributes.endsOn.abbreviatedShort())),e.push("\n          ")),e.push("\n        </div>\n      ")),e.push("\n    ")):(e.push('\n      <div class="scheduled-event__time">\n        '),this.entry.spansMultipleDays()?(e.push("\n          "),this.entry.attributes.startsOn.equals(this.calendarDate)?(e.push("\n            "),e.push(n(LocalTime.strftime(this.entry.attributes.startsAt,"%l:%M%P"))),e.push(" onward\n          ")):this.entry.attributes.endsOn.equals(this.calendarDate)&&(e.push("\n            Until "),e.push(n(LocalTime.strftime(this.entry.attributes.endsAt,"%l:%M%P"))),e.push("\n          ")),e.push("\n        ")):(e.push("\n          "),e.push(n(LocalTime.strftime(this.entry.attributes.startsAt,"%l:%M%P"))),e.push("\n          -\n          "),e.push(n(LocalTime.strftime(this.entry.attributes.endsAt,"%l:%M%P"))),e.push("\n        ")),e.push("\n      </div>\n    ")),e.push('\n\n    <span class="scheduled-event__bucket metadata-color">'),e.push(n(this.entry.attributes.bucket.name)),e.push("</span>\n  </div>\n</a>\n")}).call(this)}.call(t),t.safe=i,t.escape=r,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["all/sections/calendar/templates/agenda/_entry_lite"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?r(t):""},i=t.safe,r=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<span class="scheduled-event scheduled-event--repeated u-display-ib" data-target="schedule-card.entry">\n  <h4 class="scheduled-event__title">\n    <a href="'),e.push(n(this.entry.attributes.url)),e.push('">'),e.push(n(this.entry.attributes.summary)),e.push("</a>\n  </h4>\n</span>\n")}).call(this)}.call(t),t.safe=i,t.escape=r,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["all/sections/calendar/templates/agenda/_load_button"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?r(t):""},i=t.safe,r=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t;t=this.agendaViewLastDay.nextMonth(2).endOfMonth(),e.push('\n\n<button type="button" data-behavior="show_next_two_months" class="plain-btn decorated">\n  Show everything up to\n  '),t.occursThisYear()?(e.push("\n   "),e.push(n(t.getAbbreviatedMonthName())),e.push(" "),e.push(n(t.day)),e.push("\n  ")):(e.push("\n    "),e.push(n(t.shortWithYear())),e.push("\n  ")),e.push("\n</button>\n")}).call(this)}.call(t),t.safe=i,t.escape=r,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["all/sections/calendar/templates/agenda/_months"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?r(t):""},i=t.safe,r=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,r,o,a,s,u,l;for(l=this.months,r=0,a=l.length;r<a;r++){if(u=l[r],e.push("\n  "),i=u.daysWithEvents().filter(function(t){return function(e){return e.calendarDate>t.selectedDate}}(this)),e.push("\n\n  "),i.length){for(e.push("\n    "),this.selectedDate.beginningOfMonth().isnt(u.beginningOfMonth)&&(e.push('\n      <h2 class="schedule-month" data-agenda-date="'),e.push(n(u.beginningOfMonth)),e.push('">\n        '),e.push(n(u.beginningOfMonth.getMonthName())),e.push(" "),e.push(n(u.beginningOfMonth.year)),e.push("\n      </h2>\n    ")),e.push("\n\n    "),o=0,s=i.length;o<s;o++)t=i[o],e.push("\n      "),e.push(JST["all/sections/calendar/templates/agenda/_day"]({calendarDay:t,selected:!1})),e.push("\n    ");e.push("\n  ")}e.push("\n")}e.push("\n")}).call(this)}.call(t),t.safe=i,t.escape=r,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["all/sections/calendar/templates/agenda/_todo"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?r(t):""},i=t.safe,r=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,r,o;for(e.push('<div class="scheduled-event scheduled-event--todo" data-target="schedule-card.entry">\n  <div class="todo '),this.todo.attributes.completed&&e.push(n("completed")),e.push(' flush--bottom" data-role="completion_container">\n    <span class="checkbox">\n      <label class="checkbox__label">\n        <input type="checkbox" name="todo_complete" value="1" class="checkbox__input" '),this.todo.attributes.completed&&e.push(n("checked='checked'")),e.push('\n            data-behavior="todo_completion"\n            data-move-completed="false"\n            data-url="'),e.push(n(this.todo.attributes.completionUrl)),e.push('">\n        <span class="checkbox__button"></span>\n      </label>\n      <a href="'),e.push(n(this.todo.attributes.url)),e.push('" class="checkbox__content">\n        '),e.push(n(this.todo.attributes.content)),e.push("\n\n        "),this.todo.attributes.commentsCount>0&&(e.push('\n          <span class="scheduled-event__comments comments-balloon push_quarter--left">\n            <span class="comments-balloon__count">'),e.push(n(this.todo.attributes.commentsCount)),e.push("</span>\n          </span>\n        ")),e.push('\n\n        <span class="scheduled-event__people avatar-group avatar-group--small push_quarter--left ">\n          '),o=this.todo.attributes.assignees,t=0,i=o.length;t<i;t++)r=o[t],e.push("\n            "),e.push(JST["all/sections/people/templates/_avatar"]({person:r})),e.push("\n          ");e.push('\n        </span>\n\n        <div class="scheduled-event__metadata">\n          '),this.todo.attributes.completed?(e.push('\n            <div class="scheduled-event__completion">\n              Completed '),e.push(n(this.todo.attributes.completionDate.abbreviatedShort())),e.push("\n            </div>\n          ")):this.todo.spansMultipleDays()&&(e.push('\n            <div class="scheduled-event__time scheduled-event__time--all-day">\n              '),e.push(n(this.todo.attributes.startsOn.abbreviatedShort())),e.push(" -\n              "),this.todo.attributes.dueOn.fallsOnSameMonthAs(this.todo.attributes.startsOn)?(e.push("\n                "),e.push(n(this.todo.attributes.dueOn.day)),e.push("\n              ")):(e.push("\n                "),e.push(n(this.todo.attributes.dueOn.abbreviatedShort())),e.push("\n              ")),e.push("\n            </div>\n          ")),e.push('\n\n          <span class="scheduled-event__parent metadata-color">\n            '),e.push(n(this.todo.attributes.parent.titleWithContext)),e.push('\n          </span>\n\n          <span class="scheduled-event__bucket metadata-color">\n            in '),e.push(n(this.todo.attributes.bucket.name)),e.push("\n          </span>\n        </div>\n      </a>\n    </span>\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=r,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["all/sections/calendar/templates/agenda/_todo_lite"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?r(t):""},i=t.safe,r=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<span class="scheduled-event scheduled-event--repeated u-display-ib" data-role="completion_container" data-target="schedule-card.entry">\n  <h4 class="scheduled-event__title">\n    <span class="checkbox checkbox--lite">\n      <label class="checkbox__label">\n        <input type="checkbox" name="todo_complete" value="1" class="checkbox__input" '),this.todo.attributes.completed&&e.push(n("checked='checked'")),e.push('\n            data-behavior="todo_completion"\n            data-move-completed="false"\n            data-url="'),e.push(n(this.todo.attributes.completionUrl)),e.push('">\n        <span class="checkbox__button"></span>\n      </label>\n    </span>\n\n    <a href="'),e.push(n(this.todo.attributes.url)),e.push('">\n      '),e.push(n(this.todo.attributes.content)),e.push("\n    </a>\n  </h4>\n</span>\n")}).call(this)}.call(t),t.safe=i,t.escape=r,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["all/sections/calendar/templates/calendar_display"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div>\n  <div class="calendar-grids u-position-context">\n    <div class="calendar-grids__header">\n      <div class="calendar-grids__navigator" data-behavior="grid_navigation">\n      </div>\n    </div>\n\n    <div class="calendar-grids__scroller" data-behavior="grid_view"></div>\n    <div class="calendar-grids__loader"></div>\n  </div>\n</div>\n\n<div data-behavior="agenda_view">\n</div>\n\n<div class="schedule__load-more centered" data-behavior="agenda_load_more">\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["all/sections/calendar/templates/card/_day"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?r(t):""},i=t.safe,r=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,r,o,a,s,u,l,c,d,h,p,f,m;if(this.selected||!this.calendarDay.hasSingleRepeatingEvent()){if(e.push('\n  <div class="schedule-day '),this.selected&&e.push(n("schedule-day--selected")),e.push(" "),this.calendarDay.hasEvents()||e.push(n("schedule-day--empty")),e.push('">\n    <div class="schedule-day__dates">\n      <h3 class="schedule-day__date flush--ends">\n        <span class="schedule-day__mini-date mini-date date-coloring--'),e.push(n(this.calendarDay.calendarDate.getMonthName().toLowerCase())),e.push('"></span>\n\n        <span class="schedule-day__date-name">\n          '),this.calendarDay.calendarDate.occursThisYear()&&(this.calendarDay.calendarDate.occursThisMonth()||this.calendarDay.calendarDate.isFuture())?(e.push("\n            "),e.push(n(this.calendarDay.calendarDate.abbreviatedShortWithWeekday())),e.push("\n          ")):(e.push("\n            "),e.push(n(this.calendarDay.calendarDate.shortWithYear())),e.push("\n          ")),e.push('\n        </span>\n      </h3>\n    </div>\n\n    <div class="schedule-day__events">\n      '),!this.selected){for(e.push("\n        "),h=this.calendarDay.repeatingTodos(),r=0,u=h.length;r<u;r++)f=h[r],e.push("\n          "),e.push(JST["all/sections/calendar/templates/agenda/_todo_lite"]({todo:f})),e.push("\n        ");for(e.push("\n\n        "),p=this.calendarDay.repeatingEntries(),o=0,l=p.length;o<l;o++)i=p[o],e.push("\n          "),e.push(JST["all/sections/calendar/templates/agenda/_entry_lite"]({entry:i})),e.push("\n        ");e.push("\n      ")}for(e.push("\n\n      "),m=this.selected?this.calendarDay.todos:this.calendarDay.nonRepeatingTodos(),e.push("\n      "),a=0,c=m.length;a<c;a++)f=m[a],e.push("\n        "),e.push(JST["all/sections/calendar/templates/agenda/_todo"]({todo:f,calendarDate:this.calendarDay.calendarDate})),e.push("\n      ");for(e.push("\n\n      "),t=this.selected?this.calendarDay.entries:this.calendarDay.nonRepeatingEntries(),e.push("\n      "),s=0,d=t.length;s<d;s++)i=t[s],e.push("\n        "),e.push(JST["all/sections/calendar/templates/agenda/_entry"]({entry:i,calendarDate:this.calendarDay.calendarDate})),e.push("\n      ");e.push("\n    </div>\n  </div>\n")}e.push("\n")}).call(this)}.call(t),t.safe=i,t.escape=r,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["all/sections/calendar/templates/card/_months"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?r(t):""},i=t.safe,r=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){
return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,r,o,a,s,u,l;for(l=this.months,r=0,a=l.length;r<a;r++){if(u=l[r],e.push("\n  "),i=u.daysWithEvents().filter(function(t){return function(e){return e.calendarDate>t.selectedDate}}(this)),e.push("\n\n  "),i.length){for(e.push("\n    "),this.selectedDate.beginningOfMonth().isnt(u.beginningOfMonth)&&(e.push('\n      <h2 class="schedule-month" data-agenda-date="'),e.push(n(u.beginningOfMonth)),e.push('">\n        '),e.push(n(u.beginningOfMonth.getMonthName())),e.push(" "),e.push(n(u.beginningOfMonth.year)),e.push("\n      </h2>\n    ")),e.push("\n\n    "),o=0,s=i.length;o<s;o++)t=i[o],e.push("\n      "),e.push(JST["all/sections/calendar/templates/card/_day"]({calendarDay:t,selected:!1})),e.push("\n    ");e.push("\n  ")}e.push("\n")}e.push("\n")}).call(this)}.call(t),t.safe=i,t.escape=r,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["all/sections/calendar/templates/card/agenda"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){this.calendarDay.hasEvents()&&(e.push("\n  "),e.push(JST["all/sections/calendar/templates/card/_day"]({calendarDay:this.calendarDay,selected:!0})),e.push("\n")),e.push("\n\n"),e.push(JST["all/sections/calendar/templates/card/_months"]({months:this.calendarMonths,selectedDate:this.calendarDay.calendarDate})),e.push("\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this);(function(){this.JST||(this.JST={}),this.JST["all/sections/calendar/templates/grid"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,n,i,r;for(r=this.monthsForCalendarGrid(),t=0,n=r.length;t<n;t++)i=r[t],e.push("\n  "),e.push(JST["all/sections/calendar/templates/grid/_month"](i)),e.push("\n");e.push("\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}).call(this),function(){this.JST||(this.JST={}),this.JST["all/sections/calendar/templates/grid/_month"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?r(t):""},i=t.safe,r=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,r,o,a,s,u,l,c,d,h,p,f,m,g,v,b,y;for(e.push('<div class="calendar-grid">\n  <table class="calendar-grid__table" data-behavior="calendar_grid_month">\n    <thead>\n      <tr>\n        <th class="calendar-grid__month" colspan="7">\n          '),this.beginningOfMonth.occursThisYear()&&(this.beginningOfMonth.occursThisMonth()||this.beginningOfMonth.isFuture())?(e.push("\n            "),e.push(n(this.beginningOfMonth.getMonthName())),e.push("\n          ")):(e.push("\n            "),e.push(n(this.beginningOfMonth.getAbbreviatedMonthName())),e.push(" "),e.push(n(this.beginningOfMonth.year)),e.push("\n          ")),e.push("\n        </th>\n      </tr>\n      <tr>\n        "),f=this.weekdays(),r=0,u=f.length;r<u;r++)t=f[r],e.push('\n          <th class="calendar-grid__weekday">'),e.push(n(t.getAbbreviatedWeekdayName())),e.push("</th>\n        ");for(e.push("\n      </tr>\n    </thead>\n\n    <tbody>\n      "),m=this.weeks(),o=0,l=m.length;o<l;o++){for(y=m[o],e.push("\n        <tr>\n          "),a=0,c=y.length;a<c;a++){if(t=y[a],e.push("\n            "),null!=t){for(e.push('\n              <td data-agenda-date="'),e.push(n(t.calendarDate)),e.push('" data-behavior="show_agenda_date" class="calendar-grid__cell '),t.isToday()&&e.push(n("calendar-grid__cell--today")),t.isPast()&&e.push(n("calendar-grid__cell--past")),e.push('">\n                <div class="calendar-grid__day" data-behavior="show_agenda_date">\n                  <div class="calendar-grid__day-of-month" data-behavior="show_agenda_date">'),e.push(n(t.dayOfMonth)),e.push('</div>\n\n                  <div class="calendar-grid__items" data-behavior="show_agenda_date">\n                    '),g=t.entries,s=0,d=g.length;s<d;s++)i=g[s],e.push('\n                      <span class="calendar-grid__item" title="'),e.push(n(i.summary)),e.push('" data-behavior="show_agenda_date">\u2022</span>\n                    ');for(e.push("\n\n                    "),v=t.todos,p=0,h=v.length;p<h;p++)b=v[p],e.push('\n                      <span class="calendar-grid__item calendar-grid__item--todo" title="'),e.push(n(b.content)),e.push('" data-behavior="show_agenda_date">\u2022</span>\n                    ');e.push("\n                  </div>\n                </div>\n              </td>\n            ")}else e.push('\n              <td class="calendar-grid__cell calendar-grid__cell--off"></td>\n            ');e.push("\n          ")}e.push("\n        </tr>\n      ")}e.push("\n    </tbody>\n  </table>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=r,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["all/sections/calendar/templates/grid/_navigation"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<a href="#" class="calendar-grids__nav calendar-grids__nav--backward" title="Back a month" data-behavior="backward_month">Back a month</a>\n\n'),this.shouldHideReturnToTodayButton()||e.push('\n  <a href="#" class="calendar-grids__jump-to-today" title="Return to today" data-behavior="return_to_today">Today</a>\n'),e.push('\n\n<a href="#" class="calendar-grids__nav calendar-grids__nav--forward" title="Forward a month" data-behavior="forward_month">Forward a month</a>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){var t,e,n,i=function(t,e){return function(){return t.apply(e,arguments)}};n="[data-behavior~=categories_editor_link]",e="[data-role~=add_default_categories]",t=function(){function t(t){this.url=t,this.didClickAddDefaultCategoriesButton=i(this.didClickAddDefaultCategoriesButton,this),this.didCloseModal=i(this.didCloseModal,this),this.installModalElement(),this.installEventListeners()}return t.prototype.installEventListeners=function(){return BC.handleEvent("close",{on:this.element,"with":this.didCloseModal}),BC.handleEvent("click",{on:this.element,matching:e,"with":this.didClickAddDefaultCategoriesButton})},t.prototype.installModalElement=function(){return this.element=document.createElement("bc-modal"),this.element.classList.add("loading"),document.body.appendChild(this.element),this.populateModalElement().then(function(t){return function(){return t.element.classList.remove("loading")}}(this))},t.prototype.populateModalElement=function(){return BC.fetch(this.url).then(function(t){return function(e){return t.element.innerHTML=e}}(this))},t.prototype.didCloseModal=function(){return this.element.parentNode.removeChild(this.element)},t.prototype.didClickAddDefaultCategoriesButton=function(t){return $.ajax({url:t.target.dataset.url,type:"POST",success:function(t){return function(){return t.populateModalElement()}}(this)})},t}(),BC.observe(n,function(e){return BC.handleEvent("click",{on:e,"with":function(e){return e.preventDefault(),new t(e.target.dataset.url)}})})}.call(this),function(){var t,e,n,i,r,o,a,s,u,l,c,d,h,p=[].slice;s=BC.Chat.lineSelector,h="[data-behavior~=toggle_chat_line_delete_mode]",e="[data-behavior~=delete_chat_line]",l=":not(.chat-line--me), .chat-line--me:not(.chat-line--thread)",n="chat-line--delete-mode",i="chat-line--deleted",d=function(t){return t.classList.contains(n)?o():r(t)},r=function(t){var e,i,r,s;for(o(),r=a(t),s=[],e=0,i=r.length;e<i;e++)t=r[e],s.push(t.classList.add(n));return s},a=function(t){var e;return e=$(t).nextUntil(l).get(),[t].concat(p.call(e))},o=function(){var t,e,i,r,o;for(r=document.querySelectorAll("."+n),o=[],t=0,e=r.length;t<e;t++)i=r[t],o.push(i.classList.remove(n));return o},t=function(t){return o(),u(t),c(t)},u=function(t){return t.classList.add(i)},c=function(t){return BC.fetch(t.dataset.url,{method:"delete"})},$(document).on("click",h,function(t){var e;return e=BC.closest(this,s),d(e),t.stopImmediatePropagation()}),$(document).on("click",e,function(e){var n;if(confirm("Are you sure you want to delete this message?"))return n=BC.closest(this,s),t(n),e.stopImmediatePropagation()}),BC.on("click",o),BC.on("visibilitychange",o),BC.on("turbolinks:before-cache",o)}.call(this),function(){var t,e,n,i,r;r="[data-behavior~=choose_client_approval_date]",e=r+" [data-dated]",n=r+" [data-role=due_on_picker]",t="[data-dated=yes]",i="[data-role=due_on]",$(document).on("change",e,function(){var t,e,o;return t=BC.closest(this,r),e=t.querySelector(i),o=t.querySelector(n),"yes"===this.dataset.dated?(e.value=o.value,o.open()):(e.value=null,o.value=null)}),$(document).on("change",n,function(){var t,e;return t=BC.closest(this,r),e=t.querySelector(i),e.value=this.value}),$(document).on("focus",n,function(){return BC.closest(this,r).querySelector(t).checked=!0})}.call(this),function(){$(document).on("change","[data-behavior~=toggle_card_for_dock]",function(){var t,e;return e=$(this),t=e.closest("article"),this.checked?$.ajax({url:e.data("position-url"),type:"POST",dataType:"text",success:function(){return t.addClass("dock-toggle--docked")}}):$.ajax({url:e.data("position-url"),type:"DELETE",dataType:"text",success:function(){return t.removeClass("dock-toggle--docked")}})})}.call(this),function(){$(document).on("click","[data-behavior~=show_document_changes]",function(){return document.querySelector("#change_with_markup").style.display="",document.querySelector("#change_without_markup").style.display="none",!1}),$(document).on("click","[data-behavior~=hide_document_changes]",function(){return document.querySelector("#change_with_markup").style.display="none",document.querySelector("#change_without_markup").style.display="",!1})}.call(this),function(){var t,e,n,i,r,o;n="form [data-behavior~=warn_before_leaving_unsaved_document]",e="[data-behavior~=ignore_warning], [data-behavior~=backlink], [data-behavior~=discard_changes]",o="You haven't saved your changes. Do you really want to leave without saving this document?",t=function(){return $(n).attr("data-ignore-warning","")},i=function(){return $(n+"[data-changed]:not([data-ignore-warning])").length},r=function(){return $.ajax({url:$("[data-lock-url]").attr("data-lock-url"),type:"DELETE",dataType:"text"})},$(window).on("beforeunload",function(){if(i())return o}),$(document).on("turbolinks:before-visit",function(e){if(i())return confirm(o)?(r(),t()):e.preventDefault()}),$(document).on("click",e,function(){return t()}),$(document).on("keyup",n,function(){return $(n).attr("data-changed","")})}.call(this),function(){this.JST||(this.JST={}),this.JST["all/sections/embeds/dialog"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?r(t):""},i=t.safe,r=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){this.embed.url&&(e.push('\n  <div class="link_to_embed link_to_embed--'),e.push(n(this.embed.status)),e.push('">\n    '),"new"===this.embed.status?e.push('\n      Would you like to embed media from this site?\n      <input class="btn btn--small" type="button" data-behavior="embed_url" value="Yes, embed it">\n    '):"pending"===this.embed.status?e.push("\n      Embedding\u2026\n    "):"not_found"===this.embed.status&&e.push("\n      Sorry, turns out we couldn\u2019t find anything to embed at that URL.\n    "),e.push("\n  </div>\n")),e.push("\n")}).call(this)}.call(t),t.safe=i,t.escape=r,e.join("")}}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};BC.Embed=function(){function e(e){this.url=e,this.didUpdate=t(this.didUpdate,this),this.fetch=t(this.fetch,this),this.status="new"}return e.getURL=function(t){return null==t&&(t=""),BC.accountPath("/embeds"+t+".json")},e.getPatterns=function(t){return this.patterns?t(this.patterns):this.request?this.request.then(function(e){return function(){return t(e.patterns)}}(this)):(this.request=BC.fetch(this.getURL("/patterns"),{as:"json"}),this.request.then(function(e){return function(n){var i,r;return e.patterns=function(){var t,e,o,a;for(a=[],t=0,e=n.length;t<e;t++)o=n[t],r=o.source,i=o.options,a.push(new RegExp(r,i));return a}(),t(e.patterns)}}(this)))},e.prototype.save=function(t){return this.callback=t,this.status="pending",$.post(this.constructor.getURL(),{url:this.url}).done(this.didUpdate)},e.prototype.fetch=function(){return $.get(this.constructor.getURL("/"+encodeURIComponent(this.sgid))).done(this.didUpdate)},e.prototype.didUpdate=function(t){return _.extend(this,t),"pending"===this.status?setTimeout(this.fetch,1e3):(this.callback(this),delete this.callback)},e}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};BC.EmbedController=function(){function e(e){var n,i;n=e.element,i=e.urlInput,this.create=t(this.create,this),this.render=t(this.render,this),this.didInput=t(this.didInput,this),this.$element=$(n),this.$urlInput=$(i),this.installEventHandlers(),this.reset()}return e.prototype.template="all/sections/embeds/dialog",e.prototype.reset=function(){return this.embed=new BC.Embed,this.render()},e.prototype.installEventHandlers=function(){return this.$urlInput.on("input focusin",this.didInput),this.$element.on("click","[data-behavior~=embed_url]",this.create)},e.prototype.didInput=function(){return BC.Embed.getPatterns(function(t){return function(e){return e.some(function(e){return e.test(t.$urlInput.val())})?(t.embed.url=t.$urlInput.val().trim(),t.render()):t.reset()}}(this))},e.prototype.render=function(){return this.$element.html(JST[this.template]({embed:this.embed}))},e.prototype.create=function(){return this.embed.save(function(t){return function(){return"active"===t.embed.status?(t.didCreate(),t.reset()):t.render()}}(this)),this.render()},e.prototype.didCreate=function(){},e}()}.call(this),function(){var t,e,n,i,r,o,a,s,u;i="[data-behavior~=google_document_url_input]",n="[data-behavior~=google_document_type_selector]",e="[data-behavior~=google_document_icon]",t="[data-behavior~=google_document_link_error]",s=function(){var t,i;return i=$(n+" input:radio:checked").val(),t=i&&"other"!==i?"upload__icon--google-"+i:"upload__icon--google",$(e).attr("class","upload__preview upload__icon "+t)},a=function(){var t,e,r,o;return o=$(i).val(),e=null!=o?o.match(/(?:.*)?\/(document|spreadsheets|presentation|)\/.*$/):void 0,r=function(){switch(e[1]){case"document":return"doc";case"spreadsheets":return"sheet";case"presentation":return"slide";default:return"other"}}(),r&&(t=$(n).find("[data-document-type~="+r+"]"),t.prop("checked",!0)),s()},u=new RegExp("https://(docs|drive).google.com/([w?]+S*)?"),r=function(t){var e;return"function"==typeof URL?(e=document.createElement("a"),e.href=t,"https:"===e.protocol&&("docs.google.com"===e.hostname||"drive.google.com"===e.hostname)):!!u.test(t)},o=function(){var e;return e=$(i).val(),r(e)?($("form input:submit").prop("disabled",!1),a(),$(t).hide()):(document.querySelector(i),$(t).show(),$("form input:submit").prop("disabled",!0))},$(document).on("paste",i,function(){return setTimeout(o,0)}),$(document).on("keyup",i,function(){return setTimeout(o,0)}),$(document).on("change",n+" input:radio",function(){return function(){return s()}}())}.call(this),function(){var t,e,n,i,r,o,a;t="[data-behavior~=forward_reply_or_comment]",BC.observe(t,function(t){if(a(t))return r(t)}),$(document).on("ajax:beforeSend",t,function(){return e(this)}),$(document).on("click","[data-form-selection]",function(){return o(this,this.dataset.formSelection),i(this,this.dataset.formSelection),!1}),o=function(e,n){return $(e).closest(t).removeClass("showing-reply-form showing-comment-form").addClass("showing-"+n+"-form").find("[autofocus]:visible").focus()},i=function(t,e){return localStorage.setItem(n(t),e)},e=function(t){return localStorage.removeItem(n(t))},r=function(t){var e;if(null!=(e=localStorage.getItem(n(t))))return o(t,e)},n=function(e){return"bc3/inbox-forwards/"+BC.closest(e,t).dataset.recordingId+"/reply-or-comment"},a=function(t){return"true"===t.dataset.subscribersChanged}}.call(this),function(){this.JST||(this.JST={}),this.JST["all/sections/invitations/preview"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?r(t):""},i=t.safe,r=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="invite-preview">\n  <div class="invite-preview__header push--bottom txt--small">\n    <span>From: '),e.push(n(this.inviterName)),e.push(" (Basecamp)</span>\n    <span>Subject: "),e.push(n(this.inviterName)),e.push(" invited you to Basecamp ("),e.push(n(this.accountName)),e.push(")</span>\n    <span>To: Recipents</span>\n    <span>Reply-To: "),e.push(n(this.inviterEmailAddress)),e.push('</span>\n  </div>\n  <div data-role="dismiss" class="invite-preview__dismiss"></div>\n\n  <div class="invite-preview__camper"></div>\n\n  <h2 class="flush--top push_half--bottom">'),e.push(n(this.inviterFirstName)),e.push(' invited you to their Basecamp!</h2>\n\n  <div class="push_half--bottom">\n    '),e.push(n(this.inviterFirstName)),e.push(' added a note:\n\n    <p data-behavior="invite_note_text" class="push_quarter--top invite-preview__note">\n      (If you add a personal note, it\'ll go right here.)\n    </p>\n  </div>\n\n  <p class="flush">\n    Basecamp is a place that helps everyone stay organized and on the same page. It\u2019s really straightforward and easy! To join '),e.push(n(this.inviterFirstName)),e.push(', click this button:\n  </p>\n\n  <button class="btn btn--primary push--ends">\n    Join '),e.push(n(this.inviterFirstName)),e.push(' in Basecamp\n  </button>\n\n  <p class="flush">\n    If you have any questions, just email '),e.push(n(this.inviterFirstName)),e.push(" or reply to this message.\n  </p>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=r,e.join("")}}.call(this),function(){var t,e,n,i,r=function(t,e){return function(){return t.apply(e,arguments)}};e="[data-behavior~=invite_note_rich_text_field]",n="[data-behavior~=preview_email_invite]",i="[data-behavior~=invite_note_text]",t=function(){function t(t){this.inputField=t,this.close=r(this.close,this),this.render=r(this.render,this),this.previewElement=this.constructElement(),this.installEventHandlers(),this.render()}return t.prototype.installEventHandlers=function(){return BC.handleEvent("close",{on:this.previewElement,once:!0,"with":this.close}),BC.handleEvent("click",{on:this.previewElement,matching:"[data-role~=dismiss]","with":this.close})},t.prototype.render=function(){return document.body.appendChild(this.previewElement)},t.prototype.close=function(){var t,e;if(t=this.previewElement)return this.previewElement=null,null!=(e=t.parentNode)?e.removeChild(t):void 0},t.prototype.constructElement=function(){var t,e;return e=BC.makeElement("bc-modal"),e.innerHTML=JST["all/sections/invitations/preview"]({inviterName:BC.current.person.name,inviterFirstName:BC.current.person.name.split(/\s+/)[0],inviterEmailAddress:BC.current.person.emailAddress,accountName:BC.current.account.name}),(t=this.getInviteNote())&&(e.querySelector(i).innerHTML=t),e},t.prototype.getInviteNote=function(){var t;if(t=this.inputField.editor.getDocument().toString(),0!==t.trim().length)return this.inputField.value},t}(),BC.observe(n,function(n){return BC.handleEvent("click",{on:n,"with":function(n){return n.preventDefault(),new t(document.querySelector(e))}})})}.call(this),function(){BC.observe("[data-behavior~=load_logo_uploader]",function(t){if("true"===BC.current.person.admin)return BC.fetch(t.dataset.url).then(function(e){return t.outerHTML=e})})}.call(this),function(){$(document).on("ajax:beforeSend",function(t){var e;if(e=$(t.target),e.is("[data-behavior~=test_device_loading_state]"))return e.addClass("btn--loading").text("Sending notification\u2026").attr("disabled",!0)}),$(document).on("ajax:success",function(t){var e;if(e=$(t.target),e.is("[data-behavior~=test_device_loading_state]"))return e.removeClass("btn--loading").text("Test this device").attr("disabled",!1)})}.call(this),function(){BC.on("visibilitychange","collapse currently expanded menu",function(){if("hidden"===document.visibilityState)return $("#my_navigation [data-behavior~=expandable]").collapse()})}.call(this),function(){var t,e,n,i,r,o=function(t,e){return function(){return t.apply(e,arguments)}};i="[data-role~=jump_menu_recent_history]",e="[data-role~=jump_menu_main_content]",r=BC.accountPath("/my/navigation/jump_menu"),t=function(){function t(t){this.url=t,this.didPressKey=o(this.didPressKey,this),this.close=o(this.close,this),BC.handleEvent("keydown",{"with":this.didPressKey})}return t.prototype.open=function(){if(!this.element)return this.createElement(),BC.handleEvent("close",{on:this.element,once:!0,"with":this.close}),BC.handleEvent("click",{on:this.element,matching:"a[href]","with":this.close}),this.render()},t.prototype.close=function(){var t,e;if(t=this.element)return this.element=null,null!=(e=t.parentNode)?e.removeChild(t):void 0},t.prototype.toggle=function(){return this.element?this.close():this.open()},t.prototype.didPressKey=function(t){if(t.keyCode===BC.keyCodes.j&&(t.ctrlKey||t.metaKey)&&!t.shiftKey&&!t.altKey)return t.preventDefault(),this.toggle()},t.prototype.createElement=function(){return this.element=BC.makeElement("bc-modal"),this.element.innerHTML=JST["all/sections/my/navigation/jump_menu/content_filter"]()},t.prototype.render=function(){return document.body.appendChild(this.element),this.renderMainContent(),this.renderRecentHistory()},t.prototype.renderMainContent=function(){return BC.fetch(this.url).then(function(t){return function(n){var i,r;if(i=null!=(r=t.element)?r.querySelector(e):void 0)return i.insertAdjacentHTML("beforeend",n),i.classList.remove("jump-menu__group--loading")}}(this))},t.prototype.renderRecentHistory=function(){var t,e,n,r,o,a;if(e=BC.recentHistory.getEntriesWithoutPath(window.location.pathname),(t=null!=(a=this.element)?a.querySelector(i):void 0)&&e.length>0){for(r=0,o=e.length;r<o;r++)n=e[r],this.appendHistoryEntryToElement(n,t);return t.classList.remove("u-display-n")}},t.prototype.appendHistoryEntryToElement=function(t,e){return e.insertAdjacentHTML("beforeend",this.getHTMLForHistoryEntry(t))},t.prototype.getHTMLForHistoryEntry=function(t){return JST["all/sections/my/navigation/jump_menu/history_entry"]({entry:t})},t}(),n=function(){return BC.matches(document.documentElement,"[data-bridge-configuration~=native-jump-menu]")},n()||new t(r),BC.observe("[data-role~=jump-menu-modifier-key]",function(t){if(BC.platform.isMac())return t.innerHTML="\u2318"})}.call(this),function(){this.JST||(this.JST={}),this.JST["all/sections/my/navigation/jump_menu/content_filter"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<bc-content-filter autoselect class="jump-menu__content-filter">\n  <input type="text" class="jump-menu__input-field" data-behavior="content_filter_input"\n    placeholder="Jump to a project, person, or recently visited page\u2026" autofocus="true" spellcheck="false" autocorrect="off" autocomplete="off"\n    aria-owns="jump-menu__results" aria-describedby="jump-menu__description">\n    <span id="jump-menu__description" class="u-hide">Type to filter, and use up and down keys to navigate this list of pages you\u2019ve recently visited.</span>\n  <div class="jump-menu__results" id="jump-menu__results" role="listbox" scrollable>\n    <section data-role="jump_menu_recent_history content_filter_group" class="u-display-n">\n      <div class="jump-menu__group-title">Recently visited</div>\n    </section>\n    <section data-role="jump_menu_main_content" class="jump-menu__group--loading"></section>\n  </div>\n</bc-content-filter>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["all/sections/my/navigation/jump_menu/history_entry"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?r(t):""},i=t.safe,r=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<article class="jump-menu__result" data-role="content_filterable">\n  <a class="jump-menu__link" data-role="content_filter_text" href="'),e.push(n(this.entry.path)),e.push('">\n    <span class="jump-menu__icon jump-menu__icon--'),e.push(n(this.entry.type)),e.push('"></span>\n    '),e.push(n(this.entry.title)),e.push("\n    "),this.entry.subtitle&&(e.push('\n      <span class="jump-menu__subtitle">'),e.push(n(this.entry.subtitle)),e.push("</span>\n    ")),e.push("\n  </a>\n</article>\n")}).call(this)}.call(t),t.safe=i,t.escape=r,e.join("")}}.call(this),function(){var t,e,n,i,r,o,a;a=function(){var t;if((t=$("[data-role=my_notifications_badge]")).length)return BC.fetch(t.data("url"),{as:"json"}).then(function(t){var e,n,a;return a=t.state,e=t.hide_badge_counts,n=t.refresh_in,o(a),i(e),r(n)})},o=function(t){return n("notifications-state",t),"snoozed"===t?BC.enableFocusMode():BC.disableFocusMode()},i=function(t){return n("hide-badge-counts",t)},r=function(t){if(null!=t)return setTimeout(a,1e3*t)},n=function(t,e){return $("html").attr("data-"+t,e)},t=function(t,e){var n,i,r;return n=$("[data-role=my_notifications]"),$("[data-role=my_notifications_badge]"),i=null!=(r=t.data("verb"))?r:t.data("method"),t.addClass("btn--loading"),BC.fetch(e,{method:i}).then(function(t){return n.replaceWith(t),a()}),!1},e=function(){var t,e,n,i;return t=new Date,t.setHours(24,0,0,0),e=t.getTime()-(new Date).getTime(),i=Math.round(e/1e3),n=3600,Math.max(n,i)},$(document).on("click","[data-behavior~=enable_focus_mode]",function(){var n;return n=$(this),t(n,BC.formatURL(n.data("url"),{duration:e()}))}),$(document).on("click","[data-behavior~=change_notification_settings]",function(){var e;return e=$(this),t(e,e.data("url"))}),BC.ready(a)}.call(this),function(){var t,e,n;t=function(){function t(){this.storageKey=BC.current.account.slugPath,this.storage=new ObjectStore.Adapter({prefix:"bc3/recent-history"}),this.maxlength=31}var e;return t.prototype.getEntries=function(){var t,e;return null!=(t=null!=(e=this.storage.getObjectForKey(this.storageKey))?e.slice(0):void 0)?t:[]},t.prototype.getEntriesWithoutPath=function(t){var n,i,r,o,a;for(o=this.getEntries(),a=[],i=0,r=o.length;i<r;i++)n=o[i],n.path!==e(t)&&a.push(n);return a},t.prototype.record=function(t){var n,i,r,o,a;return i=t.path,o=t.title,r=t.subtitle,a=t.type,i=e(i),n=this.getEntriesWithoutPath(i),n.unshift({path:i,title:o,subtitle:r,type:a}),n.splice(this.maxlength),this.save(n)},t.prototype.save=function(t){return this.storage.updateObjectForKey(t,this.storageKey)},e=function(t){return t.split("@")[0]},t}(),BC.on("turbolinks:load",function(){return null==BC.recentHistory&&(BC.recentHistory=new t),n()}),n=function(){if("true"!==BC.current.page.excludeFromRecentHistory)return BC.recentHistory.record(e())},e=function(){return{path:window.location.pathname,type:BC.current.page.type,title:BC.current.page.title,subtitle:BC.current.page.subtitle}}}.call(this),function(){this.JST||(this.JST={}),this.JST["all/sections/my/navigation/search/error"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="search__results">\n  <p class="caps-subheading">\n    Search Results\n  </p>\n  <p class="flush--top" role="alert" aria-live="polite">Oops, there was a problem with that search.</p>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["all/sections/my/navigation/search/projects_and_people"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?r(t):""},i=t.safe,r=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,r,o,a,s,u,l;for(this.projects.length&&this.people.length?e.push('\n  <h4 class="caps-subheading">Projects & People</h4>\n'):this.projects.length?e.push('\n  <h4 class="caps-subheading">Projects & Teams</h4>\n'):this.people.length&&e.push('\n  <h4 class="caps-subheading">People</h4>\n'),e.push("\n\n"),u=this.projects,t=0,r=u.length;t<r;t++)s=u[t],e.push('\n  <div class="search-result search-result--jump search-result--project" data-target="list-selection.item">\n    <a href="'),e.push(BC.accountPath(s.path)),e.push('" class="search-result__icon"\n       aria-hidden="true" role="presentation"></a>\n\n    <a href="'),e.push(BC.accountPath(s.path)),e.push('" class="decorated txt--bold">'),e.push(n(s.name)),e.push("</a>\n  </div>\n");for(e.push("\n\n"),l=this.people,i=0,o=l.length;i<o;i++)a=l[i],e.push('\n  <div class="search-result search-result--jump search-result--person" data-target="list-selection.item">\n    <div class="search-result__icon" aria-hidden="true" role="presentation">\n      '),e.push(JST["all/sections/people/templates/_avatar"]({person:a})),e.push('\n    </div>\n\n    <a href="" class="decorated txt--bold" data-behavior="rich_avatar" data-rich-avatar-url="'),e.push(n(BC.accountPath("people/"+a.id+"/rich_avatar"))),e.push('">\n      '),e.push(n(a.name)),e.push("\n    </a>\n  </div>\n");e.push("\n")}).call(this)}.call(t),t.safe=i,t.escape=r,e.join("")}}.call(this),function(){BC.handleEvent("keydown",{"with":function(){return function(t){if(t.keyCode===BC.keyCodes.forwardSlash&&(t.ctrlKey||t.metaKey)&&!t.shiftKey&&!t.altKey)return t.preventDefault(),$("[data-behavior~=search_toggle_shortcut]").toggleExpansion()}}()})}.call(this),function(){var t,e;t="[data-unread-readable-identifier]",e="reading--show-actions",$(document).on("click","[data-behavior~=toggle_readable_actions]",function(){var n,i;return n=$(this).closest(t),n.toggleClass(e).siblings().removeClass(e),n.hasClass(e)&&(i=n.attr("data-reading-dom-id"),$.ajax({url:n.attr("data-edit-url"),method:"GET",success:function(t){return n.find("#"+i).html(t)}})),!1}),$(document).on("bc:unread-readable",function(t){var n;return n=$(t.target),n.removeClass(e)}),$(document).on("click","[data-behavior~=unsubscribe_from_readable]",function(){var n,i;return n=$(this),i=n.closest(t),n.addClass("submitting").text(n.data("active-text")),BC.fetch(i.data("subscription-url"),{method:"DELETE"}).then(function(){return setTimeout(function(){return i.removeClass(e),n.remove()},500)}),!1})}.call(this),function(){$(document).on("change","[data-behavior~=increase_end_hour_unless_greater_than_start_hour]",function(){var t;if(t=$(this).siblings("[data-role~=end_hour]"),Number(t.val())<=Number($(this).val()))return t.val(Number($(this).val())+1)}),$(document).on("change","[data-behavior~=reduce_start_hour_unless_less_than_end_hour]",function(){var t;if(t=$(this).siblings("[data-role~=start_hour]"),
Number(t.val())>=Number($(this).val()))return t.val(Number($(this).val())-1)})}.call(this),function(){$(document).on("click","[data-behavior~=toggle_badge_count_checkbox]",function(){var t;return t=$(this).closest(".notification-settings-option").find("label"),t.find("input[type=checkbox]").prop("checked","checkbox_on"===$(this).data("role")).trigger("change"),!1})}.call(this),function(){$(document).on("click","[data-behavior~=avatar_selector_button]",function(){return $("[data-behavior~=avatar_selector_input]").click()}),$(document).on("change","[data-behavior~=avatar_selector_input]",function(){var t,e;if(e=this.files[0])return t=new FormData,t.append("avatar",e),$.ajax({url:$(this).data().avatarPreviewUrl,contentType:!1,type:"POST",data:t,processData:!1,success:function(t){return $(".profile-avatar").html("<img class='avatar profile-avatar__avatar' src='data:"+t.content_type+";base64,"+t.data+"' width='128' height='128'>")}})})}.call(this),function(){$(document).on("click","[data-behavior~=subscribe_to_report]",function(){var t;return t=$(this),BC.fetch(t.data("url"),{method:"PUT"}).then(function(e){return t.replaceWith(e)})}),$(document).on("click","[data-behavior~=unsubscribe_from_report]",function(){var t;return t=$(this),BC.fetch(t.data("url"),{method:"DELETE"}).then(function(e){return t.replaceWith(e)})})}.call(this),function(){var t,e;e="[data-behavior=person_invitation_redelivery_notice]",t="[data-role=person_email_address_input]",BC.observe(t,function(t){var e;return null!=(e=t.dataset).originalValue?e.originalValue:e.originalValue=t.value}),$(document).on("keyup",t,function(){return $(e).toggle(this.value!==this.dataset.originalValue)})}.call(this),function(){$(document).on("collapse","[data-behavior~=reset_editor_on_collapse]",function(){return this.querySelector("trix-editor").reset()})}.call(this),function(){var t,e,n,i,r,o=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){this.url=t,this.didClickDismiss=o(this.didClickDismiss,this),this.close=o(this.close,this),this.open()}return t.prototype.open=function(){if(!this.element)return this.element=BC.makeElement("bc-modal"),BC.handleEvent("close",{on:this.element,once:!0,"with":this.close}),BC.handleEvent("click",{on:this.element,matching:"[data-role~=dismiss]","with":this.didClickDismiss}),this.render()},t.prototype.close=function(){var t;if(this.element)return null!=(t=this.element.parentNode)&&t.removeChild(this.element),this.element=null},t.prototype.render=function(){return document.body.appendChild(this.element),BC.fetch(this.url).then(function(t){return function(e){var n;return null!=(n=t.element)?n.innerHTML=e:void 0}}(this))},t.prototype.didClickDismiss=function(t){return t.stopPropagation(),this.close()},t}(),i="[data-behavior~=rich_avatar]",r="[data-rich-avatar-suppressed]",BC.handleEvent("click",{matching:i,"with":function(i){if(i.preventDefault(),!BC.displayingTurbolinksPreview()&&!n(i.target)&&!e(i.target))return new t(i.target.dataset.richAvatarUrl)}}),n=function(t){return null!=BC.closest(t,r)},e=function(t){var e;return e=BC.triggerEvent(t,"rich-avatar:before-load"),e.defaultPrevented}}.call(this),function(){this.JST||(this.JST={}),this.JST["all/sections/people/templates/_avatar"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?r(t):""},i=t.safe,r=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<img class="avatar" size="64x64"\n  src="'),e.push(n(this.person.avatarUrl)),e.push('"\n  title="'),e.push(n(this.person.name)),e.push('"\n  alt="'),e.push(n(this.person.name)),e.push('"\n  data-behavior="rich_avatar"\n  data-rich-avatar-url="'),e.push(n(BC.accountPath("people/"+this.person.id+"/rich_avatar"))),e.push('" />')}).call(this)}.call(t),t.safe=i,t.escape=r,e.join("")}}.call(this),function(){var t,e,n,i,r,o,a;e="[data-behavior~=camper_helper]",a="[data-behavior~=play_playground_video]",n=function(){return!!$("[data-role~=playground_helper]").length&&"true"===("undefined"!=typeof localStorage&&null!==localStorage?localStorage.getItem("hideCamperHelper"):void 0)},i=function(){return $(e).addClass("camper-helper--hidden"),$(e).removeClass("camper-helper--opened"),"undefined"!=typeof localStorage&&null!==localStorage?localStorage.setItem("hideCamperHelper","true"):void 0},t=function(){return $(e).addClass("camper-helper--dismissed"),$(e).removeClass("camper-helper--opened")},o=function(){return $(e).removeClass("camper-helper--hidden"),"undefined"!=typeof localStorage&&null!==localStorage?localStorage.removeItem("hideCamperHelper"):void 0},r=function(){var t;if(t=$(a).data("video-url"),$(e).addClass("camper-helper--zoomed"),!$("[data-role~=playground_video_iframe]").length)return $("[data-role~=playground_video]").prepend('<iframe data-role="playground_video_iframe" src="'+t+'" frameborder="0" allowfullscreen width="640" height="360" class="camper-helper__iframe"></iframe>')},$(document).on("click",a,function(){return r(),Beanstalk.logEvent("camperHelper","play"),setTimeout(function(){return $("[data-role~=playground_video]").addClass("camper-helper__video--fade-in")},200),!1}),$(document).on("click","[data-behavior~=unzoom_camper_helper]",function(){return $(e).removeClass("camper-helper--zoomed"),$("[data-role~=playground_video]").removeClass("camper-helper__video--fade-in"),$("[data-role~=playground_video_iframe]").remove(),!1}),$(document).on("click","[data-behavior~=toggle_camper_helper]",function(){return n()?(o(),Beanstalk.logEvent("camperHelper","unhide")):(i(),Beanstalk.logEvent("camperHelper","hide")),!1}),$(document).on("click","[data-behavior~=dismiss_camper_helper]",function(){return t(),Beanstalk.logEvent("camperHelper","dismiss")}),$(document).on("turbolinks:load",function(){if(n())return i()})}.call(this),function(){BC.on("turbolinks:load","wait for playground to be ready",function(){return $("[data-behavior~=load_playground_when_ready]").install("wait for playground to be ready",function(t){var e,n;return n=t.data("url"),(e=function(){return BC.fetch(n).then(function(t){return"true"===t?Turbolinks.visit(location.href):setTimeout(e,1e3)})})()})})}.call(this),function(){var t,e,n;e="[data-behavior~=company_hq_setup]",n=e+" [data-behavior~=project_kind_selector]",t=e+" [data-behavior~=existing_project_selector]",$(document).on("change",n,function(){return $(t).prop("disabled","existing_project"===!$(this).val())})}.call(this),function(){var t,e,n,i;t="[data-behavior~=announcement_banner]",n="[data-role~=announcement_banner_content]",i=function(){return!e()},e=function(){return $(t).find(n).length},$(document).on("click","[data-behavior~=dismiss_announcement_banner]",function(){return $(t).fadeOut(),BC.fetch($(this).data("url"),{method:"POST"})}),$(document).on("turbolinks:load",function(){var n;if(n=$(t),n.length&&i()&&BC.fetch(n.data("url")).then(function(t){return n.html(t)}),e())return $("body").addClass("top-banner-showing")})}.call(this),function(){$(document).on("expand","[data-behavior~=project_avatars]",function(t){var e,n,i,r,o,a,s;for(o=function(){var t,e,i,r;for(i=this.contentElement.overflowChildren,r=[],t=0,e=i.length;t<e;t++)n=i[t],BC.matches(n,".avatar")&&r.push(n);return r}.call(this),s=this.querySelector("[data-role=overflow_explanation]"),s.textContent="And "+o.length+" more "+(1===o.length?"person":"people")+":",a=this.querySelector("[data-role=overflow_avatars]"),a.innerHTML="",i=0,r=o.length;i<r;i++)e=o[i],a.appendChild(e.cloneNode(!0));return $(window).one("resize.project_avatars",function(){return $(t.target).collapse()})}),$(document).on("collapse","[data-behavior~=project_avatars]",function(){return $(window).off("resize.project_avatars")})}.call(this),function(){var t,e,n,i;i="[data-behavior~=my_stuff_counts]",e="[data-behavior~=load_archived_projects]",t="project-group-item--active",BC.on("turbolinks:load","lazy load project sections",function(){var t,n;if((n=$(i)).length&&BC.fetch(n.data("url"),{as:"json"}).then(function(t){var e,i,r,o;o=[];for(r in t)i=t[r],e=n.find("[data-role~=my_"+r+"_count]"),o.push(e.html("("+i+")").toggle(i>0));return o}),(t=$(e)).length)return BC.fetch(t.data("url")).then(function(e){return t.html(e)})}),n=function(t,e){var n;return n=$(t).hasBehavior("load_project_list_actions")?$(t).closest("[data-role~=project_settings]").find("[data-role~=card_slide]").first():$(t).closest("[data-role~=card_slide]"),n.hasClass("card__slide--loaded")?"function"==typeof e?e():void 0:(n.addClass("card__slide--loading"),$.get($(t).data("url"),function(){return function(){return n.toggleClass("card__slide--loading card__slide--loaded"),"function"==typeof e?e():void 0}}()))},$(document).on("click","[data-behavior~=load_project_card_actions]",function(){return n(this,function(t){return function(){return $(t).advanceCardSlide()}}(this))}),$(document).on("click","[data-behavior~=load_project_list_actions]",function(){return $(this).expand(),n(this)}),$(document).on("expand","[data-role~=project_settings]",function(){return $(this).closest("[data-role~=project_group_item]").addClass(t)}),$(document).on("collapse","[data-role~=project_settings]",function(){return $(this).closest("[data-role~=project_group_item]").removeClass(t)})}.call(this),function(){var t;t=function(t,e){return null==e&&(e=[]),(null!=e?e.length:void 0)?JST["all/sections/projects/home/new_project_from_template"]({templates:e}):"team"===t?JST["all/sections/projects/home/new_project"]({purpose:t,placeholder:"Name this team"}):"topic"===t?JST["all/sections/projects/home/new_project"]({purpose:t,placeholder:"Name this project"}):void 0},$(document).on("click","[data-behavior~=add_project_from_menu]",function(){var e,n,i;return n=$(this).closest("[data-role~=add_project_with_template]"),e=n.find("[data-role~=add_project_menu]"),i=n.find("[data-role~=new_project_form_container]"),e.hide(),i.show(),i.html(t($(this).data("purpose"),$(this).data("templates"))),i.find("[data-role~=new_project_name]").focus(),!1}),$(document).on("expand","[data-behavior~=render_new_project_form_on_expand]",function(){var e;return e=$(this).find("[data-role~=new_project_form_container]"),e.html(t($(this).data("purpose"))),!1}),$(document).on("collapse","[data-role~=add_project_with_template]",function(){return $(this).find("[data-role~=new_project_form_container]").hide(),$(this).find("[data-role~=add_project_menu]").show()}),$(document).on("click","[data-behavior~=set_new_project_template]",function(){var t,e;return t=$(this).closest("[data-role~=new_project_form_container]"),e=t.find("[data-role~=new_project_template] option:selected"),!!e.val().length&&$(this).advanceCardSlide()}),$(document).on("click","[data-behavior~=cancel_new_project]",function(){return $(this).closest("[data-behavior~=expandable]").collapse(),!1}),$(document).on("click","[data-behavior~=rename_card]",function(){return setTimeout(function(t){return function(){var e;return e=$(t).closest("[data-role~=project_card]"),e.find("[data-role~=project_name]").select(),!1}}(this),200)}),$(document).on("click","[data-behavior~=cancel_card_rename]",function(){var t,e;return t=$(this).closest("[data-role~=project_card]"),e=t.find("[data-role~=project_card_edit]"),e.find("form")[0].reset(),$(this).resetCardSlider(),!1})}.call(this),function(){this.JST||(this.JST={}),this.JST["all/sections/projects/home/new_project"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?r(t):""},i=t.safe,r=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<article class="card card--project card--new-project" data-behavior="hide_when_content_filter_active">\n  <form data-behavior="create_project_card">\n    <div class="card__content">\n      <section>\n        <input type="hidden" name="project[purpose]" value="'),e.push(n(this.purpose)),e.push('">\n\n        <h2 class="card__title flush">\n          <input type="text" autocomplete="off" autofocus required\n            name="project[name]" id="project_name"\n            placeholder="'),e.push(n(this.placeholder)),e.push('"\n            class="input push_quarter--bottom new-project__name-field floating-placeholder__input"\n            data-behavior="display_floating_placeholder highlight_required_field"\n            data-role="new_project_name"\n            data-controller="maxlength"\n            data-action="input->maxlength#enforceLimit"\n            data-maxlength-limit="255">\n          <label for="project_name" class="floating-placeholder__label" data-role="floating_placeholder">Name this '),e.push(n(this.humanPurpose)),e.push('</label>\n        </h2>\n\n        <input type="submit" value="Save" class="btn btn--primary btn--small" data-behavior="loading_on_submit primary_submit" data-loading-text="Saving\u2026">\n        <button class="btn btn--secondary btn--small" data-behavior="cancel_new_project">Cancel</button>\n      </section>\n    </div>\n  </form>\n</article>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["all/sections/projects/home/new_project_from_template"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?r(t):""},i=t.safe,r=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,r,o;for(e.push('<article class="card card--project card--new-project" data-behavior="hide_when_content_filter_active">\n  <form data-behavior="create_project_from_template_card">\n    <input type="hidden" name="project[purpose]" value="topic">\n\n    <section class="card__slider" data-role="card_slider">\n      <div class="card__slide card__slide-1" data-step="1" data-role="card_slide">\n        <div class="card__content">\n          <p class="flush--top push_quarter--bottom">\n            <select class="new-project__template-field input input--select input--full-width" data-role="new_project_template">\n              <option value="" selected="selected">Choose your template\u2026</option>\n              '),r=this.templates,t=0,i=r.length;t<i;t++)o=r[t],e.push('\n              <option value="'),e.push(n(o.url)),e.push('">'),e.push(n(o.name)),e.push("</option>\n              ");e.push('\n            </select>\n          </p>\n\n          <button type="button" class="btn btn--primary btn--small card__slide-yes-button" data-behavior="set_new_project_template">Next</button>\n          <button type="button" class="btn btn--secondary btn--small" data-behavior="cancel_new_project">Cancel</button>\n        </div>\n      </div>\n\n      <div class="card__slide card__slide-2" data-step="2" data-role="card_slide">\n        <div class="card__content">\n          <h2 class="card__title flush">\n            <input type="text" autocomplete="off" autofocus required\n              name="project[name]" id="project_name"\n              placeholder="Name this project"\n              class="input push_quarter--bottom new-project__name-field floating-placeholder__input"\n              data-behavior="display_floating_placeholder highlight_required_field"\n              data-role="new_project_name"\n              data-controller="maxlength"\n              data-action="input->maxlength#enforceLimit"\n              data-maxlength-limit="255">\n            <label for="project_name" class="floating-placeholder__label" data-role="floating_placeholder">Name this project</label>\n          </h2>\n\n          <input type="submit" value="Save" class="btn btn--primary btn--small card__submit--project" data-behavior="loading_on_submit primary_submit" data-loading-text="Saving\u2026">\n\n          <button class="btn btn--secondary btn--small" data-behavior="cancel_new_project">Cancel</button>\n        </div>\n      </div>\n    </section>\n  </form>\n</article>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,e.join("")}}.call(this),function(){var t;t=function(){function t(){/show_onboarding/.test(location.search)&&$("body").addClass("onboarding--active"),$(document).on("click",r,this.playVideo),$(document).on("click",o,this.stopVideo),$(document).on("click",i,this.onboardingComplete)}var e,n,i,r,o,a,s;return i="[data-behavior~=onboarding_complete]",n="[data-role~=onboarding_modal_content]",a="[data-role~=onboarding_video_iframe]",s="[data-role~=onboarding_video_player]",r="[data-behavior~=play_onboarding_video]",o="[data-behavior~=stop_onboarding_video]",e=function(){return"<iframe data-role='onboarding_video_iframe' src='//fast.wistia.net/embed/iframe/4a3f6hehi0?autoPlay=true' frameborder='0' allowfullscreen width='640' height='360' class='camper-helper__iframe' />"},t.prototype.playVideo=function(){return setTimeout(function(){return $(n).addClass("onboarding__modal-content--zoomed"),$("[data-role~=onboarding_video_launcher]").remove()},200),$(a).length||$(s).prepend(e()),Beanstalk.logEvent("onboardingIntroVideo","play"),!1},t.prototype.stopVideo=function(){return $(n).removeClass("onboarding__modal-content--zoomed").onTransitionEnd(function(){return function(){return $(n).addClass("onboarding__modal-content--video-done"),$(a).remove(),$(o).remove()}}()),Beanstalk.logEvent("onboardingIntroVideo","stop"),!1},t.prototype.onboardingComplete=function(){return $(this).closest(n).transitionClass("onboarding__modal-content--slide-out",function(){return function(){return $("body").removeClass("onboarding--active"),$("[data-behavior~=trial_upgrade_banner]").remove()}}()),Beanstalk.logEvent("onboarding","complete")},t}(),BC.observe("[data-behavior~=show_onboarding]",function(){return new t})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};BC.BackgroundOperationMonitor=function(){function e(e,n){var i,r,o;this.url=e,o=null!=n?n:{},r=o.maxChecks,i=o.delay,this.evaluateStatus=t(this.evaluateStatus,this),this.check=t(this.check,this),this.checks=0,this.maxChecks=null!=r?r:300,this.delay=null!=i?i:1e3}return e.prototype.start=function(){if(null==this.started)return this.started=!0,new Promise(function(t){return function(e,n){return t.resolve=e,t.reject=n,t.check()}}(this))},e.prototype.check=function(){return this.checks+=1,this.fetchStatus().then(this.evaluateStatus)},e.prototype.fetchStatus=function(){return BC.fetch(this.url,{as:"json"}).then(function(t){return t})["catch"](function(t){return function(){return t.reject()}}(this))},e.prototype.evaluateStatus=function(t){switch(t.status){case"completed":return this.resolve(t);case"failed":return this.reject(t);default:return this.scheduleNextCheckOrTimeout()}},e.prototype.scheduleNextCheckOrTimeout=function(){return this.checks<this.maxChecks?setTimeout(this.check,this.delay):this.reject()},e}()}.call(this),function(){var t,e,n,i,r,o;n="project-index__section--empty",r=function(t){return t.get(0).dataset.highlightAfterSort=!0},e=function(t,e){var n;return n="list"===t.data("projects-display")?e.representation.list:e.representation.card,$(n)},o=function(t,i){return t.find("[data-behavior~=cancel_new_project]").remove(),$.post(i,t.serialize(),function(i){var o,a,s;return t.closest("[data-behavior~=expandable]").collapse(),o=t.closest("[data-role~=project_group]"),s=o.find("[data-role~=unbookmarked_projects_container]"),a=e(o,i),o.removeClass(n),r(a),s.append(a)}),!1},i=function(t,n){var i;return i=e(t.closest("[data-role~=project_group]"),n),r(i),t.after(i),t.remove()},t=function(t){return new BC.BackgroundOperationMonitor(t).start().then(function(t){return t.home_project_url})},$(document).on("click","[data-behavior~=toggle_project_bookmark]",function(){var t,e,n,i,o,a;return t=$(this),i=t.closest("[data-role~=project_group_item]"),e=i.closest("[data-role~=project_group_items]"),a=i.closest("[data-role~=bookmarked_projects_container]").length,a?(n=e.find("[data-role~=unbookmarked_projects_container]"),o="DELETE"):(n=e.find("[data-role~=bookmarked_projects_container]"),o="PUT"),$.ajax({url:t.data("url"),type:o,success:function(){return a||r(i),n.append(i)}}),$(this).collapse(),$(this).resetCardSlider(),!1}),$(document).on("submit","form[data-behavior~=create_project_card]",function(){return o($(this),BC.accountPath("/home/projects"))}),$(document).on("submit","form[data-behavior~=create_project_from_template_card]",function(){return o($(this),$(this).find("[data-role~=new_project_template] option:selected").val())}),$(document).on("ajax:beforeSend","[data-role~=card_action], [data-role~=project_card_edit] form",function(){var t;return t=$(this).closest("[data-role~=project_card]"),t.addClass("busy")}),$(document).on("ajax:success","form[data-behavior~=edit_project_form]",function(t,e){return i($(this).closest("[data-role~=project_group_item]"),e)}),BC.observe("[data-behavior~=monitor_project_construction_card]",function(e){return t(e.dataset.url).then(function(t){return $(e).find("[data-role~=project_construction_progress]").html("Finishing up\u2026"),BC.fetch(t).then(function(t){return i($(e),JSON.parse(t))})})})}.call(this),function(){var t,e,n,i,r,o,a,s=function(t,e){return function(){return t.apply(e,arguments)}},u=[].slice;e="[data-role~=grouped_projects_container]",i="[data-role~=project_group_item]",o="data-sortable-group",a="data-sortable-name",r="[data-role~=project_settings]",n="project-group-item--highlighted",t=function(){function t(t){this.element=t,this.projectsChanged=s(this.projectsChanged,this),this.observer=new MutationObserver(this.projectsChanged),this.skipDividers="true"===this.element.dataset.skipDividers,this.render()}var e,l;return t.prototype.render=function(){return this.withoutObserver(function(){var t;return t=this.createSortedFragment(),this.element.innerHTML="",this.element.appendChild(t)})},t.prototype.createSortedFragment=function(){var t,e,n,i,r;for(e=document.createDocumentFragment(),r=this.getSortedElements(),n=0,i=r.length;n<i;n++)t=r[n],e.appendChild(t);return this.skipDividers||this.insertDividerElements(e),e},t.prototype.getUnsortedElements=function(){return u.call(this.element.querySelectorAll(i))},t.prototype.getSortedElements=function(){return this.getUnsortedElements().sort(e)},e=function(t,e){return l(t).localeCompare(l(e))},l=function(t){return t.getAttribute(o)+": "+t.getAttribute(a)},t.prototype.insertDividerElements=function(t){var e,n,i,r,a,s,l;for(a=new Set,l=u.call(t.childNodes),i=0,s=l.length;i<s;i++)n=l[i],n.nodeType===Node.ELEMENT_NODE&&(r=n.getAttribute(o))&&(a.has(r)||(a.add(r),e=this.getDividerElement(r),t.insertBefore(e,n)));return t},t.prototype.getDividerElement=function(t){var e;return null==this.dividerElements&&(this.dividerElements={}),(e=this.dividerElements[t])||(e=this.createDividerElement(t),this.dividerElements[t]=e),e},t.prototype.createDividerElement=function(t){var e;return e=BC.makeElement("h4",{"class":"project-list__group-header break break--on-background break--flush-left","data-behavior":"hide_when_content_filter_active"}),e.innerHTML="<span>"+t+"</span>",e},t.prototype.projectsChanged=function(t){var e,n;if(this.render(),(e=this.findAddedProjectId(t))&&(n=document.getElementById(e),n.dataset.highlightAfterSort))return this.highlightProject(n)},t.prototype.findAddedProjectId=function(t){var e,n,i,r,o,a,s;for(n=0,r=t.length;n<r;n++)for(a=t[n],s=a.addedNodes,i=0,o=s.length;i<o;i++)if(e=s[i],e.nodeType===Node.ELEMENT_NODE)return e.id},t.prototype.removeHighlightClasses=function(){var t,e,r,o,a;for(o=document.querySelectorAll(i+"."+n),a=[],e=0,r=o.length;e<r;e++)t=o[e],a.push(t.classList.remove(n));return a},t.prototype.highlightProject=function(t){var e;return delete t.dataset.highlightAfterSort,BC.elementInViewport(null!=(e=t.querySelector(r))?e:t)||requestAnimationFrame(function(){return $("html,body").animate({scrollTop:$(t).offset().top-60},"fast")}),this.removeHighlightClasses(),$(t).transitionClass(n)},t.prototype.startObserver=function(){if(!this.observing)return this.observing=!0,this.observer.observe(this.element,{childList:!0})},t.prototype.stopObserver=function(){if(this.observing)return this.observing=!1,this.observer.disconnect()},t.prototype.withoutObserver=function(t){try{return this.stopObserver(),t.call(this)}finally{this.startObserver()}},t}(),BC.observe(e,function(e){if(!BC.displayingTurbolinksPreview())return new t(e)})}.call(this),function(){$(document).on("click","[data-behavior~=show_unsubscribed_projects]",function(){var t;return t=$(this).closest("[data-role~=unsubscribed_projects]"),t.find("[data-role~=project_group]").removeBehavior("hide_unless_content_filter_match"),$(this).hide()})}.call(this),function(){this.JST||(this.JST={}),this.JST["all/sections/projects/people/spreadsheet/existing_row"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?r(t):""},i=t.safe,r=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="people-form__person people-form__person--existing" data-role="existing_user_row" data-user-id="'),e.push(n(this.user.id)),e.push('">\n  <input type="hidden" name="people[existing][]" value="'),e.push(n(this.user.id)),e.push('">\n\n  <label class="people-form__column">\n    <div class="people-form__label">Name</div>\n    <div class="people-form__info">\n      <span class="people-form__avatar-wrapper">\n        '),e.push(this.user.avatar),e.push(" "),e.push(n(this.user.name)),e.push('\n      </span>\n    </div>\n  </label>\n\n  <label class="people-form__column">\n    <div class="people-form__label">Email</div>\n    <div class="people-form__info">'),e.push(n(this.user.email_address)),e.push('</div>\n  </label>\n\n  <label class="people-form__column">\n    <div class="people-form__label">Job title</div>\n    <div class="people-form__info">'),e.push(n(this.user.title)),e.push('</div>\n  </label>\n\n  <label class="people-form__column people-form__column--company">\n    <div class="people-form__label">Organization</div>\n    <div class="people-form__info">'),e.push(n(this.user.company_name)),e.push('</div>\n  </label>\n\n  <label class="people-form__column people-form__column--action">\n    <a href="'),e.push(n(this.user.edit_url)),e.push('" class="plain-btn people-form__action people-form__action--edit">Edit</a>\n\n    <button class="plain-btn people-form__action people-form__action--remove txt--delete" data-behavior="remove_user_row" title="Remove">Remove</button>\n  </label>\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,e.join("")}}.call(this),function(){var t,e,n,i,r,o,a,s,u,l,c,d,h,p,f,m,g,v,b,y,C,D,E,w,B,S,k,A,F,x,T,L,I,P,M,q,O,j,R,N,U,J,H,V,W,z,K,Y,G,X,Q=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},Z=[].slice;S="[data-role~=person_entry_form]",G="[data-behavior=users]",i="[data-behavior~=add_from_company]",n="[data-behavior~=add_everyone_from_client_company]",K="[data-role=user_rows_container]",L="[data-role=new_user_row]",g="[data-role=existing_user_row]",m="[data-role=company_name]",u="[data-role=candidate_checkbox]",l="[data-role=candidates]",d="[data-behavior~=client_company_name_input]",Y=new ObjectStore.Adapter({prefix:"bc3/project-users"}),p=new ObjectStore.Adapter({prefix:"bc3/project-clients"}),BC.observe(S,function(t){if(!BC.displayingTurbolinksPreview())return BC.ready(function(){return f(t),R(t),e()})}),BC.observe(L+" bc-autocomplete",{selectorMatched:function(t){return t.addEventListener("change",s)},selectorUnmatched:function(t){return t.removeEventListener("change",s)}}),s=function(t){var e;if(e=t.target,$(e).hasBehavior("insert_user_row_on_change")){if(F(e))return e.unselectAll(),e.inputElement.focus();if(e.value)return B(e)}else if(e.value)return B(e)},F=function(t){var e,n;if((e=t.selectedValues[0])&&(n=w(e)))return o(n),r(n),H(),!0},B=function(t){var e;return null!=(e=C(t))?e.focus():void 0},C=function(t){var e,n;return e=$(t).closest("label"),n=e.next(":has(:input)"),n.length||(n=e.closest(L).next(L)),n.find(":input").get(0)},$(document).on("click","[data-behavior~=remove_user_row]",function(){var t;if(t=$(this).closest(g))return M(t)}),$(document).on("click","[data-behavior~=clear_users_form_state]",function(){return c()}),$(document).on("focus",L,function(){return I(this)}),$(document).on("focus",L+":last-child",function(){return a()}),$(document).on("input change",L,function(){return W()}),$(document).on("ajax:beforeSend",S,function(){return X()}),$(document).on("ajax:success",S,function(){return c()}),$(document).on("change",d,function(){return h()}),BC.observe(u,function(t){var e,n,i,r;if(e=BC.closest(t,l).dataset.bucketId,n=parseInt(t.value),i=null!=(r=k().getObjectForKey("existing/"+e))?r:[],Q.call(i,n)>=0)return $(t).closest("[data-role=candidate_checkbox_container]").addClass("list-picker-item__button-or-label--show-label")}),$(document).on("click","[data-behavior~=add_existing_user_rows_for_checked_candidates]",function(){return V(this.dataset.bucketId),!0}),$(document).on("change",i,function(){var e;return e=parseInt($(this).find("option:selected").val()),t(e),this.selectedIndex=0}),$(document).on("click",n,function(){return t($(this).data("company-id")),!1}),k=function(){return"clients"===$(S).data("person-type")?p:Y},h=function(){var t,e,n,i,r,o,a,s,u;for(t=$("[data-value]").data("value"),e=$(G).data("users").filter(function(e){return e.company_name===t}),$("[data-role~=client_company_name]").html(t),s=$(g),i=0,o=s.length;i<o;i++)n=s[i],M($(n));for(r=0,a=e.length;r<a;r++)u=e[r],J(u);return $("#client_people").show()},t=function(t){var e,n,i,r,o,a,s,u;for(H(),s=$(g),i=0,o=s.length;i<o;i++)n=s[i],$(n).remove();for(e=$(G).data("users").filter(function(e){return e.company_id===t}),r=0,a=e.length;r<a;r++)u=e[r],J(u);return j(document.querySelector(S)),H()},R=function(t){return j(t),U(t)},j=function(t){var e,n,i,r,o;for(i=D(t),r=[],e=0,n=i.length;e<n;e++)o=i[e],b(o)?r.push(void 0):r.push(A(o));return r},J=function(t){if(!b(t))return A(t),r(t)},D=function(t){var e,n;return(n=k().getObjectForKey("existing/"+t.dataset.bucketId))?_.compact(function(){var t,i,r;for(r=[],t=0,i=n.length;t<i;t++)e=n[t],r.push(w(e));return r}()):[]},U=function(t){var e,n,i,r;if((r=E(t)).length){for(P(),n=0,i=r.length;n<i;n++)e=r[n],N(e);return a()}},E=function(t){var e;return(e=k().getObjectForKey("new/"+t.dataset.bucketId))?e:[]},P=function(){return $(L).remove()},N=function(t){var e,n,i,r,o,s;o=a(),r=[];for(n in t)s=t[n],(e=o.querySelector("input[name='"+n+"']"))?(e=null!=(i=BC.closest(e,"bc-autocomplete"))?i:e,r.push(e.value=s)):r.push(void 0);return r},A=function(t){var e,n;return n=v(t),e=O("existing_row",{user:t}),null!=n?$(b(n)).before(e):o(t)},v=function(t){return _.find(y(),function(e){return t.name.toLowerCase()<e.name.toLowerCase()})},y=function(){var t;return _.compact(function(){var e,n,i,r;for(i=document.querySelectorAll(g),r=[],e=0,n=i.length;e<n;e++)t=i[e],r.push(w(t.dataset.userId));return r}())},x=null,f=function(t){var e,n;return e=t.querySelectorAll(L),n=e[e.length-1],x=null!=n?n.cloneNode(!0):void 0},a=function(){var t,e;return e=x.cloneNode(!0),t=$(g+", "+L),t.length?t.last().after(e):$(K).append(e),e},M=function(t){var e;if(t.remove(),H(),e=w(t.data("user-id")))return q(e)},w=function(t){var e,n,i,r;for(i=$(G).data("users"),e=0,n=i.length;e<n;e++)if(r=i[e],r.id===parseInt(t))return r},o=function(t){var e;return e=O("existing_row",{user:t}),$(L).first().before(e)},O=function(t,e){return null==e&&(e={}),JST["all/sections/projects/people/spreadsheet/"+t](e)},H=function(){var t,e,n;if(e=function(){var t,e,i,r;for(i=document.querySelectorAll(g+":not([data-persisted])"),r=[],t=0,e=i.length;t<e;t++)n=i[t],r.push(parseInt(n.dataset.userId));return r}(),t=document.querySelector(S))return k().updateObjectForKey(e,"existing/"+t.dataset.bucketId)},V=function(t){var e,n,i,r;return n=null!=(r=k().getObjectForKey("existing/"+t))?r:[],i=function(){var t,n,i,r;for(i=document.querySelectorAll(u+":checked"),r=[],t=0,n=i.length;t<n;t++)e=i[t],r.push(parseInt(e.value));return r}(),k().updateObjectForKey(_.union(n,i),"existing/"+t)},W=function(){var t,e,n,i,r,o,a
;for(a=[],r=document.querySelectorAll(L),n=0,i=r.length;n<i;n++)o=r[n],t=z(o),Object.keys(t).length&&a.push(t);if(e=document.querySelector(S))return k().updateObjectForKey(a,"new/"+e.dataset.bucketId)},z=function(t){var e,n,i,r,o;for(e={},o=t.querySelectorAll("input"),n=0,r=o.length;n<r;n++)i=o[n],i.name.length>0&&0!==i.value.trim().length&&(e[i.name]=i.value);return e},c=function(){var t,e;if(t=document.querySelector(S))return e=k(),e.removeObjectForKey("new/"+t.dataset.bucketId),e.removeObjectForKey("existing/"+t.dataset.bucketId)},q=function(t){var e,n,i,r,o;for(r=$("[data-behavior~=insert_user_row_on_change]"),o=[],n=0,i=r.length;n<i;n++)e=r[n],o.push(e.unexcludeValue(""+t.id));return o},r=function(t){var e,n,i,r,o;for(r=$("[data-behavior~=insert_user_row_on_change]"),o=[],n=0,i=r.length;n<i;n++)e=r[n],o.push(e.excludeValue(""+t.id));return o},e=function(){var t,e,n,i,o;for(n=y(),i=[],t=0,e=n.length;t<e;t++)o=n[t],i.push(r(o));return i},I=function(t){var e,n,i,r;if((i=$(t).prev(L).get(0))&&(n=i.querySelector(m))&&(r=n.selectedAutocompletables,n.selectedValues,r.length&&T(t)&&(e=t.querySelector(m),0===e.selectedValues.length&&null==e.dataset.companyPopulated)))return e.addAutocompletables(r)},T=function(t){return Z.call(t.querySelectorAll("input")).some(function(t){return t.name.length>0&&t.value.length>0})},b=function(t){return document.querySelector(g+"[data-user-id='"+t.id+"']")},X=function(){var t,e,n,i,r,o,a,s,u,l;for(e=document.querySelector("[data-behavior~=flash_notice]"),e.style.display="none",s=document.querySelectorAll(L),n=0,o=s.length;n<o;n++)if(l=s[n],T(l))for(u=l.querySelectorAll("input[data-required]"),r=0,a=u.length;r<a;r++)if(i=u[r],(t=BC.closest(i,"bc-autocomplete"))&&(i=t),0===i.value.trim().length)return e.style.display="block",$(document.body).animate({scrollTop:0}),!1;return!0}}.call(this),function(){var t,e,n;e="[data-behavior~=notify_if_assignees_change]",n="[data-behavior~=notify_assignees]",BC.observe(e,{selectorMatched:function(e){return e.addEventListener("change",t)},selectorUnmatched:function(e){return e.removeEventListener("change",t)}}),t=function(t){var e,i,r,o;return o=t.target,i=BC.closest(o,"form").querySelector(n),e=i.querySelector("input[type=checkbox]"),r=BC.arrayWithout(o.selectedValues,BC.current.person.id).length,r?(i.classList.remove("u-display-n"),e.checked=!0):(i.classList.add("u-display-n"),e.checked=!1)},$(document).on("click","[data-behavior~=remove_all_assignments]",function(){var t;return t=$(this).closest("form"),t.find("#assignees").val(""),t.submit(),!1})}.call(this),function(){var t,e,n;e="btn--bookmarked-icon",t="btn--scale-fade-in",BC.on("turbolinks:load","set recording ."+e+" classes",function(){var t;if((t=$("[data-behavior~=toggle_bookmark]")).length)return BC.fetch(t.data("url"),{as:"json"}).then(function(n){if(n.bookmarked)return t.addClass(e).text("Bookmarked")})}),$(document).on("click","[data-behavior~=toggle_bookmark]",function(){var i;return i=$(this),i.hasClass(e)?BC.fetch(i.data("url"),{method:"delete"}).then(function(){return i.removeClass(e).transitionClass(t).text("Bookmark")}):BC.fetch(i.data("url"),{method:"put"}).then(function(){return i.addClass(e).transitionClass(t).text("Bookmarked!"),n()}),!1}),n=function(){return $("[data-behavior~=recording_flash_message_container]").append('<div class="flash-notice" data-behavior="flash_notice" data-flash-duration="2" data-remove="true">\n  <div class="flash-notice__content">\n    <span class="flash-notice__icon"></span> Bookmark saved to your home screen\n  </div>\n</div>')}}.call(this),function(){BC.observe("[data-behavior~=load_drafts_link]",function(t){if(!BC.displayingTurbolinksPreview())return BC.fetch(t.dataset.url).then(function(e){return t.innerHTML=e})})}.call(this),function(){$(document).on("click","[data-behavior~=add_new_folder]",function(){return $.ajax({url:$("[data-behavior~=add_content]").data("new-folder-url"),method:"GET",success:function(){var t;return t=$("[data-behavior~=new_folder_card]").first(),t.find("textarea").focus().get(0).select(),t.transitionClass("card--dropped"),$("[data-attribute~=blank_slate_scenarios]").hide()}}),!1}),$(document).on("click","[data-behavior~=delete_new_folder]",function(){var t;return t=$(this).closest("[data-behavior~=new_folder_card]"),t.addClass("card--deleting"),t.onTransitionEnd(function(){return t.remove()}),$("[data-attribute~=blank_slate_scenarios]").show(),!1})}.call(this),function(){$(document).on("click","[data-lock-url][data-behavior~=unlock_recording]",function(t){return $.ajax({url:$(this).attr("data-lock-url"),type:"DELETE"}),t.preventDefault()})}.call(this),function(){var t,e;t="bc-autocomplete[data-behavior~=notify_new_participants]",e=function(t){var e,n;return n=t.selectedValues,e=null,t.addEventListener("change",function(){var i,r,o,a,s,u,l,c,d;if(null==e&&(e=BC.subscriptionsPickerControllerForElement(t)),e){for(d=t.selectedValues,u=BC.arrayWithout(n,d),r=0,a=u.length;r<a;r++)c=u[r],e.remove(c);for(l=BC.arrayWithout(d,n),o=0,s=l.length;o<s;o++)i=l[o],e.add(i);return n=d}})},BC.observe(t,e)}.call(this),function(){var t;t=BC.getEventCoordinates,BC.SortableController=function(){function e(t){var e,i,r,o;this.options=null!=t?t:{},r=n.defaultOptions;for(i in r)o=r[i],null==(e=this.options)[i]&&(e[i]=o)}var n,i;return n={defaultOptions:{containerSelector:"body",opacity:.8},cloneStyles:{position:"fixed",zIndex:9999,pointerEvents:"none"}},e.prototype.initializeDragging=function(e){var n,i,r,o;return o=t(e),i=o.clientX,r=o.clientY,n=$(e.target),n=n.closest(this.options.selector),n.attr("draggable",!0),this.dragging={$target:n,startClientX:i,startClientY:r},this.addEventHandlers()},e.prototype.addEventHandlers=function(){throw new Error("Not implemented")},e.prototype.removeEventHandlers=function(){throw new Error("Not implemented")},e.prototype.startDragging=function(){var t,e;return this.dragging.$sortable=e=this.createSortable(),this.dragging.$container=e.closest(this.options.containerSelector),this.dragging.$startParent=e.parent(),this.dragging.$clone=t=this.createClone(),this.updateSortablePosition(),this.dragging.startPosition=this.dragging.position,this.dragging.started=!0,this.scrollManager=new BC.SortableScrollManager(this.dragging),this.trigger("start"),this.sendCallback("sortStart"),requestAnimationFrame(function(n){return function(){return"element"===n.cloneType?n.show(t):t.remove(),n.options.placeholderClassName?e.addClass(n.options.placeholderClassName):e.css({visibility:"hidden"})}}(this))},e.prototype.endDragging=function(){var t,e,n;return n=this.dragging,e=n.$sortable,t=n.$clone,t.remove(),this.options.placeholderClassName?e.removeClass(this.options.placeholderClassName):e.css({visibility:""}),this.scrollManager.stop(),this.updateSortablePosition(),this.trigger("end"),this.sendCallback("sortEnd"),this.sortChanged()&&this.sendCallback("sortUpdate"),this.reset()},e.prototype.reset=function(){if(this.dragging)return this.dragging.started?setTimeout(this.removeEventHandlers.bind(this),30):this.removeEventHandlers(),this.dragging.$target.removeAttr("draggable"),this.dragging=null},e.prototype.enterDraggable=function(t){var e,n,i,r,o,a;if(!this.isScrolling())return this.dragging.$over&&this.leaveDraggable(),e=this.findOuterMostDraggable(t),o=e.offset(),n=o.left,a=o.top,i=n+e.width()/2,r=a+e.height()/2,$.extend(this.dragging,{$over:e,overX:i,overY:r}),this.sendCallback("sortEnter")},e.prototype.leaveDraggable=function(){if(this.dragging.$over)return this.sendCallback("sortLeave"),$.extend(this.dragging,{$over:null,overX:null,overY:null})},e.prototype.enterDraggableParent=function(t){var e;if(!this.isScrolling())return this.dragging.$parent&&this.leaveDraggableParent(),this.dragging.$parent=e=$(t),0===e.find(this.options.selector).length?requestAnimationFrame(function(t){return function(){return e.append(t.dragging.$sortable),t.updateSortablePosition()}}(this)):void 0},e.prototype.leaveDraggableParent=function(){return this.dragging.$parent=null},e.prototype.draggingOverDraggable=function(t){var e,n,i,r,o,a,s;if(o=t.pageX,a=t.pageY,!this.isScrolling()&&(s=this.dragging,n=s.$over,i=s.$sortable,e=s.$container,!this.elementPreventsDropping(e)))return n&&!this.equal(n,i)&&null!=(r=this.dragOverAtPointShouldInsertBefore(o,a)?this.equal(n.prev(),i.last())?void 0:"insertBefore":this.equal(n.next(),i.first())?void 0:"insertAfter")?requestAnimationFrame(function(t){return function(){return i[r](n),t.updateSortablePosition(),t.leaveDraggable()}}(this)):void 0},e.prototype.draggingDraggable=function(t){var e,n;if("element"===this.cloneType)return e=t.clientX-this.dragging.startClientX,n=t.clientY-this.dragging.startClientY,this.moveClone(e,n)},e.prototype.equal=function(t,e){var n,i,r;if((null!=t?t.length:void 0)!==(null!=e?e.length:void 0))return!1;for(i=n=0,r=t.length;n<r;i=++n)if(t[i]!==e[i])return!1;return!0},e.prototype.hide=function(t){return t.css("display","none")},e.prototype.show=function(t){return t.css("display","")},e.prototype.createSortable=function(){var t,e,n;return n=this.dragging.$target,this.options.multipleSelector?(e=n.prevAll(this.options.multipleSelector),t=n.nextAll(this.options.multipleSelector),n.before(e),n.after(t),e.add(n).add(t)):n},e.prototype.createClone=function(){var t,e,i;return e=this.dragging.$sortable,i=this.options.opacity,t=this.hide(e.clone()),t.each(function(t,r){var o,a,s,u,l;return o=$(e[t]),l=o.width(),s=o[0].getBoundingClientRect(),a=s.left,u=s.top,$(r).css($.extend({width:l,left:a,top:u,opacity:i},n.cloneStyles))}),t.appendTo(e.parent()),t},e.prototype.moveClone=function(t,e){var n;return n=function(){switch(this.options.axis){case"x":return"translateX("+t+"px)";case"y":return"translateY("+e+"px)";default:return"translate("+t+"px, "+e+"px)"}}.call(this),this.dragging.$clone.css({transform:n})},e.prototype.findOuterMostDraggable=function(t){var e,n;return e=$(t).closest(this.options.selector),n=e.parentsUntil(this.options.containerSelector,this.options.selector),n.length?n.last():e},e.prototype.elementPreventsDropping=function(t){return $(t).is("[data-droppable=false]")},e.prototype.dragOverAtPointShouldInsertBefore=function(t,e){return"y"===this.options.axis?e<this.dragging.overY:t<this.dragging.overX},e.prototype.isScrolling=function(){return this.scrollManager.isScrolling()},e.prototype.updateSortablePosition=function(){return this.dragging.position=i(this.dragging.$sortable)},e.prototype.sortChanged=function(){var t,e,n,i,r;return this.updateSortablePosition(),i=this.dragging,n=i.position,r=i.startPosition,t=i.$sortable,e=i.$startParent,n!==r||!this.equal(t.parent(),e)},e.prototype.trigger=function(t){return this.dragging.$sortable.trigger("sortable:"+t)},e.prototype.sendCallback=function(t){var e;return"function"==typeof(e=this.options)[t]?e[t](this.dragging):void 0},i=function(t){return t.index()+1},e}()}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=BC.getEventCoordinates,BC.MouseSortableController=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}var r,o,a,s;return e(i,n),o=navigator.userAgent.match(/firefox/i),r="move",i.prototype.addEventHandlers=function(){var t,e,n,i,r,o;i=this.events;for(o in i){n=i[o];for(t in n)e=n[t],(r=this.options[o])&&$(document).on(BC.sortable.namespace(t),r,e.bind(this))}},i.prototype.removeEventHandlers=function(){return $(document).off(BC.sortable.namespace())},i.prototype.events={selector:{dragstart:function(t){return this.cloneType=this.options.axis?"element":"native",this.startDragging(),this.setDragData(t),this.setDragImage(t)},dragenter:function(t){if(a(t),!this.dragging.$over)return this.enterDraggable(t.currentTarget)},dragleave:function(){return this.ifDraggedFromElementName("$over",function(t){return function(){return t.leaveDraggable()}}(this))},dragover:function(e){return a(e),this.dragging.$over||this.enterDraggable(e.currentTarget),this.draggingOverDraggable(t(e))},dragend:function(){return this.endDragging()},drop:function(t){return t.preventDefault()},mouseup:function(){return this.reset()},click:function(t){return t.preventDefault()}},containerSelector:{dragover:function(e){return a(e),this.draggingDraggable(t(e))},dragenter:function(t){return a(t)}},parentSelector:{dragenter:function(t){if(a(t),!this.dragging.$parent)return this.enterDraggableParent(t.currentTarget)},dragleave:function(){return this.ifDraggedFromElementName("$parent",function(t){return function(){return t.leaveDraggableParent()}}(this))}}},i.prototype.ifDraggedFromElementName=function(t,e){return $(document).one(BC.sortable.namespace("dragover"),function(n){return function(i){var r;if((r=n.dragging[t])&&!$(i.target).closest(r).length)return e()}}(this))},i.prototype.setDragData=function(t){var e,n;if(null!=(n=t.originalEvent.dataTransfer)){n.effectAllowed=r,e=this.dragging.$sortable.html();try{return n.setData("text/html",e)}catch(t){return n.setData("Text",e)}}},i.prototype.setDragImage=function(t){var e,n,i,r,a,u,l,c,d,h;return l=t.originalEvent,i=l.dataTransfer,a=l.pageX,u=l.pageY,c=this.dragging,e=c.$clone,n=c.$target,c.$sortable,null!=(null!=i?i.setDragImage:void 0)?(this.show(e),"element"===this.cloneType&&s(e,{opacity:0}),o&&s(e,{position:"relative"}),d=n.offset(),r=d.left,h=d.top,i.setDragImage(e[0],a-r,u-h)):"element"===this.cloneType?s(n,{visibility:"hidden",width:0}):void 0},a=function(t){var e;return e=t.originalEvent,e.preventDefault(),e.dataTransfer.dropEffect=r},s=function(t,e){var n;return null==e&&(e={}),n=t.css(Object.keys(e)),t.css(e),requestAnimationFrame(function(){return t.css(n)})},i}(BC.SortableController)}.call(this),function(){var t,e,n,i=function(t,e){return function(){return t.apply(e,arguments)}};t=BC.copyObject,e=BC.extendObject,n=BC.getEventCoordinates,BC.SortableScrollManager=function(){function r(t){this.transitionDidEnd=i(this.transitionDidEnd,this),this.pointerDidMove=i(this.pointerDidMove,this);var e,n;e=t.$container,t.$sortable,this.$html=$("html"),this.$window=$(window),this.windowHeight=this.$window.height(),this.container={top:n=e.offset().top,bottom:n+e.height()},this.scroll={top:this.container.top,bottom:this.container.bottom-this.windowHeight},this.start()}var o,a;return a=80,o=.9,r.prototype.start=function(){if(!this.started)return this.started=!0,null==this.throttledPointerDidMove&&(this.throttledPointerDidMove=_.throttle(this.pointerDidMove,200)),$(document).on("dragover touchmove",this.throttledPointerDidMove),$(document).on("transitionend","html",this.transitionDidEnd)},r.prototype.stop=function(){if(this.started)return this.started=!1,$(document).off("dragover touchmove",this.throttledPointerDidMove),$(document).off("transitionend","html",this.transitionDidEnd),this.stopScrolling()},r.prototype.isScrolling=function(){return null!=this.scrolling},r.prototype.pointerDidMove=function(t){return this.started?(this.updatePointer(n(t)),this.scrollIfNeeded()):this.stopScrolling()},r.prototype.transitionDidEnd=function(t){if("margin-top"===t.originalEvent.propertyName)return this.stopScrolling()},r.prototype.updatePointer=function(n){var i;return this.pointer?(this.pointer.previous=t(this.pointer),e(this.pointer,n),i=this.pointer.pageY-this.pointer.previous.pageY,Math.abs(i)>2?this.pointer.direction=i<0?"up":"down":void 0):this.pointer=n},r.prototype.pointerWithinContainer=function(){return this.pointer.pageY>this.container.top&&this.pointer.pageY<this.container.bottom},r.prototype.getScrollTrigger=function(){if(this.pointerWithinContainer())switch(this.pointer.direction){case"up":if(this.pointer.clientY<a)return"top";break;case"down":if(this.pointer.clientY>this.windowHeight-a)return"bottom"}},r.prototype.scrollIfNeeded=function(){var t;if(t=this.getScrollTrigger(),this.scrolling){if(this.scrolling!==t)return this.stopScrolling()}else if(t)return this.scrollTo(t)},r.prototype.scrollTo=function(t){var e,n;if(e=this.getDistanceTo(t))return"top"===t&&(e+=this.pointer.clientY),n=Math.abs(e/(this.windowHeight*o)),this.setMarginTop(e,n),this.scrolling=t},r.prototype.stopScrolling=function(){var t;if(this.scrolling)return t=this.getScrollTop()-this.getMarginTop(),this.removeMarginTop(),this.setScrollTop(t),this.scrolling=null},r.prototype.getMarginTop=function(){return parseInt(this.$html.css("margin-top"),10)},r.prototype.setMarginTop=function(t,e){var n,i;return n=null!=t?t+"px":"",i=null!=e?e+"s ease-in-out":"",this.$html.css({marginTop:n,transition:i})},r.prototype.removeMarginTop=function(){return this.setMarginTop()},r.prototype.getDistanceTo=function(t){return this.getScrollTop()-this.scroll[t]},r.prototype.getScrollTop=function(){return this.$window.scrollTop()},r.prototype.setScrollTop=function(t){return this.$window.scrollTop(t)},r}()}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;t=BC.getEventCoordinates,BC.TouchSortableController=function(i){function r(){this.didTouchEnd=e(this.didTouchEnd,this),this.didTouchMove=e(this.didTouchMove,this),r.__super__.constructor.apply(this,arguments),this.cloneType="element"}var o;return n(r,i),o=10,r.prototype.initializeDragging=function(){return r.__super__.initializeDragging.apply(this,arguments),this.touchStartedAt=Date.now()},r.prototype.addEventHandlers=function(){return document.addEventListener("touchmove",this.didTouchMove,{passive:!1}),document.addEventListener("touchend",this.didTouchEnd,{passive:!1}),document.addEventListener("contextmenu",this.preventContextMenu,{passive:!1})},r.prototype.removeEventHandlers=function(){return document.removeEventListener("touchmove",this.didTouchMove,{passive:!1}),document.removeEventListener("touchend",this.didTouchEnd,{passive:!1}),document.removeEventListener("contextmenu",this.preventContextMenu,{passive:!1})},r.prototype.startDragging=function(){return r.__super__.startDragging.apply(this,arguments),document.documentElement.classList.add("u-unscrollable"),BC.triggerEvent(document,"bc:android-dragstart")},r.prototype.endDragging=function(){return r.__super__.endDragging.apply(this,arguments),document.documentElement.classList.remove("u-unscrollable"),BC.triggerEvent(document,"bc:android-dragend")},r.prototype.didTouchMove=function(e){var n,i,r,a,s,u,l,c,d,h,p;if(l=u=t(e),a=l.clientX,s=l.clientY,null!=(c=this.dragging)?c.started:void 0){if(e.preventDefault(),n=$(document.elementFromPoint(a,s)),$.contains(this.dragging.$container[0],n[0])&&(this.draggingDraggable(u),(i=n.closest(this.options.selector)).length?(this.equal(i,this.dragging.$over)||this.enterDraggable(i[0]),this.draggingOverDraggable(u)):this.leaveDraggable(),this.options.parentSelector)){if(!(r=n.closest(this.options.parentSelector)).length)return this.leaveDraggableParent();if(!this.equal(r,this.dragging.$parent))return this.enterDraggableParent(r[0])}}else if(Date.now()-this.touchStartedAt>50){if(d=this.dragging,h=d.startClientX,p=d.startClientY,!(Math.max(Math.abs(a-h),Math.abs(s-p))<o))return this.reset();if($(e.target).closest(this.options.selector).length)return e.preventDefault(),this.startDragging()}},r.prototype.didTouchEnd=function(){var t;return(null!=(t=this.dragging)?t.started:void 0)?this.endDragging():this.reset()},r.prototype.preventContextMenu=function(t){return t.preventDefault()},r}(BC.SortableController)}.call(this),function(){var t,e,n,i;BC.sortable=function(n){var i,r,o,a;return null==n&&(n={}),i=null,a=null!=(o=n.handleSelector)?o:n.selector,n.containerSelector&&(a=n.containerSelector+" "+a),r=function(t,r){return e(r.currentTarget),i=new BC[t+"SortableController"](n),i.initializeDragging(r)},$(document).on("mousedown",a,function(e){if(!((null!=i?i.dragging:void 0)||e.dragTarget||e.which>1))return t(e)?(e.dragTarget=e.target,r("Mouse",e)):void 0}),$(document).on("touchstart",a,function(e){if(!((null!=i?i.dragging:void 0)||e.dragTarget))return t(e)?(e.dragTarget=e.target,r("Touch",e)):void 0})},BC.sortable.namespace=function(t){return null==t&&(t=""),t.split(" ").map(function(t){return t+".sortable"}).join(" ")},t=function(t){return t.target===t.currentTarget||i(t.target)&&!n(t.target)},i=function(t){return!$(t).closest("[data-behavior~=sortable_disabled]").length},n=function(t){return $(t).closest("[contenteditable]").length||$(t).is(":input")},e=function(t){return $(t).find("a, img").attr("draggable",!1)}}.call(this),function(){var t,e,n,i,r,o;t="[data-behavior~=card]",e="[data-behavior~=sortable_cards]",o="[data-behavior~=folder_cards]",n="[data-behavior~=sortable_cards_disabled]",BC.sortable({selector:t+":not("+n+" "+t+")",handleSelector:"[data-behavior~=sortable_card_handle]",containerSelector:e,placeholderClassName:"card--placeholder",sortEnter:function(t){if(r(t))return t.$over.addClass("card--dropping")},sortLeave:function(t){if(r(t))return t.$over.removeClass("card--dropping")},sortEnd:function(t){var e,n;if(r(t))return e=t.$over,n=t.$sortable,e.removeClass("card--dropping"),e.find(o+":first").prepend(n),n.transitionClass("card--dropped")},sortUpdate:function(t){var e,n,r,o,a,s,u;return e=t.$sortable,t.$startParent,t.$over,t.startPosition,o=t.position,s=e.data(),n=s.filingUrl,a=s.positionUrl,(r=e.parents("[data-filing-id]:first").data("filing-id"))?(u=BC.formatURL(n,{filing:{position:o,parent_id:r}}),BC.fetch(u,{method:"post"})):i(t)?(u=BC.formatURL(n,{filing:{position:o}}),BC.fetch(u,{method:"delete"})):(u=BC.formatURL(a,{position:o}),BC.fetch(u,{method:"put"}))}}),r=function(t){if(t.$over&&t.$over[0]!==t.$sortable[0])return t.$over.hasBehavior("card_folder")},i=function(t){return t.$startParent.closest(o).length}}.call(this),function(){var t,e,n,i,r,o,a,s,u,l,c,d;t="Subscribe me",a="Unsubscribe me",c="[data-role~=thread-self-subscription]",d="thread__self-subscription--off",e="[data-role=subscription-avatars]",n="[data-avatar-for-person-id]",o=function(){var t,i,r,o,a;if(t=document.querySelector(e))for(a=t.querySelectorAll(n),r=0,o=a.length;r<o;r++)if(i=a[r],i.dataset.avatarForPersonId===BC.current.person.id)return i},r=function(){return null!=o()},s=function(){var t;switch(t=document.querySelectorAll(e+" "+n).length){case 0:return"No one";case 1:return"1 person";default:return t+" people"}},BC.observe("[data-behavior~=toggle_subscription_on_recording]",function(e){return r()?(e.textContent=a,u()):(e.textContent=t,l())}),BC.observe("[data-role~=subscribers-includes-me]",function(t){return r()?t.textContent="(including you)":t.textContent=""}),$(document).on("click","[data-behavior~=toggle_subscription_on_recording]",function(){var n,r,c;return n=$(this),r=$("[data-role~=subscribers-includes-me]")[0],c=$("[data-role~=subscribers-count]")[0],n.text()===t?BC.fetch(n.attr("data-url"),{method:"POST"}).then(function(){return $(e).append(i()),u(),n.text(a),null!=r&&(r.textContent="(including you)"),null!=c?c.textContent=s():void 0}):n.is("[data-behavior~=confirm_destroy]")?confirm("Are you sure you want to stop being notified when new comments are posted to this?")?BC.fetch(n.attr("data-url"),{method:"DELETE"}).then(function(){var e;return null!=(e=o())&&e.remove(),l(),n.text(t),null!=r&&(r.textContent=""),null!=c?c.textContent=s():void 0}):void 0:BC.fetch(n.attr("data-url"),{method:"DELETE"}).then(function(){var e;return null!=(e=o())&&e.remove(),l(),n.text(t),null!=r&&(r.textContent=""),null!=c?c.textContent=s():void 0})}),u=function(){return $(c).removeClass(d)},l=function(){return $(c).addClass(d)},i=function(){var t;return t=document.createElement("img"),t.className="avatar",t.dataset.avatarForPersonId=BC.current.person.id,t.title=t.alt=BC.current.person.name,t.src=BC.current.person.avatarUrl,t}}.call(this),function(){var t,e,n;t={},BC.subscriptionsPickerControllerForElement=function(n){var i;return i=e(n),t[i]},e=function(t){return n(BC.closest(t,"form"))},n=function(t){var e,n,i,r;return e=document.createElement("a"),e.href=t.action,n=e.pathname,r=null!=(i=t.dataset.subscriptionsPickerScope)?i:"",r.length>0&&(n+=","+r),n},BC.observe("[data-behavior=subscriptions_picker]",{selectorMatched:function(n){var i;return i=e(n),t[i]=new BC.SubscriptionsPickerController(n)},selectorUnmatched:function(n){var i;return i=e(n),delete t[i]}})}.call(this),function(){BC.SubscriptionsPickerAvatarsView=function(){function t(t,e){this.element=t,this.selection=e}return t.prototype.render=function(){return this.hideAllAvatars(),this.showAvatarsForSelectedSubscribers()},t.prototype.hideAllAvatars=function(){var t,e,n,i,r;for(i=this.findAvatars(),r=[],e=0,n=i.length;e<n;e++)t=i[e],r.push(this.hideAvatar(t));return r},t.prototype.hideAvatar=function(t){return t.classList.add("u-display-n")},t.prototype.showAvatarsForSelectedSubscribers=function(){var t,e,n,i,r;for(i=this.getSelectedSubscriberIds(),r=[],t=0,n=i.length;t<n;t++)e=i[t],r.push(this.showAvatarForPerson(e));return r},t.prototype.showAvatarForPerson=function(t){return this.showAvatar(this.findAvatarForPerson(t))},t.prototype.showAvatar=function(t){return t.classList.remove("u-display-n")},t.prototype.findAvatars=function(){return this.element.querySelectorAll("[data-avatar-for-person-id]")},t.prototype.findAvatarForPerson=function(t){return this.element.querySelector("[data-avatar-for-person-id='"+t+"']")},t.prototype.getSelectedSubscriberIds=function(){return this.selection.getSubscriberIds()},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};BC.SubscriptionsPickerController=function(){function e(e){this.element=e,this.didCloseModal=t(this.didCloseModal,this),this.didChangeToggle=t(this.didChangeToggle,this),this.didClickAction=t(this.didClickAction,this),this.installModalElement(),this.installSelection(),this.installDescriptionView(),this.installAvatarsView(),this.installEventListeners()}return e.prototype.installModalElement=function(){return this.modalElement=this.element.querySelector("bc-modal"),this.modalElement.close()},e.prototype.installSelection=function(){return this.selection=new BC.SubscriptionsPickerSelection(this.element)},e.prototype.installDescriptionView=function(){return this.initializeDescriptionView(),this.renderDescriptionView()},e.prototype.installAvatarsView=function(){return this.initializeAvatarsView(),this.renderAvatarsView()},e.prototype.add=function(t){return this.select(t),this.renderDescriptionView(),this.renderAvatarsView(),this.checkCurrentToggle()},e.prototype.remove=function(t){return this.deselect(t),this.renderDescriptionView(),this.renderAvatarsView(),this.checkCurrentToggle()},e.prototype.edit=function(){return BC.platform.isMobile()?this.saveAsDraftAndRedirectToSubscriptionsEditor():(this.saveModalContents(),this.selectDefaultSubscribersIfNoneSelected(),this.presentModal())},e.prototype.restoreOrEdit=function(){if(this.restoreSavedModalContents(),this.renderAvatarsView(),this.selectionIsEmpty())return this.edit()},e.prototype.save=function(){return this.discardSavedModalContents(),this.renderDescriptionView(),this.renderAvatarsView(),this.checkCurrentToggle(),this.dismissModal()},e.prototype.cancel=function(){return this.dismissModal(),this.restoreSavedModalContents(),this.checkCurrentToggle()},e.prototype.clear=function(){return this.saveModalContents(),this.clearSelection(),this.renderAvatarsView()},e.prototype.initializeDescriptionView=function(){return this.descriptionView=new BC.SubscriptionsPickerDescriptionView(this.element.querySelector("[data-role=description]"),this.selection)},e.prototype.renderDescriptionView=function(){return this.descriptionView.render()},e.prototype.initializeAvatarsView=function(){return this.avatarsView=new BC.SubscriptionsPickerAvatarsView(this.element.querySelector("[data-role=avatars]"),this.selection)},e.prototype.renderAvatarsView=function(){return this.avatarsView.render()},e.prototype.presentModal=function(){return this.modalElement.open()},e.prototype.dismissModal=function(){return this.modalElement.close()},e.prototype.setModalContents=function(t){return $(this.modalElement).empty().append(t)},e.prototype.saveModalContents=function(){return this.previousModalContents=$(this.modalElement).contents().clone()},e.prototype.restoreSavedModalContents=function(){if(null!=this.previousModalContents)return this.setModalContents(this.previousModalContents),this.discardSavedModalContents()},e.prototype.discardSavedModalContents=function(){return delete this.previousModalContents},e.prototype.checkCurrentToggle=function(){var t,e;return this.selectionIsEmpty()?null!=(t=this.element.querySelector("[data-role=toggle][value=false]"))?t.checked=!0:void 0:null!=(e=this.element.querySelector("[data-role=toggle][value=true]"))?e.checked=!0:void 0},e.prototype.selectionIsEmpty=function(){return this.selection.isEmpty()},e.prototype.select=function(t){return this.selection.selectSubscriber(t)},e.prototype.deselect=function(t){return this.selection.deselectSubscriber(t)},e.prototype.selectDefaultSubscribersIfNoneSelected=function(){return this.selection.selectDefaultSubscribersIfEmpty()},e.prototype.clearSelection=function(){return this.selection.clear()},e.prototype.installEventListeners=function(){return BC.handleEvent("click",{on:this.element,matching:"[data-subscriptions-picker-action]","with":this.didClickAction}),BC.handleEvent("click",{on:this.element,matching:"[data-role=toggle]","with":this.didChangeToggle}),BC.handleEvent("close",{on:this.modalElement,"with":this.didCloseModal})},e.prototype.didClickAction=function(t){return this[t.target.dataset.subscriptionsPickerAction]()},e.prototype.didChangeToggle=function(t){return"true"===t.target.value?this.restoreOrEdit():this.clear()},e.prototype.didCloseModal=function(){return this.cancel()},e.prototype.saveAsDraftAndRedirectToSubscriptionsEditor=function(){var t,e;return e=BC.closest(this.element,"form"),t=new BC.SubscriptionsPickerFormController(e),t.submit()},e}()}.call(this),function(){this.JST||(this.JST={}),this.JST["all/sections/recordings/subscriptions/picker/description/label"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?r(t):""},i=t.safe,r=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){"nobody"===this.text?e.push("\n  Let me choose who to notify\u2026\n"):(e.push("\n  Notify "),e.push(n(this.text)),e.push('.\n\n  <button type="button" class="plain-btn decorated" data-subscriptions-picker-action="edit">Change\u2026</button>\n')),e.push("\n")}).call(this)}.call(t),t.safe=i,t.escape=r,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["all/sections/recordings/subscriptions/picker/description/sentence"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?r(t):""},i=t.safe,r=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push("When I post this, "),e.push(n(this.text)),e.push(' will get it.\n\n<button type="button" class="plain-btn decorated" data-subscriptions-picker-action="edit">Change\u2026</button>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,e.join("")}}.call(this),function(){BC.SubscriptionsPickerDescriptionView=function(){function t(t,e){this.element=t,this.selection=e,this.variant=this.element.dataset.subscriptionsPickerVariant,this.purpose=this.element.dataset.subscriptionsPickerPurpose}return t.prototype.render=function(){return this.element.innerHTML=JST["all/sections/recordings/subscriptions/picker/description/"+this.variant]({text:this.generateText()})},t.prototype.generateText=function(){return this.selection.isEmpty()?"nobody":this.selection.isAllPossibleSubscribers()?"everyone":this.selection.isAllDefaultSubscribers()?"everyone following this "+this.purpose:1===this.selection.size()?"1 person":"these "+this.selection.size()+" people"},t}()}.call(this),function(){BC.SubscriptionsPickerFormController=function(){function t(t){this.element=t,this.unsavedWarningElement=this.element.querySelector("[data-behavior~=warn_before_leaving_unsaved_document]"),this.redirectDestinationElement=BC.makeElement("input",{type:"hidden",name:"redirect_to",value:"edit_subscriptions"})}return t.prototype.submit=function(){return this.suppressUnsavedWarning(function(t){return function(){
return t.declareRedirectDestination(function(){return BC.triggerEvent(t.element,"submit")})}}(this))},t.prototype.suppressUnsavedWarning=function(t){try{return this.ignoreUnsavedWarning(),t()}finally{this.recognizeUnsavedWarning()}},t.prototype.ignoreUnsavedWarning=function(){var t;return null!=(t=this.unsavedWarningElement)?t.dataset.ignoreWarning="":void 0},t.prototype.recognizeUnsavedWarning=function(){return BC.defer(function(){var t;return null!=(t=this.unsavedWarningElement)?delete t.dataset.ignoreWarning:void 0})},t.prototype.declareRedirectDestination=function(t){try{return this.addRedirectDestination(),t()}finally{this.removeRedirectDestination()}},t.prototype.addRedirectDestination=function(){return this.element.appendChild(this.redirectDestinationElement)},t.prototype.removeRedirectDestination=function(){return this.element.removeChild(this.redirectDestinationElement)},t}()}.call(this),function(){BC.SubscriptionsPickerSelection=function(){function t(t){this.element=t}var e;return t.prototype.getSubscriberIds=function(){return this.getCheckedInputValues()},t.prototype.isAllPossibleSubscribers=function(){return this.getCheckedInputs().length===this.getInputs().length},t.prototype.isAllDefaultSubscribers=function(){var t,e;return t=this.getCheckedInputValues(),e=this.getDefaultInputValues(),_.isEqual(t.sort(),e.sort())},t.prototype.isEmpty=function(){return!this.size()},t.prototype.size=function(){return this.getCheckedInputs().length},t.prototype.selectSubscriber=function(t){var n;if(null!=(n=this.findInputForSubscriber(t)))return e(n,!0)},t.prototype.deselectSubscriber=function(t){var n;if(null!=(n=this.findInputForSubscriber(t)))return e(n,!1)},t.prototype.selectDefaultSubscribersIfEmpty=function(){var t,n,i,r,o;if(this.isEmpty()){for(r=this.getDefaultInputs(),o=[],t=0,i=r.length;t<i;t++)n=r[t],o.push(e(n,!0));return o}},t.prototype.clear=function(){var t,n,i,r,o;for(r=this.getInputs(),o=[],t=0,i=r.length;t<i;t++)n=r[t],o.push(e(n,!1));return o},t.prototype.getInputs=function(){return this.element.querySelectorAll("input[type=checkbox]")},t.prototype.getCheckedInputs=function(){return this.element.querySelectorAll("input[type=checkbox]:checked")},t.prototype.getCheckedInputValues=function(){var t,e,n,i,r;for(i=this.getCheckedInputs(),r=[],t=0,n=i.length;t<n;t++)e=i[t],r.push(e.value);return r},t.prototype.getDefaultInputs=function(){return this.element.querySelectorAll("input[type=checkbox][data-subscribed-to-bucket=true]")},t.prototype.getDefaultInputValues=function(){var t,e,n,i,r;for(i=this.getDefaultInputs(),r=[],t=0,n=i.length;t<n;t++)e=i[t],r.push(e.value);return r},t.prototype.findInputForSubscriber=function(t){return this.element.querySelector("input[type=checkbox][value='"+t+"']")},e=function(t,e){if(t.checked!==e)return t.checked=e,BC.triggerEvent(t,"change")},t}()}.call(this),function(){BC.on("turbolinks:load","set initial state of follow button",function(){var t;if((t=$("[data-behavior~=is_subscribed]")).length)return BC.fetch(t.data("url")).then(function(e){return t.html(e)})}),$(document).on("click","[data-behavior~=subscribe_to_recording]",function(){return BC.fetch($(this).data("url"),{method:"POST"}).then(function(t){return $("[data-behavior~=is_subscribed]").html(t)})}),$(document).on("click","[data-behavior~=unsubscribe_from_recording]",function(){return BC.fetch($(this).data("url"),{method:"DELETE"}).then(function(t){return $("[data-behavior~=is_subscribed]").html(t)})})}.call(this),function(){var t,e=[].slice;BC.observe("[data-behavior~=schedule_entry_dates]",function(e){var n,i,r,o;return n=$(e),r=n.data("schedule-entry"),o=CalendarDate.parse(r.starts_at),i=CalendarDate.parse(r.ends_at),n.replaceWith(JST["all/sections/schedules/entries/dates/template"]({startsOn:o,endsOn:i,daysSpanned:i.daysSince(o)+1,format:n.data("format"),showingYear:!t(o,i)}))}),t=function(){var t;return t=1<=arguments.length?e.call(arguments,0):[],t.every(function(t){return CalendarDate.parse(t).occursThisYear()})}}.call(this),function(){this.JST||(this.JST={}),this.JST["all/sections/schedules/entries/dates/template"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?r(t):""},i=t.safe,r=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<span class="date date-coloring--'),e.push(n(this.startsOn.getMonthName().toLowerCase())),e.push('">\n  <div class="date__header">\n    '),"abbreviated"===this.format?(e.push("\n      "),this.showingYear?(e.push("\n        "),e.push(n(this.startsOn.year)),e.push("\n      ")):(e.push("\n        "),e.push(n(this.startsOn.getAbbreviatedMonthName())),e.push("\n      ")),e.push("\n    ")):(e.push("\n      "),e.push(n(this.startsOn.getMonthName())),e.push("\n    ")),e.push('\n  </div>\n\n  <div class="date__day">\n    '),this.showingYear&&"abbreviated"===this.format&&(e.push("\n      "),e.push(n(this.startsOn.getAbbreviatedMonthName())),e.push("\n    ")),e.push("\n    "),e.push(n(this.startsOn.day)),e.push("\n  </div>\n\n  "),"full"===this.format&&(e.push('\n    <div class="date__weekday">\n      '),this.startsOn.occursThisYear()?(e.push("\n        "),e.push(n(this.startsOn.getWeekdayName())),e.push("\n      ")):(e.push("\n        "),e.push(n(this.startsOn.year)),e.push("\n      ")),e.push("\n    </div>\n  ")),e.push("\n</span>\n\n"),this.startsOn.equals(this.endsOn)||(e.push('\n  <span class="date__span">\n    '),"full"===this.format&&this.daysSpanned>2?(e.push("\n      \xb7\xb7\xb7 "),e.push(n(this.daysSpanned)),e.push(" days total \xb7\xb7\xb7\n    ")):e.push("\n      -\n    "),e.push('\n  </span>\n\n  <span class="date date-coloring--'),e.push(n(this.endsOn.getMonthName().toLowerCase())),e.push('">\n    <div class="date__header">\n      '),"abbreviated"===this.format?(e.push("\n        "),this.showingYear?(e.push("\n          "),e.push(n(this.endsOn.year)),e.push("\n        ")):(e.push("\n          "),e.push(n(this.endsOn.getAbbreviatedMonthName())),e.push("\n        ")),e.push("\n      ")):(e.push("\n        "),e.push(n(this.endsOn.getMonthName())),e.push("\n      ")),e.push('\n    </div>\n\n    <div class="date__day">\n      '),this.showingYear&&"abbreviated"===this.format&&(e.push("\n        "),e.push(n(this.endsOn.getAbbreviatedMonthName())),e.push("\n      ")),e.push("\n      "),e.push(n(this.endsOn.day)),e.push("\n    </div>\n\n    "),"full"===this.format&&(e.push('\n      <div class="date__weekday">\n        '),this.endsOn.occursThisYear()?(e.push("\n          "),e.push(n(this.endsOn.getWeekdayName())),e.push("\n        ")):(e.push("\n          "),e.push(n(this.endsOn.year)),e.push("\n        ")),e.push("\n      </div>\n    ")),e.push("\n  </span>\n")),e.push("\n")}).call(this)}.call(t),t.safe=i,t.escape=r,e.join("")}}.call(this),function(){var t,e,n,i=function(t,e){return function(){return t.apply(e,arguments)}},r=[].slice;t=function(){function t(t){this.el=t,this.allDayDidChange=i(this.allDayDidChange,this),this.endsAtDidChange=i(this.endsAtDidChange,this),this.startsAtDidChange=i(this.startsAtDidChange,this),this.install=i(this.install,this),this.startsAtInput=this.el.querySelector("[data-role=starts_at_input]"),this.endsAtInput=this.el.querySelector("[data-role=ends_at_input]"),this.allDayCheckbox=this.el.querySelector("[data-role=all_day]"),this.startsAtPicker=this.el.querySelector("[data-role=starts_at]"),this.endsAtPicker=this.el.querySelector("[data-role=ends_at]")}return t.install=function(t){return new this(t).install()},t.prototype.install=function(){return BC.defer(function(t){return function(){return t.allDay=t.allDayCheckbox.checked,t.initialize(),t.allDayCheckbox.addEventListener("change",t.allDayDidChange),t.startsAtPicker.addEventListener("change",t.startsAtDidChange),t.endsAtPicker.addEventListener("change",t.endsAtDidChange)}}(this))},t.prototype.initialize=function(){return this.allDay?(this.startsAt=CalendarDate.parse(this.startsAtInput.value),this.endsAt=CalendarDate.parse(this.endsAtInput.value),this.startsAtPicker.date=this.startsAt,this.endsAtPicker.date=this.endsAt,this.startsAtPicker.timePicker.style.display="none",this.endsAtPicker.timePicker.style.display="none"):(this.startsAt=CalendarDateTime.parse(this.startsAtInput.value),this.startsAtTime=this.startsAt.calendarTime,this.endsAt=CalendarDateTime.parse(this.endsAtInput.value),this.endsAtTime=this.endsAt.calendarTime,this.startsAtPicker.dateTime=this.startsAt,this.endsAtPicker.dateTime=this.endsAt)},t.prototype.startsAtDidChange=function(){var t;return this.allDay?this.endsAtPicker.date=this.startsAtPicker.date.next(this.endsAt.daysSince(this.startsAt)):null==this.startsAtPicker.time?this.startsAtPicker.time=this.startsAtTime:(t=new Date(this.startsAtPicker.dateTime.toLocalDate().valueOf()+(this.endsAt.toLocalDate()-this.startsAt.toLocalDate())),this.endsAtPicker.dateTime=CalendarDateTime.parse(t)),this.trackTimes()},t.prototype.endsAtDidChange=function(){var t,e;return this.allDay?this.endsAtPicker.date<this.startsAtPicker.date&&(this.endsAtPicker.shake(),this.endsAtPicker.date=this.startsAt):null==this.endsAtPicker.time?this.endsAtPicker.time=this.endsAtTime:this.endsAtPicker.dateTime<this.startsAtPicker.dateTime&&(this.endsAtPicker.shake(),e=18e5*Math.ceil(this.startsAt.toLocalDate().valueOf().toFixed()/18e5),e===this.startsAt.toLocalDate().valueOf()&&(e+=18e5),t=new Date(e),this.endsAtPicker.dateTime=CalendarDateTime.parse(t)),this.trackTimes()},t.prototype.allDayDidChange=function(){return(this.allDay=this.allDayCheckbox.checked)?this.allDayWasEnabled():this.allDayWasDisabled()},t.prototype.allDayWasEnabled=function(){return this.startsAt=CalendarDate.parse(this.startsAtInput.value),this.endsAt=CalendarDate.parse(this.endsAtInput.value),this.startsAtPicker.date=this.startsAt,this.endsAtPicker.date=this.endsAt,this.startsAtPicker.timePicker.style.display="none",this.endsAtPicker.timePicker.style.display="none",this.trackTimes()},t.prototype.allDayWasDisabled=function(){return null==this.startsAtTime&&(this.startsAtTime=CalendarTime.parse("12:00pm")),null==this.endsAtTime&&(this.endsAtTime=CalendarTime.parse("12:30pm")),this.startsAt=new CalendarDateTime(this.startsAt,this.startsAtTime),this.endsAt=this.startsAt.calendarDate.equals(this.endsAt)&&this.endsAtTime<this.startsAtTime?new CalendarDateTime(this.endsAt.next(),this.endsAtTime):new CalendarDateTime(this.endsAt,this.endsAtTime),this.startsAtPicker.dateTime=this.startsAt,this.endsAtPicker.dateTime=this.endsAt,this.startsAtPicker.timePicker.style.display="",this.endsAtPicker.timePicker.style.display="",this.trackTimes()},t.prototype.trackTimes=function(){return this.allDay?(this.startsAt=this.startsAtPicker.date,this.endsAt=this.endsAtPicker.date):(this.startsAt=this.startsAtPicker.dateTime,this.endsAt=this.endsAtPicker.dateTime,this.startsAtTime=this.startsAtPicker.time,this.endsAtTime=this.endsAtPicker.time),this.startsAtInput.value=this.startsAt,this.endsAtInput.value=this.endsAt},t}(),BC.observe("[data-behavior~=schedule_entry_editor]",function(e){return n(e,function(){return t.install(e)})}),n=function(t,i){return e(t)?i():requestAnimationFrame(function(){return n(t,i)})},e=function(t){var e;return e=r.call(t.querySelectorAll("bc-datetime-picker")),e.every(function(t){return t.hasAttribute("initialized")})}}.call(this),function(){var t,e=[].slice;BC.observe("[data-behavior~=schedule_entry_timespan]",function(e){var n,i,r,o;return i=e.dataset,r=i.scheduleEntry,n=i.format,o=JSON.parse(r),r={allDay:o.all_day,startsAt:new Date(o.starts_at),endsAt:new Date(o.ends_at),startsOn:CalendarDate.parse(o.starts_at),endsOn:CalendarDate.parse(o.ends_at)},$(e).replaceWith(JST["all/sections/schedules/entries/timespan"]({scheduleEntry:r,format:n,showingYear:!t(r.startsOn,r.endsOn),spansMultipleDays:!r.startsOn.equals(r.endsOn),spansMinutes:r.startsAt!==r.endsAt}))}),t=function(){var t;return t=1<=arguments.length?e.call(arguments,0):[],t.every(function(t){return CalendarDate.parse(t).occursThisYear()})}}.call(this),function(){this.JST||(this.JST={}),this.JST["all/sections/schedules/entries/timespan"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?r(t):""},i=t.safe,r=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t;t="abbreviated"===this.format?"%b":"%B",e.push("\n\n"),"abbreviated"===this.format&&(e.push('\n  <span class="mini-date date-coloring--'),e.push(n(LocalTime.strftime(this.scheduleEntry.startsOn.getLocalDate(),"%B").toLowerCase())),e.push('"></span>\n')),e.push("\n\n"),this.scheduleEntry.allDay?(e.push("\n  "),e.push(n(LocalTime.strftime(this.scheduleEntry.startsOn.getLocalDate(),"%a, "+t+" %e"))),e.push("\n  "),this.spansMultipleDays&&(e.push("\n    - "),e.push(n(LocalTime.strftime(this.scheduleEntry.endsOn.getLocalDate(),"%a, "+t+" %e"))),e.push("\n  ")),e.push("\n")):this.spansMultipleDays?(e.push("\n  "),e.push(n(LocalTime.strftime(this.scheduleEntry.startsAt,"%a, "+t+" %e at %l:%M%P"))),e.push(" -\n  "),e.push(n(LocalTime.strftime(this.scheduleEntry.endsAt,"%a, "+t+" %e at %l:%M%P %Z"))),e.push("\n")):this.spansMinutes?(e.push("\n  "),e.push(n(LocalTime.strftime(this.scheduleEntry.startsAt,"%a, "+t+" %e, %l:%M%P"))),e.push(" -\n  "),e.push(n(LocalTime.strftime(this.scheduleEntry.endsAt,"%l:%M%P %Z"))),e.push("\n")):(e.push("\n  "),e.push(n(LocalTime.strftime(this.scheduleEntry.startsAt,"%a, "+t+" %e, %l:%M%P %Z"))),e.push("\n")),e.push("\n")}).call(this)}.call(t),t.safe=i,t.escape=r,e.join("")}}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};BC.observe("[data-behavior~=template_construction]",function(e){return new t(e)}),t=function(){function t(t){this.element=t,this.didChooseTemplate=e(this.didChooseTemplate,this),this.installEventListeners()}return t.prototype.chooseTemplateSelector="[data-behavior~=choose_template]",t.prototype.installEventListeners=function(){return BC.handleEvent("submit",{on:this.element,matching:this.chooseTemplateSelector,"with":this.didChooseTemplate})},t.prototype.didChooseTemplate=function(t){var e;return(e=t.target.querySelector("select").value)&&Turbolinks.visit(e),t.preventDefault()},t}()}.call(this),function(){var t,e;BC.observe("[data-behavior~=monitor_template_construction]",function(n){return t(n.dataset.url).then(e)}),t=function(t){return new BC.BackgroundOperationMonitor(t).start().then(function(t){return t.project.app_url})},e=function(t){return Turbolinks.visit(t,{action:"replace"})}}.call(this),function(){BC.observe("[data-behavior~=static_datepicker]",function(t){var e,n;return $(t).datepicker({showWeek:!0}),e=$(".ui-datepicker-today"),n=e.parent("tr"),$("thead th.ui-datepicker-week-col").html(""),n.prevAll().find(".ui-datepicker-week-col").html(""),n.nextAll().andSelf().find(".ui-datepicker-week-col").each(function(t,e){return $(e).html("Week "+(t+1))}),n.find(".ui-state-active").removeClass("ui-state-highlight ui-state-active ui-state-hover"),n.find(".ui-datepicker-week-end").next().find("a").addClass("ui-state-active")})}.call(this),function(){this.JST||(this.JST={}),this.JST["all/sections/todogroups/edit/menu"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?r(t):""},i=t.safe,r=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="action-menu todolist-edit-menu" data-behavior="todolist_edit_menu">\n  <div class="action-menu__content" data-behavior="show_action_menu_loading">\n    <ul class="action-list">\n      <li class="action-list__item">\n        <a class="action-list__action" data-remote="true" rel="nofollow" href="'),e.push(n(this.$todolist.data("edit-url"))),e.push('">Edit</a>\n      </li>\n      <li class="action-list__item u-hide-on-template">\n        <a class="action-list__action" href="'),e.push(n(this.$todolist.data("move-url"))),e.push('">Move\u2026</a>\n      </li>\n      <li class="action-list__item u-hide-on-template">\n        <a class="action-list__action" href="'),e.push(n(this.$todolist.data("copy-url"))),e.push('">Copy\u2026</a>\n      </li>\n    </ul>\n    '),this.todosCount?(e.push('\n      <ul class="action-list">\n        <li class="action-list__item">\n          <a class="action-list__action" data-remote="true" rel="nofollow" data-method="delete" href="'),e.push(n(this.$todolist.data("group-url"))),e.push('?ungroup=true">Ungroup '),e.push(n(this.todosCount>1?this.todosCount+" to-dos":"this to-do")),e.push('</a>\n        </li>\n        <li class="action-list__item">\n          <a class="action-list__action" data-remote="true" rel="nofollow" data-method="delete" href="'),e.push(n(this.$todolist.data("group-url"))),e.push('?status=archived">Archive entire group</a>\n        </li>\n        <li class="action-list__item">\n          <a class="action-list__action" data-remote="true" rel="nofollow" data-method="delete" href="'),e.push(n(this.$todolist.data("group-url"))),e.push('?status=trashed">Delete entire group</a>\n        </li>\n      </ul>\n    ')):(e.push('\n      <ul class="action-list">\n        <li class="action-list__item">\n          <a class="action-list__action" data-remote="true" rel="nofollow" data-method="delete" href="'),e.push(n(this.$todolist.data("group-url"))),e.push('?status=archived">Archive group</a>\n        </li>\n        <li class="action-list__item">\n          <a class="action-list__action" data-remote="true" rel="nofollow" data-method="delete" href="'),e.push(n(this.$todolist.data("group-url"))),e.push('?status=trashed">Delete group</a>\n        </li>\n      </ul>\n    ')),e.push('\n    <ul class="action-list">\n      <li class="action-list__item">\n        <a class="action-list__action" data-remote="true" rel="nofollow" href="'),e.push(n(this.$todolist.data("new-todos-url"))),e.push('">Insert a to-do</a>\n      </li>\n    </ul>\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,e.join("")}}.call(this),function(){var t;t="[data-role~=todo_container]",BC.sortable({selector:"[data-behavior~=todolist_group][data-behavior~=sortable]",handleSelector:"[data-behavior~=sortable_todolist_group_handle]",parentSelector:"[data-behavior~=sortable_todolist_groups]",containerSelector:"[data-behavior~=sortable_todos]",placeholderClassName:"todolist--placeholder",axis:"y",sortUpdate:function(e){var n,i,r,o;return n=e.$sortable,r=e.position,i=n.parent().closest(t).data("recording-id"),o=BC.formatURL(n.data("position-url"),{position:r,parent_id:i}),BC.fetch(o,{method:"put"})},sortStart:function(t){var e;return e=t.$clone.find("[data-behavior~=todo]").not(".completed").length,t.$clone.get(0).setAttribute("data-badge-count",e),t.$clone.addClass("todolist--dragging")},sortEnd:function(t){return t.$sortable.removeClass("todolist--dragging")}})}.call(this),function(){this.JST||(this.JST={}),this.JST["all/sections/todolists/edit/menu"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?r(t):""},i=t.safe,r=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="action-menu todolist-edit-menu" data-behavior="todolist_edit_menu">\n  <div class="action-menu__content" data-behavior="show_action_menu_loading">\n    <ul class="action-list">\n      <li class="action-list__item">\n        <a class="action-list__action" data-remote="true" rel="nofollow" href="'),e.push(n(this.$todolist.data("edit-url"))),e.push('">Edit</a>\n      </li>\n      <li class="action-list__item u-hide-on-template">\n        <a class="action-list__action" href="'),e.push(n(this.$todolist.data("move-url"))),e.push('">Move\u2026</a>\n      </li>\n      <li class="action-list__item u-hide-on-template">\n        <a class="action-list__action" href="'),e.push(n(this.$todolist.data("copy-url"))),e.push('">Copy\u2026</a>\n      </li>\n    </ul>\n    <ul class="action-list">\n      <li class="action-list__item">\n        <a class="action-list__action" data-remote="true" rel="nofollow" data-method="delete" href="'),e.push(n(this.$todolist.data("url"))),e.push('?status=archived">Archive</a>\n      </li>\n    </ul>\n    <ul class="action-list">\n      <li class="action-list__item">\n        <a class="action-list__action" data-remote="true" rel="nofollow" href="'),e.push(n(this.$todolist.data("new-todos-url"))),e.push('">Insert a to-do</a>\n      </li>\n      <li class="action-list__item">\n        <a class="action-list__action" data-remote="true" rel="nofollow" href="'),e.push(n(this.$todolist.data("groups-url"))),e.push('">Add a group</a>\n      </li>\n    </ul>\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,e.join("")}}.call(this),function(){var t,e,n,i,r,o,a,s;s="[data-behavior~=todolist]",t="[data-role~=new_todo_form_container]",a="[data-role~=todo_container]",o="[data-behavior~=show_new_todo_form]",BC.observe(s,function(e){return BC.handleEvent("click",{on:e,matching:o,"with":function(t){return r(BC.closest(t.target,a)),t.preventDefault()}}),BC.handleEvent("collapse",{on:e,matching:t,"with":function(){return e.classList.remove("todolist--adding-todo")}})}),r=function(t){var r,o;if(o=n(t))return i((r=e(o))?r:BC.closest(o,a))},n=function(t){var e;return e=t.querySelectorAll("[data-behavior~=remaining_todos]"),e[e.length-1]},e=function(t){var e;return e=t.querySelectorAll("[data-new-todos-url]"),e[e.length-1]},i=function(t){return $.get(t.dataset.newTodosUrl)}}.call(this),function(){BC.sortable({selector:"[data-behavior~=todolist][data-behavior~=sortable]",handleSelector:"[data-behavior~=sortable_todolist_handle]",containerSelector:"[data-behavior~=sortable_todolists]",placeholderClassName:"todolist--placeholder",axis:"y",sortUpdate:function(t){var e,n,i;return e=t.$sortable,n=t.position,i=BC.formatURL(e.data("position-url"),{position:n}),BC.fetch(i,{method:"put"})},sortStart:function(t){var e;return e=t.$clone.find("[data-behavior~=todo]").not(".completed").length,t.$clone.get(0).setAttribute("data-badge-count",e),t.$clone.addClass("todolist--dragging")},sortEnd:function(t){return t.$sortable.removeClass("todolist--dragging")}})}.call(this),function(){var t;t="[data-role~=completion_container]",$(document).on("click","[data-behavior~=todo_completion]",function(){var e,n,i,r;return e=$(this),n=e.closest(t).hasClass("completed"),i=e.data("move-completed"),r=$("[data-url~='"+e.data("url")+"']"),r.attr("disabled",!0),r.closest(t).toggleClass("completed",!n),r.prop("checked",!n),$.ajax({url:e.data("url"),dataType:i?void 0:"text",type:n?"DELETE":"POST",success:function(){return function(){if(!e.next("[data-behavior~=todo_perma_checkbox]").length)return r.removeAttr("disabled")}}()})})}.call(this),function(){this.JST||(this.JST={}),this.JST["all/sections/todos/edit/bulk_menu"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?r(t):""},i=t.safe,r=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t;t=this.ids.join(","),e.push('\n\n<div class="action-menu todo-edit-menu todo-edit-menu--bulk" data-behavior="todo_edit_menu">\n  <div class="action-menu__content" data-behavior="show_action_menu_loading">\n    '),this.allowBulkOperations&&(e.push('\n      <ul class="action-list">\n        <li class="action-list__item">\n          <a href="'),e.push(n(this.bulkURL(this.$todolist,"assignments",t))),e.push('" class="action-list__action">Assign '),e.push(n(this.ids.length)),e.push(' to-dos\u2026</a>\n        </li>\n        <li class="action-list__item">\n          <a href="'),e.push(n(this.bulkURL(this.$todolist,"moves",t))),e.push('" class="action-list__action">Move to\u2026</a>\n        </li>\n        <li class="action-list__item">\n          <a href="'),e.push(n(this.bulkURL(this.$todolist,"copies",t))),e.push('" class="action-list__action">Copy to\u2026</a>\n        </li>\n      </ul>\n    ')),e.push('\n\n    <ul class="action-list">\n      <li class="action-list__item">\n        <a href="'),e.push(n(this.bulkURL(this.$todolist,"todos",t))),e.push('?status=archived" class="action-list__action" data-remote="true" rel="nofollow" data-method="delete">\n          '),this.allowBulkOperations?e.push("\n            Archive them\n          "):(e.push("\n            Archive "),e.push(n(this.ids.length)),e.push(" to-dos\u2026\n          ")),e.push('\n        </a>\n      </li>\n      <li class="action-list__item">\n        <a href="'),e.push(n(this.bulkURL(this.$todolist,"todos",t))),e.push('?status=trashed" class="action-list__action" data-remote="true" rel="nofollow" data-method="delete">\n          Delete them\n        </a>\n      </li>\n    </ul>\n\n    <ul class="action-list action-list--create-bulk-group">\n      <li class="action-list__item">\n        <a href="'),e.push(n(BC.formatURL(this.$todolist[0].dataset.createBulkGroupUrl,{todolist:{name:"New group",todo_ids:t}}))),e.push('" data-remote="true"\n              rel="nofollow" data-method="post" class="action-list__action">\n          Group them\u2026\n        </a>\n      </li>\n    </ul>\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["all/sections/todos/edit/menu"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?r(t):""},i=t.safe,r=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="action-menu todo-edit-menu" data-behavior="todo_edit_menu">\n  <div class="action-menu__content" data-behavior="show_action_menu_loading">\n    <ul class="action-list">\n      <li class="action-list__item">\n        <a class="action-list__action" data-remote="true" rel="nofollow" href="'),e.push(n(this.$todo.data("edit-url"))),e.push('">Edit</a>\n      </li>\n      <li class="action-list__item u-hide-on-template">\n        <a class="action-list__action" rel="nofollow" href="'),e.push(n(this.$todo.data("move-url"))),e.push('">Move\u2026</a>\n      </li>\n      <li class="action-list__item u-hide-on-template">\n        <a class="action-list__action" rel="nofollow" href="'),e.push(n(this.$todo.data("copy-url"))),e.push('">Copy\u2026</a>\n      </li>\n    </ul>\n    <ul class="action-list">\n      <li class="action-list__item">\n        <a class="action-list__action" data-remote="true" rel="nofollow" data-method="delete" href="'),e.push(n(this.$todo.data("url"))),e.push('?status=archived">Archive</a>\n      </li>\n      <li class="action-list__item">\n        <a class="action-list__action" data-remote="true" rel="nofollow" data-method="delete" href="'),e.push(n(this.$todo.data("url"))),e.push('?status=trashed">Delete</a>\n      </li>\n    </ul>\n    <ul class="action-list">\n      <li class="action-list__item">\n        <a class="action-list__action" data-remote="true" rel="nofollow" href="'),e.push(n(this.$todo.data("new-todos-url"))),e.push('">Insert a to-do</a>\n      </li>\n    </ul>\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,e.join("")}}.call(this),function(){$(document).on("autosave:restore","[data-behavior~=todo]",function(){var t,e;if(e=this.querySelector("trix-editor"))return t=e.editor,""===t.getDocument().toString().trim()?$(e).collapse():$(e).expand()})}.call(this),function(){var t;$(document).on("change","select[data-behavior~=destination_bucket_selector]",function(){var e,n,i,r;if(i=$(this).find(":selected").data(),r=i.url,n=i.name,e=$(this).closest("section").find(".act-on-card__reference--many").length,t(),r)return $("[data-behavior~=now_pick_a_list]").html('<div class="loading-destination-lists"></div>'),BC.fetch(r).then(function(t){return $("[data-behavior~=now_pick_a_list]").html("OK. Below you\u2019ll find the to-do lists from <strong>"+_.escape(n)+"</strong>. Which list do you want to move "+(e?"them":"it")+" to?"),$("[data-behavior~=todolists_for_bucket]").html(t)})}),t=function(){return $("[data-behavior~=todolists_for_bucket]").html(""),$("[data-behavior~=now_pick_a_list]").html("")}}.call(this),function(){$(document).on("ajax:before","[data-behavior~=show_action_menu_loading] a[href]",function(t){return setTimeout(function(){return $(t.target).closest("[data-behavior~=show_action_menu_loading]").addClass("loading")},300)})}.call(this),function(){var t,e;e="[data-role~=todo_container]",BC.sortable({selector:t="[data-behavior~=todo][data-behavior~=sortable]",handleSelector:"[data-behavior~=sortable_todo_handle]",parentSelector:"[data-behavior~=remaining_todos]",multipleSelector:t+"[data-selected]",containerSelector:"[data-behavior~=sortable_todos]",axis:"y",sortStart:function(t){return t.$clone.addClass("selected"),t.$sortable.addClass("todo--dragging")},sortEnd:function(t){return t.$sortable.removeClass("selected todo--dragging")},sortUpdate:function(n){var i,r,o,a,s,u,l,c;return i=n.$sortable,s=n.position,u=i.data().positionUrl,r=i.closest(e),a=r.data("recording-id"),1===i.length?(s=r.find(t).index(i)+1,c=BC.formatURL(u,{todo:{position:s,parent_id:a}}),BC.fetch(c,{method:"put"})):(l={},i.parent().find(t).each(function(t,e){var n;return n=e.dataset.recordingId,s=t+1,l[n]={position:s,parent_id:a}}),o=Object.keys(l),u=u.replace(/\d+\/position/,o+"/position"),c=BC.formatURL(u,{todos:l}),BC.fetch(c,{method:"put"}))}})}.call(this),function(){$(document).on("ajax:before","[data-behavior~=update_todo_position_on_submit]",function(t){var e,n;return e=$(t.target),n=e.closest("[data-role~=new_todo_form_container]").index()+1,e.find("[data-role~=todo_position_field]").attr("value",n)})}.call(this),function(){$(document).on("click","[data-behavior~=expand_new_todolist]",function(){return $("[data-behavior~=new_todolist]").expand(),$("[data-attribute~=blank_slate_scenarios]").hide(),!1})}.call(this),function(){this.JST||(this.JST={}),this.JST["all/sections/todosets/templates/hill_with_axes_cropped"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){
e.push('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 670 200" class="hill-chart__svg" data-target="hill-chart.svg">\n  <path class="hill-chart__path" data-target="hill-chart.path" opacity=".67" fill="#FFF" stroke="gray" d="M10 170.6C110 170.6 244.5 10 335 10s225 160.6 325 160.6"/>\n  <path class="hill-chart__x-axis" data-target="hill-chart.xAxis" opacity=".33" fill="none" stroke="#000" d="M10 177.9h650H10z"/>\n  <g fill="none" stroke="#000" opacity=".33">\n    <path d="M335 10v1"/>\n    <path stroke-dasharray="1.998 1.998" d="M335 13v162.9"/>\n    <path d="M335 176.9v1"/>\n  </g>\n  <path fill="none" d="M0 0h671v200H0z"/>\n  <path d="M119.7 188.4c0-.2.1-.4.4-.4h3.9c.2 0 .3.1.3.3v.1c0 .2-.1.3-.3.3h-3.3v2.3h2.5c.2 0 .3.1.3.3v.1c0 .2-.1.3-.3.3h-2.5v2.6c0 .2-.1.4-.4.4h-.2c-.2 0-.4-.1-.4-.4v-5.9zM125.5 188.4c0-.2.1-.4.4-.4h.2c.2 0 .4.1.4.4v6.2c0 .2-.1.4-.4.4h-.2c-.2 0-.4-.1-.4-.4v-6.2zM131.1 187.9c1.5 0 2.4.7 2.8 1.7.2.4-.1.5-.3.5h-.2c-.2 0-.3-.2-.4-.4-.3-.6-.9-1-1.9-1-1.5 0-2.4 1.2-2.4 2.7 0 1.6 1 2.7 2.4 2.7 1.1 0 2.2-.7 2.2-1.9v-.2h-1.8c-.2 0-.3-.1-.3-.3v-.2c0-.2.1-.3.3-.3h2.4c.2 0 .3.1.3.3v3.1c0 .2-.1.3-.3.3h-.2c-.2 0-.2-.1-.3-.3l-.1-.7c-.4.7-1.2 1-2.2 1-2 0-3.4-1.5-3.4-3.6s1.4-3.4 3.4-3.4zM135.6 188.4c0-.2.1-.4.4-.4h.2c.2 0 .4.1.4.4v3.8c0 1.3.6 2 1.8 2 1.2 0 1.8-.7 1.8-2v-3.8c0-.2.1-.4.4-.4h.2c.2 0 .4.1.4.4v3.8c0 2-1.1 2.8-2.8 2.8-1.6 0-2.8-.8-2.8-2.8v-3.8zM142.7 188.4c0-.2.1-.4.4-.4h2.2c1.6 0 2.4.7 2.4 2 0 1-.5 1.8-1.5 2l1.4 2.3c.2.3 0 .5-.2.5h-.2c-.2 0-.3-.1-.5-.4l-1.4-2.3h-1.6v2.3c0 .2-.1.4-.4.4h-.2c-.2 0-.4-.1-.4-.4v-6zm2.6 3c1 0 1.4-.6 1.4-1.4 0-.8-.5-1.2-1.4-1.2h-1.7v2.6h1.7zM149.2 188.4c0-.2.1-.4.4-.4h.2c.2 0 .4.1.4.4v6.2c0 .2-.1.4-.4.4h-.2c-.2 0-.4-.1-.4-.4v-6.2zM151.9 188.4c0-.2.1-.4.4-.4h.2c.2 0 .4.1.5.4l3.5 5v-5c0-.2.1-.4.4-.4h.2c.2 0 .4.1.4.4v6.2c0 .2-.1.4-.4.4h-.2c-.2 0-.4-.1-.5-.4l-3.5-5v5c0 .2-.1.4-.4.4h-.2c-.2 0-.4-.1-.4-.4v-6.2zM162.2 187.9c1.5 0 2.4.7 2.8 1.7.2.4-.1.5-.3.5h-.2c-.2 0-.3-.2-.4-.4-.3-.6-.9-1-1.9-1-1.5 0-2.4 1.2-2.4 2.7 0 1.6 1 2.7 2.4 2.7 1.1 0 2.2-.7 2.2-1.9v-.2h-1.8c-.2 0-.3-.1-.3-.3v-.2c0-.2.1-.3.3-.3h2.4c.2 0 .3.1.3.3v3.1c0 .2-.1.3-.3.3h-.2c-.2 0-.2-.1-.3-.3l-.1-.7c-.5.7-1.2 1-2.2 1-2 0-3.4-1.5-3.4-3.6s1.4-3.4 3.4-3.4zM170.6 188.8h-2.1c-.2 0-.3-.1-.3-.3v-.1c0-.2.1-.3.3-.3h5.1c.2 0 .3.1.3.3v.1c0 .2-.1.3-.3.3h-2.1v5.7c0 .2-.1.4-.4.4h-.1c-.2 0-.4-.1-.4-.4v-5.7zM174.9 188.4c0-.2.1-.4.4-.4h.2c.2 0 .4.1.4.4v2.6h3.7v-2.6c0-.2.1-.4.4-.4h.2c.2 0 .4.1.4.4v6.2c0 .2-.1.4-.4.4h-.2c-.2 0-.4-.1-.4-.4v-2.7h-3.7v2.7c0 .2-.1.4-.4.4h-.2c-.2 0-.4-.1-.4-.4v-6.2zM182.2 188.4c0-.2.1-.4.4-.4h.2c.2 0 .4.1.4.4v6.2c0 .2-.1.4-.4.4h-.2c-.2 0-.4-.1-.4-.4v-6.2zM184.9 188.4c0-.2.1-.4.4-.4h.2c.2 0 .4.1.5.4l3.5 5v-5c0-.2.1-.4.4-.4h.2c.2 0 .4.1.4.4v6.2c0 .2-.1.4-.4.4h-.2c-.2 0-.4-.1-.5-.4l-3.5-5v5c0 .2-.1.4-.4.4h-.2c-.2 0-.4-.1-.4-.4v-6.2zM195.2 187.9c1.5 0 2.4.7 2.8 1.7.2.4-.1.5-.3.5h-.2c-.2 0-.3-.2-.4-.4-.3-.6-.9-1-1.9-1-1.5 0-2.4 1.2-2.4 2.7 0 1.6 1 2.7 2.4 2.7 1.1 0 2.2-.7 2.2-1.9v-.2h-1.8c-.2 0-.3-.1-.3-.3v-.2c0-.2.1-.3.3-.3h2.4c.2 0 .3.1.3.3v3.1c0 .2-.1.3-.3.3h-.2c-.2 0-.2-.1-.3-.3l-.1-.7c-.5.7-1.2 1-2.2 1-2 0-3.4-1.5-3.4-3.6s1.4-3.4 3.4-3.4zM199.7 192.8h.2c.2 0 .3.1.4.4.2.6.7 1 1.8 1s1.7-.5 1.7-1.2c0-1.9-4.3-.5-4.3-3.2 0-1.1 1-2 2.5-2 1.4 0 2.2.6 2.5 1.6.1.3-.1.4-.3.4h-.2c-.2 0-.3-.1-.4-.4-.2-.6-.7-.9-1.6-.9-.9 0-1.6.4-1.6 1.1 0 1.8 4.3.4 4.3 3.2 0 1.2-1 2-2.7 2-1.6 0-2.5-.7-2.7-1.7-.1-.1.1-.3.4-.3zM211.1 187.9c2 0 3.4 1.5 3.4 3.6s-1.4 3.6-3.4 3.6-3.4-1.5-3.4-3.6 1.4-3.6 3.4-3.6zm0 6.3c1.4 0 2.4-1.2 2.4-2.7 0-1.6-.9-2.7-2.4-2.7s-2.4 1.2-2.4 2.7c0 1.5 1 2.7 2.4 2.7zM215.7 188.4c0-.2.1-.4.4-.4h.2c.2 0 .4.1.4.4v3.8c0 1.3.6 2 1.8 2 1.2 0 1.8-.7 1.8-2v-3.8c0-.2.1-.4.4-.4h.2c.2 0 .4.1.4.4v3.8c0 2-1.1 2.8-2.8 2.8-1.6 0-2.8-.8-2.8-2.8v-3.8zM224.5 188.8h-2.1c-.2 0-.3-.1-.3-.3v-.1c0-.2.1-.3.3-.3h5.1c.2 0 .3.1.3.3v.1c0 .2-.1.3-.3.3h-2.1v5.7c0 .2-.1.4-.4.4h-.2c-.2 0-.4-.1-.4-.4v-5.7z"/>\n  <g>\n    <path d="M452.1 188.4c0-.2.1-.4.4-.4h.4c.2 0 .4.1.5.4l2.4 5.3 2.3-5.3c.1-.2.3-.4.5-.4h.4c.2 0 .4.1.4.4v6.2c0 .2-.1.4-.4.4h-.2c-.2 0-.4-.1-.4-.4l.1-5.1-2.2 5.1c-.1.3-.2.4-.5.4h-.1c-.2 0-.3-.1-.5-.4l-2.2-5 .1 5c0 .2-.1.4-.4.4h-.2c-.2 0-.4-.1-.4-.4v-6.2zM462.8 188.4c.1-.2.2-.4.5-.4h.3c.3 0 .4.1.5.4l2.2 6.1c.1.3 0 .4-.3.4h-.2c-.2 0-.3-.1-.4-.4l-.5-1.4h-3l-.5 1.4c-.1.2-.2.4-.4.4h-.2c-.3 0-.4-.1-.3-.4l2.3-6.1zm1.9 3.9l-1.2-3.3-1.2 3.3h2.4zM467.5 188.4c0-.2.1-.4.4-.4h.2c.2 0 .4.1.4.4v3.3l3.1-3.3c.2-.2.3-.4.6-.4h.3c.2 0 .4.2.1.4l-2.4 2.5 2.6 3.4c.2.3 0 .5-.2.5h-.2c-.2 0-.3-.1-.5-.4l-2.2-2.9-1.1 1.1v1.7c0 .2-.1.4-.4.4h-.2c-.2 0-.4-.1-.4-.4v-5.9zM474 188.4c0-.2.1-.4.4-.4h.2c.2 0 .4.1.4.4v6.2c0 .2-.1.4-.4.4h-.2c-.2 0-.4-.1-.4-.4v-6.2zM476.7 188.4c0-.2.1-.4.4-.4h.2c.2 0 .3.1.5.4l3.5 5v-5c0-.2.1-.4.4-.4h.2c.2 0 .4.1.4.4v6.2c0 .2-.1.4-.4.4h-.2c-.2 0-.4-.1-.5-.4l-3.5-5v5c0 .2-.1.4-.4.4h-.3c-.2 0-.4-.1-.4-.4v-6.2zM487 187.9c1.5 0 2.4.7 2.8 1.7.2.4-.1.5-.3.5h-.2c-.2 0-.3-.2-.5-.4-.3-.6-.9-1-1.9-1-1.5 0-2.4 1.2-2.4 2.7 0 1.6 1 2.7 2.4 2.7 1.1 0 2.2-.7 2.2-1.9v-.2h-1.8c-.2 0-.3-.1-.3-.3v-.2c0-.2.1-.3.3-.3h2.4c.2 0 .3.1.3.3v3.1c0 .2-.1.3-.3.3h-.2c-.2 0-.2-.1-.3-.3l-.1-.7c-.5.7-1.2 1-2.2 1-2 0-3.4-1.5-3.4-3.6s1.5-3.4 3.5-3.4zM493.8 188.4c0-.2.1-.4.4-.4h.2c.2 0 .4.1.4.4v6.2c0 .2-.1.4-.4.4h-.2c-.2 0-.4-.1-.4-.4v-6.2zM498.1 188.8H496c-.2 0-.3-.1-.3-.3v-.1c0-.2.1-.3.3-.3h5.1c.2 0 .3.1.3.3v.1c0 .2-.1.3-.3.3H499v5.7c0 .2-.1.4-.4.4h-.2c-.2 0-.4-.1-.4-.4v-5.7zM504.6 188.4c0-.2.1-.4.4-.4h.2c.2 0 .4.1.4.4v2.6h3.7v-2.6c0-.2.1-.4.4-.4h.2c.2 0 .4.1.4.4v6.2c0 .2-.1.4-.4.4h-.2c-.2 0-.4-.1-.4-.4v-2.7h-3.7v2.7c0 .2-.1.4-.4.4h-.2c-.2 0-.4-.1-.4-.4v-6.2zM513.5 188.4c.1-.2.2-.4.5-.4h.3c.3 0 .4.1.5.4l2.2 6.1c.1.3 0 .4-.3.4h-.2c-.2 0-.3-.1-.4-.4l-.5-1.4h-3l-.5 1.4c-.1.2-.2.4-.4.4h-.2c-.3 0-.4-.1-.3-.4l2.3-6.1zm1.9 3.9l-1.2-3.3-1.2 3.3h2.4zM518.2 188.4c0-.2.1-.4.4-.4h2.2c1.6 0 2.4.9 2.4 2.2 0 1.3-.9 2.3-2.4 2.3h-1.7v2c0 .2-.1.4-.4.4h-.2c-.2 0-.4-.1-.4-.4v-6.1zm2.6 3.3c1 0 1.5-.7 1.5-1.5s-.5-1.4-1.5-1.4h-1.7v2.9h1.7zM524.6 188.4c0-.2.1-.4.4-.4h2.2c1.6 0 2.4.9 2.4 2.2 0 1.3-.9 2.3-2.4 2.3h-1.7v2c0 .2-.1.4-.4.4h-.2c-.2 0-.4-.1-.4-.4v-6.1zm2.6 3.3c1 0 1.5-.7 1.5-1.5s-.5-1.4-1.5-1.4h-1.7v2.9h1.7zM530.9 188.4c0-.2.1-.4.4-.4h3.9c.2 0 .3.1.3.3v.1c0 .2-.1.3-.3.3h-3.4v2.2h2.6c.2 0 .3.1.3.3v.1c0 .2-.1.3-.3.3h-2.6v2.3h3.5c.2 0 .3.1.3.3v.1c0 .2-.1.3-.3.3h-4c-.2 0-.4-.1-.4-.4v-5.8zM536.9 188.4c0-.2.1-.4.4-.4h.2c.2 0 .3.1.5.4l3.5 5v-5c0-.2.1-.4.4-.4h.2c.2 0 .4.1.4.4v6.2c0 .2-.1.4-.4.4h-.2c-.2 0-.4-.1-.5-.4l-3.5-5v5c0 .2-.1.4-.4.4h-.2c-.2 0-.4-.1-.4-.4v-6.2z"/>\n  </g>\n</svg>\n\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){BC.Upload=function(){function t(t){this.file=t,this.attributes={filename:this.file.name,filesize:this.file.size,contentType:this.file.type}}return t.prototype.VARIANTS={card:{width:645,height:400}},t.prototype.get=function(t){return this.attributes[t]},t.prototype.getFilename=function(){var t;return null!=(t=this.attributes.filename)?t:""},t.prototype.getExtension=function(){var t;return null!=(t=this.getFilename().match(/\.(\w+)$/))?t[1].toLowerCase():void 0},t.prototype.getFilenameWithoutExtension=function(){var t,e;return null!=(t=null!=(e=this.getFilename().match(/(.*?)\.\w+$/))?e[1]:void 0)?t:this.getFilename()},t.prototype.getHumanSize=function(){return this.attributes.human_size},t.prototype.getTrashUrl=function(){return this.attributes.trash_url},t.prototype.setAttributes=function(t){return this.attributes=t},t.prototype.getAttributed=function(){return this.attributes},t.prototype.getRepresentationURL=function(){return this.attributes.representation_url},t.prototype.isRepresentable=function(){return this.attributes.representable},t.prototype.widthForCard=function(){var t;if(this.isRepresentable())return null!=(t=this.dimensionsForCard())?t.width:void 0},t.prototype.heightPercentageForCard=function(){var t,e,n,i;if(this.isRepresentable())return n=null!=(e=this.dimensionsForCard())?e:{},i=n.width,t=n.height,t/i*100},t.prototype.dimensionsForCard=function(){return this.dimensionsForVariant("card")},t.prototype.dimensionsForVariant=function(t){var e,n;if(null!=this.attributes.width&&null!=this.attributes.height)return n=this.VARIANTS[t],e=Math.min(n.width/this.attributes.width,n.height/this.attributes.height),e<1?{width:parseInt(this.attributes.width*e),height:parseInt(this.attributes.height*e)}:{width:this.attributes.width,height:this.attributes.height}},t}()}.call(this),function(){var t,e,n,i,r,o,a,s,u,l=function(t,e){return function(){return t.apply(e,arguments)}},c=function(t,e){function n(){this.constructor=t}for(var i in e)d.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},d={}.hasOwnProperty;t=function(){function t(t,e){this.file=t,this.$container=e,this.didClickRemoveButton=l(this.didClickRemoveButton,this),this.directUploadDidComplete=l(this.directUploadDidComplete,this),this.upload=new BC.Upload(this.file),this.description=this.$container.attr("data-upload-description"),this.installView(),this.$view.on("click",this.removeSelector,this.didClickRemoveButton),this.directUpload=new ActiveStorage.DirectUpload(this.file,this.getDirectUploadURL(),this),this.directUpload.create(this.directUploadDidComplete),this.toggleSubmit()}return t.prototype.selector="[data-behavior~=upload_view]",t.prototype.previewSelector="[data-template=upload_preview]",t.prototype.progressSelector="[data-behavior~=upload_progress]",t.prototype.descriptionSelector="[data-behavior~=upload_description]",t.prototype.removeSelector="[data-behavior~=remove_upload]",t.prototype.parentVisibilitySelector="[data-visible-when~=attachments_present]",t.prototype.templateRoot="all/sections/uploads/",t.prototype.scrollIntoView=function(){return $("html,body").animate({scrollTop:this.$view.offset().top-60})},t.prototype.getIdentifierValue=function(){return this.upload.get(this.getIdentifierName())},t.prototype.directUploadWillStoreFileWithXHR=function(t){return t.upload.addEventListener("progress",function(t){return function(e){var n;return n=e.loaded/e.total*100,t.directUploadDidProgress(n)}}(this))},t.prototype.directUploadDidProgress=function(t){return this.$view.find(this.progressSelector).show().val(t)},t.prototype.directUploadDidComplete=function(t,e){return t?this.directUploadDidFail(t):this.directUploadDidSucceed(e)},t.prototype.directUploadDidSucceed=function(t){return this.createUpload(t.signed_id)},t.prototype.directUploadDidFail=function(){return alert("Sorry, there was a problem uploading "+this.file.name+".\n\nPlease try adding that file again."),this.removeView(),this.toggleSubmit()},t.prototype.getUploadURL=function(){throw new Error("Must be defined in subclass")},t.prototype.getIdentifierName=function(){throw new Error("Must be defined in subclass")},t.prototype.createUpload=function(t){return BC.fetch(this.getUploadURL(),{method:"post",contentType:"application/json",body:JSON.stringify({file:t}),as:"json"}).then(function(t){return function(e){return t.upload.setAttributes(e),t.refreshView()}}(this))["catch"](function(t){return function(e){return t.directUploadDidFail(e)}}(this))},t.prototype.deleteUpload=function(){var t;if(t=this.upload.getTrashUrl())return $.ajax({url:t,type:"DELETE"})},t.prototype.didClickRemoveButton=function(){return this.deleteUpload(),this.removeView(),!1},t.prototype.installView=function(){return this.$view=$(this.renderTemplate("upload")),this.refreshView(),this.$view.appendTo(this.$container),this.expandDescription(),this.toggleVisibility()},t.prototype.removeView=function(){return this.$view.remove(),this.toggleVisibility()},t.prototype.refreshView=function(){return this.$view.find(this.previewSelector).html(this.renderTemplate("upload_preview"))},t.prototype.toggleVisibility=function(){var t;return t=this.$container.find(this.selector).length,this.$container.closest(this.parentVisibilitySelector).toggle(t>0)},t.prototype.toggleSubmit=function(){return BC.isUploadingFiles()?this.$view.disableSubmit({buttonValue:"Uploading\u2026"}):this.$view.enableSubmit()},t.prototype.renderTemplate=function(t){return JST[""+this.templateRoot+t](this)},t.prototype.expandDescription=function(){if(this.description)return this.$view.find(this.descriptionSelector).expand()},t.prototype.getDirectUploadURL=function(){return BC.accountPath("/rails/active_storage/direct_uploads")},t}(),e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}var n;return c(e,t),e.prototype.getUploadURL=function(){return BC.accountPath(n()+"/uploads")},e.prototype.getIdentifierName=function(){return"id"},n=function(){return $("[data-vault-url]").data("vault-url")},e}(t),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.getUploadURL=function(){return BC.accountPath("/uploads/stage")},e.prototype.getIdentifierName=function(){return"sgid"},e}(t),o="[data-behavior~=file_uploader]",u="[data-behavior~=version_uploader]",i="[data-behavior~=staged_files_container]",r="[data-behavior~=file_picker]",$(document).on("click",o+" "+r,function(){return BC.pickFiles(function(t){return s(t)}),!1}),$(document).on("dropzone:drop",o,function(t){return s(t.originalEvent.files)}),$(document).on("click",u+" "+r,function(){return BC.pickFiles({multiple:!1},a),!1}),$(document).on("dropzone:drop",u,function(t){return a(t.originalEvent.files[0])}),s=function(t){var n,r,a,s,u,l,c;for(n=$(o+" "+i),c=!1,l=[],s=0,u=t.length;s<u;s++)a=t[s],r=new e(a,n),c?l.push(void 0):(c=!0,l.push(r.scrollIntoView()));return l},a=function(t){var e;return e=$(u+" "+i),new n(t,e)}}.call(this),function(){this.JST||(this.JST={}),this.JST["all/sections/uploads/upload"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?r(t):""},i=t.safe,r=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t;e.push('<article class="uploader__staged-file" data-behavior=\'upload_view\'>\n  <div class="upload upload--editing flush--top">\n    <div class="upload__preview" data-template=\'upload_preview\'></div>\n\n    <section class="upload__fields">\n      <h3 class="upload__name filename flush--ends">\n        <textarea name="uploads[][base_name]" rows="1" autofocus="autofocus" class="input input--full-width upload__name-editor" placeholder="Name this file\u2026" data-behavior="autoresize">'),e.push(n(this.upload.getFilenameWithoutExtension())),e.push("</textarea>\n\n        "),this.upload.getExtension()&&(e.push('\n          <span class="upload__extension">.'),e.push(n(this.upload.getExtension())),e.push("</span>\n        ")),e.push('\n      </h3>\n\n      <label class="push_half--top u-display-b" data-behavior="upload_description expandable">\n        <strong>Notes</strong>\n        <div class="collapsed_content">\n          <button name="button" type="button" class="prompt align--left" data-behavior="expand_on_click">Add any notes here\u2026</button>\n        </div>\n\n        <div class="expanded_content">\n          <div class="trix-contained-input">\n            <bc-require script="rich_text">\n              <trix-editor input="'),e.push(n(t="upload_input_"+Math.round(1e5*Math.random()))),e.push('" data-behavior="rich_text_editor drop_zone submit_on_control_enter scroll-into-view-on-focus" class="input input--full-width formatted_content" autofocus></trix-editor>\n              <input id="'),e.push(n(t)),e.push('" type="hidden" name="uploads[][description]" value="'),e.push(n(this.description)),e.push('">\n            </bc-require>\n          </div>\n        </div>\n      </label>\n    </section>\n  </div>\n\n  <button data-behavior="remove_upload" type="button" class="upload__cancel-upload">\u2715</button>\n</article>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["all/sections/uploads/upload_preview"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?r(t):""},i=t.safe,r=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<input type="hidden" name="uploads[]['),e.push(n(this.getIdentifierName())),e.push(']" value="'),e.push(n(this.getIdentifierValue())),e.push('" />\n\n'),this.upload.isRepresentable()?(e.push('\n  <figure class="upload__icon upload__icon--previewable">\n\n    <div class="inline_media_width_constraint" style="width: '),e.push(n(this.upload.widthForCard())),e.push('px;">\n      <div class="inline_media_height_constraint" style="padding-top: '),e.push(n(this.upload.heightPercentageForCard())),e.push('%;">\n        <div class="inline_media_box">\n          <div>\n            <img src="'),e.push(n(this.upload.getRepresentationURL())),e.push('" alt="'),e.push(n(this.upload.file.name)),e.push('">\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <progress class="upload__progress" value="0" max="100" data-behavior=\'upload_progress\' style="display:none;"></progress>\n\n    <span class="upload__size">'),e.push(n(this.upload.getHumanSize())),e.push("</span>\n  </figure>\n")):(e.push('\n  <figure class="upload__icon upload__icon--'),e.push(n(this.upload.getExtension())),e.push('">\n    <progress class="upload__progress" value="0" max="100" data-behavior=\'upload_progress\' style="display:none;"></progress>\n\n    <span class="upload__size">'),e.push(n(this.upload.getHumanSize())),e.push("</span>\n  </figure>\n")),e.push("\n")}).call(this)}.call(t),t.safe=i,t.escape=r,e.join("")}}.call(this),function(){var t,e,n,i,r,o;$(document).on("click","[data-behavior~=export_vault]",function(){var o,a;return r(this)||(o=n(this,"Preparing to download\u2026"),a=function(t){return function(){return o(),$(t).collapse()}}(this),e(this.href).then(t).then(i).then(a,a)),!1}),r=function(t){return t.dataset.disabled},n=function(t,e){var n;return n=t.textContent,t.textContent=e,t.dataset.disabled=!0,function(){return t.textContent=n,delete t.dataset.disabled}},e=function(t){return BC.fetch(t,{method:"post",as:"json"})["catch"](function(t){var e;return 422===(null!=(e=t.response)?e.status:void 0)&&o(),Promise.reject(t)})},t=function(t){return"completed"===t.status?Promise.resolve(t.download_url):new BC.BackgroundOperationMonitor(t.url).start().then(function(){return t.download_url})},i=function(t){return window.location=t},o=function(){return $("[data-behavior~=flash_message_container]").append('<div class="flash-notice flash-notice--error flash-notice--on-vault" data-behavior="flash_notice" data-flash-duration="5">\n  <div class="flash-notice__content">\n    <span class="flash-notice__icon"></span> Sorry, there\u2019s nothing to download in this folder.\n  </div>\n</div>')}}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){this.JST||(this.JST={}),this.JST["desktop/behaviors/element/lightbox/caption"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?r(t):""},i=t.safe,r=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){this.caption&&(e.push('\n  <span class="attachment__attribute attachment__attribute--caption">'),e.push(n(this.caption)),e.push("</span>\n")),e.push('\n\n<span class="attachment__attribute">\n  '),e.push(n(this.filename)),e.push('\n</span>\n\n<span class="attachment__attribute hide-on-print">\n  '),e.push(n(this.humanSize)),e.push('\n</span>\n\n<span class="attachment__attribute attachment__attribute--download hide-on-print">\n  <a href="'),e.push(n(this.downloadUrl)),e.push('" target="_blank" class="decorated--matched">View full-size</a>\n</span>\n\n<span class="attachment__attribute attachment__attribute--download hide-on-print">\n  <a href="'),e.push(n(this.downloadUrl)),e.push('?attachment=true&disposition=attachment" target="_blank" class="decorated--matched">Download</a>\n</span>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,e.join("")}}.call(this),function(){BC.LightboxCaptionView=function(){function t(t){this.element=t}return t.prototype.render=function(t){var e,n,i,r;return e=t.caption,i=t.filename,r=t.humanSize,n=t.downloadUrl,this.element.innerHTML=JST["desktop/behaviors/element/lightbox/caption"]({caption:e,filename:i,humanSize:r,downloadUrl:n})},t}()}.call(this),function(){BC.LightboxConstraint=function(){function t(t){this.maximumWidth=t.maximumWidth,this.maximumHeight=t.maximumHeight,this.viewportWidth=Math.max(window.innerWidth-n,2*n),this.viewportHeight=Math.max(window.innerHeight-e,2*e)}var e,n;return n=80,e=120,t.prototype.width=function(){return this.dimensionsNeedConstraining()?this.constrainedWidth():this.maximumWidth},t.prototype.height=function(){return this.dimensionsNeedConstraining()?this.constrainedHeight():this.maximumHeight},t.prototype.dimensionsNeedConstraining=function(){return this.maximumWidth>this.viewportWidth||this.maximumHeight>this.viewportHeight},t.prototype.constrainedWidth=function(){return this.shouldMaximizeWidth()?this.viewportWidth:this.viewportHeight*this.ratio()},t.prototype.constrainedHeight=function(){return this.shouldMaximizeWidth()?this.viewportWidth/this.ratio():this.viewportHeight},t.prototype.shouldMaximizeWidth=function(){return this.ratio()>this.viewportRatio()},t.prototype.ratio=function(){return this.maximumWidth/this.maximumHeight},t.prototype.viewportRatio=function(){return this.viewportWidth/this.viewportHeight},t}()}.call(this),function(){var t,e,n,i=function(t,e){return function(){return t.apply(e,arguments)}};e="[data-role=lightbox_image]",n="[data-role=lightbox_navigation]",t="[data-role=lightbox_caption]",BC.LightboxController=function(){function r(t,e){this.element=t,this.sourceElement=e,this.elementDidClose=i(this.elementDidClose,this),this.didResize=i(this.didResize,this),this.didClickImage=i(this.didClickImage,this),this.destroyImage=i(this.destroyImage,this),this.showImage=i(this.showImage,this),this.close=i(this.close,this),this.installImageController(),this.installNavigationController(),this.installCaptionView()}return r.prototype.installImageController=function(){return this.imageElement=BC.makeElement("img",{"class":"lightbox-image","data-role":"lightbox_image"}),this.imageController=new BC.LightboxImageController(this.imageElement,this.sourceElement)},r.prototype.installNavigationController=function(){var t;return t=this.element.querySelector(n),this.navigationController=new BC.LightboxNavigationController(t,this.sourceElement,this)},r.prototype.installCaptionView=function(){var e;return e=this.element.querySelector(t),this.captionView=new BC.LightboxCaptionView(e)},r.prototype.open=function(){return this.loadImage().then(function(t){return function(){return t.addEventListeners(),t.addNavigation(),t.renderCaption(),t.animateImageIn()}}(this))},r.prototype.close=function(t){var e;return e=(null!=t?t:{animate:!0}).animate,this.removeEventListeners(),this.removeNavigation(),e?this.animateImageOut().then(this.destroyImage).then(this.onClose):(this.destroyImage(),this.onClose())},r.prototype.loadImage=function(){return new Promise(function(t){return function(e){return t.imageElement.onload=e,t.imageElement.srcset=t.sourceElement.srcset,t.imageElement.src=t.sourceElement.src}}(this))},r.prototype.animateImageIn=function(){return this.imageController.animateIn()},r.prototype.animateImageOut=function(){return this.imageController.animateOut()},r.prototype.reorientImage=function(){return this.imageController.reorient()},r.prototype.showImage=function(){return this.imageController.show()},r.prototype.destroyImage=function(){return this.imageController.destroy()},r.prototype.replaceImage=function(){return this.destroyImage(),this.installImageController(),this.loadImage().then(this.showImage)},r.prototype.addNavigation=function(){return this.navigationController.add()},r.prototype.removeNavigation=function(){return this.navigationController.remove()},r.prototype.navigateTo=function(t){return this.sourceElement=t,this.replaceImage(),this.renderCaption()},r.prototype.renderCaption=function(){return this.captionView.render(this.sourceElement.dataset)},r.prototype.addEventListeners=function(){return this.eventListeners=[BC.handleEvent("resize",{on:window,"with":this.didResize}),BC.handleEvent("click",{matching:e,phase:"capturing","with":this.didClickImage}),BC.handleEvent("close",{on:this.element,"with":this.elementDidClose})]},r.prototype.removeEventListeners=function(){var t,e,n,i,r;for(i=this.eventListeners,r=[],e=0,n=i.length;e<n;e++)t=i[e],r.push(t.destroy());return r},r.prototype.didClickImage=function(t){return t.stopPropagation(),this.element.close()},r.prototype.didResize=function(){return this.reorientImage()},r.prototype.elementDidClose=function(t){var e,n;return n="turbolinks:before-cache"===(null!=(e=t.initiatingEvent)?e.type:void 0),this.close({animate:!n})},r}()}.call(this),function(){BC.LightboxDestinationImageController=function(){function t(t,e){this.element=t,this.image=e}return t.prototype.add=function(){return document.body.appendChild(this.element)},t.prototype.remove=function(){var t;return null!=(t=this.element.parentNode)?t.removeChild(this.element):void 0},t.prototype.load=function(){var t;return t=new Image,t.onload=function(t){return function(){return requestAnimationFrame(function(){return t.element.srcset=t.image.srcset,t.element.src=t.image.src})}}(this),t.srcset=this.image.srcset,t.src=this.image.src},t.prototype.orient=function(t,e){return this.setDimensions(t),this.setPosition(e)},t.prototype.animate=function(t,e){return new Promise(function(n){return function(i){return BC.transitionElementWithClass(n.element,"lightbox-image--animated",i),BC.defer(function(){return n.orient(t,e)})}}(this))},t.prototype.setDimensions=function(t){var e,n;return n=t.width,e=t.height,this.element.style.width=n+"px",this.element.style.height=e+"px"},t.prototype.setPosition=function(t){var e,n;return e=t.left,n=t.top,this.element.style.left=window.pageXOffset+e+"px",this.element.style.top=window.pageYOffset+n+"px"},t}()}.call(this),function(){BC.LightboxImage=function(){function t(t){var e,n;this.src=t.src,this.srcset=t.srcset,n=t.width,e=t.height,this.width=Number(n),this.height=Number(e)}return t.prototype.dimensions=function(){return{width:this.constraint().width(),height:this.constraint().height()}},t.prototype.position=function(){return{top:this.positioning().topOffset(),left:this.positioning().leftOffset()}},t.prototype.constraint=function(){return new BC.LightboxConstraint({maximumWidth:this.width,maximumHeight:this.height})},t.prototype.positioning=function(){return new BC.LightboxPositioning(this.dimensions())},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};BC.LightboxImageController=function(){function e(e,n){this.destinationElement=e,this.sourceElement=n,this.showSource=t(this.showSource,this),this.installImage(),this.installDestinationController()}return e.prototype.installImage=function(){return this.image=new BC.LightboxImage(this.sourceElement.dataset)},e.prototype.installDestinationController=function(){return this.initializeDestinationController(),this.loadDestination(),this.orientDestinationOverSource()},e.prototype.animateIn=function(){return this.addDestination(),this.hideSource(),this.animateDestinationIn()},e.prototype.animateOut=function(){return this.animateDestinationOut()},e.prototype.reorient=function(){return this.orientDestination(this.imageDimensions(),this.imagePosition())},e.prototype.show=function(){return this.addDestination(),this.hideSource(),this.reorient()},e.prototype.destroy=function(){return this.showSource(),this.removeDestination()},e.prototype.imageDimensions=function(){return this.image.dimensions()},e.prototype.imagePosition=function(){return this.image.position()},e.prototype.initializeDestinationController=function(){return this.destinationController=new BC.LightboxDestinationImageController(this.destinationElement,this.image)},e.prototype.addDestination=function(){return this.destinationController.add()},e.prototype.removeDestination=function(){return this.destinationController.remove()},e.prototype.loadDestination=function(){return this.destinationController.load()},e.prototype.orientDestinationOverSource=function(){return this.orientDestination(this.sourceDimensions(),this.sourcePosition())},e.prototype.orientDestination=function(t,e){return this.destinationController.orient(t,e)},e.prototype.animateDestinationIn=function(){return this.animateDestination(this.imageDimensions(),this.imagePosition())},e.prototype.animateDestinationOut=function(){return this.animateDestination(this.sourceDimensions(),this.sourcePosition())},e.prototype.animateDestination=function(t,e){return this.destinationController.animate(t,e)},e.prototype.sourceDimensions=function(){var t,e,n;return e=this.sourceElement.getBoundingClientRect(),n=e.width,t=e.height,{width:n,height:t}},e.prototype.sourcePosition=function(){var t,e,n;return e=this.sourceElement.getBoundingClientRect(),t=e.left,n=e.top,{left:t,top:n}},e.prototype.showSource=function(){return this.sourceElement.style.visibility="visible"},e.prototype.hideSource=function(){return this.sourceElement.style.visibility="hidden"},e}()}.call(this),function(){var t,e,n;$(document).on("click","[data-behavior~=lightboxable]",function(i){var r,o,a;if(a=this,!n(a))return i.metaKey||i.ctrlKey||(o=t(),r=new BC.LightboxController(o,a),r.onClose=function(){return o.parentNode.removeChild(o)},e(o),document.body.appendChild(o),r.open()),!1}),n=function(t){return null!=BC.closest(t,"[data-lightbox-suppressed]")},t=function(){var t;return t=document.createElement("div"),t.innerHTML=JST["desktop/behaviors/element/lightbox/lightbox"](),t.children[0]},e=function(t){return t.addEventListener("close",function(){return t.classList.add("lightbox--out")})}}.call(this),function(){this.JST||(this.JST={}),this.JST["desktop/behaviors/element/lightbox/lightbox"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<bc-modal type="full" close-on-scroll class="lightbox" data-behavior="lightbox">\n  <div class="u-display-n" data-role="lightbox_navigation">\n    <button type="button" class="lightbox__navigator lightbox__navigator--backward" data-lightbox-navigation-action="navigateBackward"></button>\n    <button type="button" class="lightbox__navigator lightbox__navigator--forward" data-lightbox-navigation-action="navigateForward"></button>\n  </div>\n\n  <div class="lightbox__caption attachment--preview" data-role="lightbox_caption"></div>\n</bc-modal>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};BC.LightboxNavigationController=function(){function e(e,n,i){this.element=e,this.image=n,this.delegate=i,this.didClick=t(this.didClick,this),this.didPressKey=t(this.didPressKey,this),this.sequence=BC.LightboxSequence.forImage(this.image)}return e.prototype.add=function(){if(this.imageHasAdjacents())return this.show(),this.addEventListeners()},e.prototype.remove=function(){return this.removeEventListeners()},e.prototype.navigateBackward=function(){return this.navigateTo(this.previousImage())},e.prototype.navigateForward=function(){return this.navigateTo(this.nextImage())},e.prototype.imageHasAdjacents=function(){return this.sequence.imageHasAdjacents(this.image)},e.prototype.previousImage=function(){var t;return null!=(t=this.sequence.imageBefore(this.image))?t:this.sequence.lastImage()},e.prototype.nextImage=function(){var t;return null!=(t=this.sequence.imageAfter(this.image))?t:this.sequence.firstImage()},e.prototype.addEventListeners=function(){return this.eventListeners=[BC.handleEvent("keyup",{"with":this.didPressKey}),BC.handleEvent("click",{on:this.element,matching:"[data-lightbox-navigation-action]","with":this.didClick})]},e.prototype.removeEventListeners=function(){var t,e,n,i,r;if(null!=this.eventListeners){for(i=this.eventListeners,r=[],e=0,n=i.length;e<n;e++)t=i[e],r.push(t.destroy());return r}},
e.prototype.didPressKey=function(t){switch(t.keyCode){case BC.keyCodes.left:return this.navigateBackward(),t.preventDefault();case BC.keyCodes.right:return this.navigateForward(),t.preventDefault()}},e.prototype.didClick=function(t){return this[t.target.dataset.lightboxNavigationAction]()},e.prototype.show=function(){return this.element.classList.remove("u-display-n")},e.prototype.navigateTo=function(t){return this.setImage(t),this.setDelegateImage(t)},e.prototype.setImage=function(t){return this.image=t},e.prototype.setDelegateImage=function(t){return this.delegate.navigateTo(t)},e}()}.call(this),function(){BC.LightboxPositioning=function(){function t(t){this.height=t.height,this.width=t.width}return t.prototype.topOffset=function(){return this.viewportCenterY()-this.centerY()},t.prototype.leftOffset=function(){return this.viewportCenterX()-this.centerX()},t.prototype.viewportCenterY=function(){return window.innerHeight/2},t.prototype.viewportCenterX=function(){return window.innerWidth/2},t.prototype.centerY=function(){return this.height/2},t.prototype.centerX=function(){return this.width/2},t}()}.call(this),function(){var t=[].slice;BC.LightboxSequence=function(){function e(t){this.images=t}return e.forImage=function(t){return new this(this.imagesAroundImage(t))},e.imagesAroundImage=function(e){var n;return(n=this.containerForImage(e))?t.call(n.querySelectorAll("[data-behavior~=lightboxable]")):[e]},e.containerForImage=function(t){return BC.closest(t,"[data-recording-id], [data-event-id]")},e.prototype.imageHasAdjacents=function(t){return null!=this.imageBefore(t)||null!=this.imageAfter(t)},e.prototype.imageBefore=function(t){return this.images[this.indexOf(t)-1]},e.prototype.imageAfter=function(t){return this.images[this.indexOf(t)+1]},e.prototype.firstImage=function(){return this.images[0]},e.prototype.lastImage=function(){return this.images[this.images.length-1]},e.prototype.indexOf=function(t){return this.images.indexOf(t)},e}()}.call(this),function(){$(document).on("mousewheel DOMMouseScroll","[data-behavior~=scrollable_menu]",function(t){var e,n;return e=$(this)[0],e?(n=function(){switch(t.type){case"mousewheel":return-1*t.originalEvent.wheelDelta;case"DOMMouseScroll":return t.originalEvent.detail}}(),n<0&&e.scrollTop<=0||n>0&&e.scrollTop+e.clientHeight>=e.scrollHeight?t.preventDefault():void 0):t.preventDefault()})}.call(this),function(){var t,e,n,i,r,o,a,s,u,l,c,d,h,p,f,m,g;f=0,e="selected",p="data-selected",h="[data-behavior~=selectable]",g="data-selectable-suppressed",l="[data-behavior~=multiselect_container]",m=h+"["+p+"]",t=null,$(document).on("click",h,function(e){var l,h;if(!a(e.target)&&!o(e.target))return h=$(this),u(h)?e.ctrlKey||e.metaKey||e.shiftKey?n(h):i():((e.ctrlKey||e.metaKey||e.shiftKey)&&(l=s(h))?(e.shiftKey&&$.contains(l[0],t[0])&&d(h,t),r(l)):i(),c(h))}),$(document).on("click",function(t){if(f&&0===$(t.target).closest(h).length)return i()}),$(document).on("keydown",function(t){if(f&&t.keyCode===BC.keyCodes.escape)return document.activeElement.blur(),i()}),BC.on("turbolinks:click","deselect selectables",function(){return i()}),BC.selectable={isSelected:u=function(t){return null!=t.attr(p)},select:c=function(n){return n.attr(p,"").addClass(e),n.trigger("selectable:select"),t=n,f++},deselect:n=function(t){return t.removeAttr(p).removeClass(e),t.trigger("selectable:deselect"),f--},deselectAll:i=function(){var t,e,i,r;for(r=$(m),e=0,i=r.length;e<i;e++)t=r[e],n($(t))}},a=function(t){return t.hasAttribute(g)},o=function(t){return $(t).closest("a").length>0},s=function(t){var e;if(e=t.closest(l),e.length)return e},d=function(t,e){var n,i,r,o,a,s;for(i=t[0].compareDocumentPosition(e[0])&Node.DOCUMENT_POSITION_FOLLOWING,n=i?t.nextUntil(e):t.prevUntil(e),a=[],r=0,o=n.length;r<o;r++)s=n[r],a.push(c($(s)));return a},r=function(t){var e,i,r,o,a;for(r=$(m),o=[],e=0,i=r.length;e<i;e++)a=r[e],$.contains(t[0],a)?o.push(void 0):o.push(n($(a)));return o}}.call(this),function(){BC.ready(function(){var t;if(t=BC.platform.os)return document.documentElement.dataset.os=t})}.call(this),function(){BC.observe("[data-behavior~=skip_nav]",function(t){return BC.handleEvent("focus",{on:t,"with":function(){return Beanstalk.logEvent("skipNav","focus")}}),BC.handleEvent("blur",{on:t,"with":function(){return Beanstalk.logEvent("skipNav","ignore")}}),BC.handleEvent("click",{on:t,"with":function(t){var e;return t.preventDefault(),(e=document.getElementById("main-content"))&&e.focus(),Beanstalk.logEvent("skipNav","click")}})})}.call(this),function(){$(document).on("trix-initialize","trix-editor",function(){var t;if(t=$(this.toolbarElement),!t.parent().is("bc-sticky"))return t.wrap('<bc-sticky class="sticky-trix-toolbar">')})}.call(this),function(){BC.on("turbolinks:load","set html.viewport class for chat",function(){var t;return t=$("body").hasClass("viewport")&&$(".chat--full-screen").length,$("html").toggleClass("viewport",t)})}.call(this),function(){var t,e,n,i,r,o;n="[data-behavior~=todolist_group]",r="[data-behavior~=todo]",o="[data-behavior~=show_todolist_group_edit_menu]",e="[data-behavior~=todolist_edit_menu]",$(document).on("selectable:select",n,function(t){return t.stopPropagation(),i(this)}),$(document).on("selectable:deselect",n,function(e){return e.stopPropagation(),t(this)}),$(document).on("sortable:start",n,function(){return BC.selectable.deselectAll()}),$(document).on("keypress",o,function(t){if(t.keyCode===BC.keyCodes.enter)return t.preventDefault(),$(this).click()}),i=function(e){var n,i,a;return t(e),n=$(e),a=n.find(r).length,i=JST["all/sections/todogroups/edit/menu"]({$todolist:n,todosCount:a}),n.find(o).attr("aria-expanded",!0),n.find(o).after(i)},t=function(t){return $(t).find(o).attr("aria-expanded",!1),$(e).remove()}}.call(this),function(){var t,e,n,i;t="sortable_todolist_group_handle",n="[data-behavior~="+t+"]",e="[data-behavior~=sortable_disabled]",i="[data-behavior~=todolist_group][data-behavior~=sortable]:not("+n+"):not("+e+")",$(document).on("mouseenter",i,function(){var e;return e=$(this),e.find(n).removeBehavior(t),e.addBehavior(t)})}.call(this),function(){var t,e,n,i,r;n="[data-behavior~=todolist]",r="[data-behavior~=show_todolist_edit_menu]",e="[data-behavior~=todolist_edit_menu]",$(document).on("selectable:select",n,function(t){return t.stopPropagation(),i(this)}),$(document).on("selectable:deselect",n,function(e){return e.stopPropagation(),t(this)}),$(document).on("sortable:start",n,function(){return BC.selectable.deselectAll()}),$(document).on("keypress",r,function(t){if(t.keyCode===BC.keyCodes.enter)return t.preventDefault(),$(this).click()}),i=function(e){var n,i;return t(e),n=$(e),i=JST["all/sections/todolists/edit/menu"]({$todolist:n}),n.find(r).attr("aria-expanded",!0),n.find(r).after(i)},t=function(t){return $(t).find(r).attr("aria-expanded",!1),$(e).remove()}}.call(this),function(){BC.on("turbolinks:load","load #completed_todos",function(){if("#completed_todos"===window.location.hash.substring(0,16))return BC.defer(function(){return $("[data-behavior~=show_completed_todos]").click()})})}.call(this),function(){var t,e,n,i;t="sortable_todolist_handle",n="[data-behavior~="+t+"]",e="[data-behavior~=sortable_disabled]",i="[data-behavior~=todolist][data-behavior~=sortable]:not("+n+"):not("+e+")",$(document).on("mouseenter",i,function(){var e;return e=$(this),e.find(n).removeBehavior(t),e.addBehavior(t)})}.call(this),function(){BC.on("turbolinks:load","expand #adding_to_ todolist",function(){if("#adding_to_"===window.location.hash.substring(0,11))return window.location.hash.replace("#adding_to_",""),BC.defer(function(){return $("[data-behavior~=show_new_todo_form]").click()})}),$(document).on("collapse","[data-behavior~=todolist]",function(){if("#adding_to_"===window.location.hash.substring(0,11))return window.location.hash=""})}.call(this),function(){var t,e,n,i,r,o,a,s,u,l;s="[data-behavior~=todo]",l="[data-behavior~=show_todo_edit_menu]",o=s+"[data-selected]",u="[data-behavior~=todolist]",i="[data-behavior~=todo_edit_menu]",t=/0,0/,$(document).on("selectable:select",s,function(t){return t.stopPropagation(),n(this),a(this)}),$(document).on("selectable:deselect",s,function(t){var e;if(t.stopPropagation(),$(this).find(i).length&&(n(this),e=$(o)[0]))return a(e)}),$(document).on("sortable:start",s,function(){return BC.selectable.deselectAll()}),$(document).on("keypress",l,function(t){if(t.keyCode===BC.keyCodes.enter)return t.preventDefault(),$(this).click()}),a=function(t){var n,i,a,s,c,d,h;return n=$(t),i=n.closest(u),a=i.find(o),d=a.length>1?(c=function(){var t,e,n;for(n=[],t=0,e=a.length;t<e;t++)h=a[t],n.push($(h).data("recording-id"));return n}(),s=!document.body.classList.contains("project-template"),r("bulk_menu",{$todolist:i,ids:c,allowBulkOperations:s,bulkURL:e})):r("menu",{$todo:n}),n.find(l).attr("aria-expanded",!0),n.find(l).after(d)},n=function(t){return $(t).find(l).attr("aria-expanded",!1),$(i).remove()},r=function(t,e){return null==e&&(e={}),JST["all/sections/todos/edit/"+t](e)},e=function(e,n,i){var r;return r=e.data(n+"-bulk-url"),t.test(r)?r.replace(t,i):""+r+i}}.call(this),function(){var t,e,n;t="sortable_todo_handle",e="[data-behavior~="+t+"]",n="[data-behavior~=todo][data-behavior~=sortable]:not("+e+")",$(document).on("mouseenter",n,function(){var n;return n=$(this),n.find(e).removeBehavior(t),n.addBehavior(t)})}.call(this),function(){}.call(this);